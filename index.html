<!DOCTYPE html>
<html lang="it">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>C# Complete Reference · Fondamenti, Intermedio, Avanzato</title>
<link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;600;700&family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
<style>
:root {
  --bg: #0d0d0d;
  --surface: #141414;
  --card: #1a1a1a;
  --border: #2a2a2a;
  --border-hover: #3a3a3a;
  --text: #e0e0e0;
  --muted: #666;
  --muted2: #444;
  --code-bg: #111;
  --accent: #fff;
}
* { margin:0; padding:0; box-sizing:border-box; }
body { background:var(--bg); color:var(--text); font-family:'Inter',sans-serif; min-height:100vh; }
.topbar {
  display:flex; align-items:center; gap:1rem;
  padding:0 1.5rem; height:48px;
  background:var(--surface); border-bottom:1px solid var(--border);
  position:sticky; top:0; z-index:100;
}
.topbar-brand {
  font-size:.85rem; font-weight:700; color:var(--text);
  white-space:nowrap; letter-spacing:-.3px; flex-shrink:0;
}
.topbar-brand span { color:var(--muted); font-weight:400; }
.topbar-nav {
  display:flex; gap:.25rem; flex-shrink:0;
}
.nav-btn {
  padding:.3rem .75rem; border:1px solid transparent;
  background:transparent; color:var(--muted);
  border-radius:6px; font-family:'Inter',sans-serif;
  font-size:.75rem; font-weight:500; cursor:pointer;
  white-space:nowrap; transition:all .15s;
}
.nav-btn:hover { color:var(--text); background:var(--card); }
.nav-btn.active {
  background:var(--card); color:var(--text);
  border-color:var(--border); font-weight:600;
}
.topbar-divider { width:1px; height:20px; background:var(--border); flex-shrink:0; }
.search-wrap { position:relative; margin-left:auto; flex-shrink:0; }
.search-input {
  background:var(--card); border:1px solid var(--border);
  color:var(--text); font-family:'JetBrains Mono',monospace;
  font-size:.75rem; padding:.3rem 1.8rem .3rem .75rem;
  border-radius:6px; width:180px; outline:none; transition:all .2s;
}
.search-input:focus { border-color:var(--border-hover); width:240px; }
.search-input::placeholder { color:var(--muted2); }
.search-hint {
  position:absolute; right:2rem; top:50%; transform:translateY(-50%);
  font-size:.65rem; color:var(--muted2); pointer-events:none;
  font-family:'JetBrains Mono',monospace;
}
.search-clear {
  position:absolute; right:.5rem; top:50%; transform:translateY(-50%);
  color:var(--muted); font-size:.9rem; cursor:pointer;
  display:none; background:none; border:none; line-height:1;
}
.search-results {
  position:absolute; top:calc(100% + 6px); right:0;
  background:var(--card); border:1px solid var(--border);
  border-radius:8px; width:340px; max-height:420px;
  overflow-y:auto; z-index:999;
  box-shadow:0 8px 24px rgba(0,0,0,.6); display:none;
}
.search-results.open { display:block; }
.sr-item {
  padding:.6rem .9rem; border-bottom:1px solid var(--border);
  cursor:pointer; transition:background .1s;
}
.sr-item:last-child { border-bottom:none; }
.sr-item:hover { background:#1f1f1f; }
.sr-mod { font-size:.62rem; color:var(--muted); font-family:'JetBrains Mono',monospace; margin-bottom:.15rem; }
.sr-title { font-size:.82rem; font-weight:600; color:var(--text); }
.sr-sub { font-size:.7rem; color:var(--muted); margin-top:.1rem; }
.sr-highlight { color:#fff; background:#2a2a2a; border-radius:2px; padding:0 2px; }
.sr-empty { padding:1rem; text-align:center; color:var(--muted); font-size:.82rem; }

.layout { display:flex; height:calc(100vh - 48px); overflow:hidden; }
.sidebar {
  width:260px; flex-shrink:0;
  background:var(--surface); border-right:1px solid var(--border);
  overflow-y:auto; padding:.75rem 0;
}
.sidebar::-webkit-scrollbar { width:4px; }
.sidebar::-webkit-scrollbar-track { background:transparent; }
.sidebar::-webkit-scrollbar-thumb { background:var(--border); border-radius:2px; }

.tree-group { margin-bottom:.125rem; }
.tree-mod {
  display:flex; align-items:center; gap:.5rem;
  padding:.45rem 1rem; cursor:pointer;
  font-size:.78rem; font-weight:600; color:var(--text);
  user-select:none; transition:background .1s;
}
.tree-mod:hover { background:var(--card); }
.tree-mod.open { color:#fff; }
.tree-arrow {
  font-size:.6rem; color:var(--muted); transition:transform .2s; flex-shrink:0;
}
.tree-mod.open .tree-arrow { transform:rotate(90deg); color:var(--text); }
.tree-mod-label { flex:1; min-width:0; }
.tree-count {
  font-size:.65rem; font-family:'JetBrains Mono',monospace;
  color:var(--muted); background:var(--card);
  border:1px solid var(--border); border-radius:3px;
  padding:.05rem .3rem; flex-shrink:0;
}
.tree-children { display:none; padding:.125rem 0; }
.tree-mod.open + .tree-children { display:block; }
.tree-item {
  display:flex; align-items:flex-start; gap:.5rem;
  padding:.35rem 1rem .35rem 2rem; cursor:pointer;
  transition:background .1s; border-left:2px solid transparent;
}
.tree-item:hover { background:var(--card); }
.tree-item.active {
  background:var(--card); border-left-color:var(--text);
}
.tree-num {
  font-size:.62rem; font-family:'JetBrains Mono',monospace;
  color:var(--muted2); flex-shrink:0; margin-top:.1rem; width:20px;
}
.tree-item-text { flex:1; min-width:0; }
.tree-title { font-size:.75rem; font-weight:500; color:var(--text); display:block; }
.tree-sub { font-size:.66rem; color:var(--muted); display:block; margin-top:.05rem; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }

.content {
  flex:1; overflow-y:auto; padding:1.5rem 2rem;
  max-width:860px;
}
.content::-webkit-scrollbar { width:4px; }
.content::-webkit-scrollbar-track { background:transparent; }
.content::-webkit-scrollbar-thumb { background:var(--border); border-radius:2px; }

.section { display:none; animation:fadeIn .2s ease; }
.section.active { display:block; }
@keyframes fadeIn { from{opacity:0;transform:translateY(4px)} to{opacity:1;transform:translateY(0)} }

.section-title {
  font-size:1.1rem; font-weight:700; margin-bottom:1.25rem;
  display:flex; align-items:center; gap:.6rem; color:#fff;
}
.tag {
  font-size:.6rem; padding:.15rem .45rem; border-radius:4px;
  font-family:'JetBrains Mono',monospace;
  background:var(--card); color:var(--muted); border:1px solid var(--border);
}

.topic-card {
  background:var(--card); border:1px solid var(--border);
  border-radius:8px; margin-bottom:.6rem; overflow:hidden;
  transition:border-color .15s;
}
.topic-card:hover { border-color:var(--border-hover); }
.topic-header {
  padding:.75rem 1rem; cursor:pointer;
  display:flex; justify-content:space-between; align-items:center;
  user-select:none; gap:.5rem;
}
.topic-header div { flex:1; min-width:0; }
.topic-header h3 { font-size:.85rem; font-weight:600; }
.topic-sub { font-size:.68rem; color:var(--muted); margin-top:.1rem; }
.arrow { color:var(--muted2); transition:transform .25s; font-size:.75rem; flex-shrink:0; }
.topic-card.open .arrow { transform:rotate(180deg); }
.topic-body {
  display:none; padding:.125rem 1rem 1rem;
  border-top:1px solid var(--border);
}
.topic-card.open .topic-body { display:block; }

pre {
  background:var(--code-bg); border:1px solid var(--border);
  border-radius:6px; padding:.85rem 1rem; margin:.65rem 0;
  overflow-x:auto; font-family:'JetBrains Mono',monospace;
  font-size:.75rem; line-height:1.65; color:#c9d1d9;
}
.kw{color:#ff79c6} .ty{color:#8be9fd} .str{color:#f1fa8c}
.cm{color:#555;font-style:italic} .num{color:#bd93f9}
.fn{color:#50fa7b} .op{color:#ff79c6}

.info,.note,.warn,.tip {
  border-radius:0 6px 6px 0; margin:.65rem 0;
  font-size:.8rem; padding:.55rem .9rem; line-height:1.55;
}
.info { background:#111a22; border-left:2px solid #336; color:#8aa; }
.note { background:#1a1a1a; border-left:2px solid #333; color:#888; }
.warn { background:#1a1700; border-left:2px solid #554400; color:#aa8833; }
.tip  { background:#0d1a10; border-left:2px solid #224422; color:#668866; }

table { width:100%; border-collapse:collapse; margin:.65rem 0; font-size:.78rem; }
th { background:#111; color:var(--muted); padding:.45rem .7rem; text-align:left; font-size:.67rem; text-transform:uppercase; letter-spacing:.8px; }
td { padding:.45rem .7rem; border-top:1px solid var(--border); color:#999; font-family:'JetBrains Mono',monospace; font-size:.74rem; }
tr:hover td { background:#1f1f1f; }

p { line-height:1.7; color:#888; margin:.4rem 0; font-size:.83rem; }
h4 { color:var(--muted); font-size:.7rem; margin:.85rem 0 .25rem; text-transform:uppercase; letter-spacing:.8px; }

.mod-label { display:none; }
::-webkit-scrollbar { width:4px; height:4px; }
::-webkit-scrollbar-track { background:transparent; }
::-webkit-scrollbar-thumb { background:var(--border); border-radius:2px; }
</style>
</head>
<body>

<!-- TOPBAR -->
<header class="topbar">
  <div class="topbar-brand">C# <span>Reference</span></div>
  <div class="topbar-divider"></div>
  <nav class="topbar-nav">
    <button class="nav-btn active" data-mod="fundamentals" onclick="showMod('fundamentals',this)">I — Fondamenti</button>
    <button class="nav-btn" data-mod="intermediate" onclick="showMod('intermediate',this)">II — Intermedio</button>
    <button class="nav-btn" data-mod="advanced" onclick="showMod('advanced',this)">III — Avanzato</button>
  </nav>
  <div class="search-wrap" id="searchWrap">
    <input class="search-input" id="searchInput" type="text"
           placeholder="Cerca…" autocomplete="off"
           oninput="onSearch()" onfocus="openResults()"/>
    <button class="search-clear" id="searchClear" onclick="clearSearch()">×</button>
    <div class="search-results" id="searchResults"></div>
  </div>
</header>

<!-- LAYOUT -->
<div class="layout">
  <!-- SIDEBAR -->
  <aside class="sidebar">
<div class="tree">
  <!-- I — Fondamenti (15) -->
  <div class="tree-group">
    <div class="tree-mod" onclick="treeToggle(this)" data-mod="fundamentals">
      <span class="tree-arrow">▶</span>
      <span class="tree-mod-label">I — Fondamenti</span>
      <span class="tree-count">15</span>
    </div>
    <div class="tree-children">
      <div class="tree-item" onclick="showTopic('fundamentals',0)"><span class="tree-num">01</span><div class="tree-item-text"><span class="tree-title">Tipi di Dato</span><span class="tree-sub">int, double, string, bool, var, const, casting</span></div></div>
      <div class="tree-item" onclick="showTopic('fundamentals',1)"><span class="tree-num">02</span><div class="tree-item-text"><span class="tree-title">Input / Output</span><span class="tree-sub">Console.Write, ReadLine, interpolazione</span></div></div>
      <div class="tree-item" onclick="showTopic('fundamentals',2)"><span class="tree-num">03</span><div class="tree-item-text"><span class="tree-title">Aritmetica & Math</span><span class="tree-sub">+−×÷%, operatori composti, libreria Math</span></div></div>
      <div class="tree-item" onclick="showTopic('fundamentals',3)"><span class="tree-num">04</span><div class="tree-item-text"><span class="tree-title">Confronto & Booleani</span><span class="tree-sub">==, !=, &&, ||, !, operatore ternario</span></div></div>
      <div class="tree-item" onclick="showTopic('fundamentals',4)"><span class="tree-num">05</span><div class="tree-item-text"><span class="tree-title">Strutture di Controllo</span><span class="tree-sub">if/else, switch, switch expression</span></div></div>
      <div class="tree-item" onclick="showTopic('fundamentals',5)"><span class="tree-num">06</span><div class="tree-item-text"><span class="tree-title">Ciclo for</span><span class="tree-sub">Iterazioni note, break, continue, step</span></div></div>
      <div class="tree-item" onclick="showTopic('fundamentals',6)"><span class="tree-num">07</span><div class="tree-item-text"><span class="tree-title">Ciclo while / do-while</span><span class="tree-sub">Condizione prima/dopo, loop interattivo</span></div></div>
      <div class="tree-item" onclick="showTopic('fundamentals',7)"><span class="tree-num">08</span><div class="tree-item-text"><span class="tree-title">Array & foreach</span><span class="tree-sub">Array fisso, 2D, jagged, metodi Array</span></div></div>
      <div class="tree-item" onclick="showTopic('fundamentals',8)"><span class="tree-num">09</span><div class="tree-item-text"><span class="tree-title">List&lt;T&gt;</span><span class="tree-sub">Add, Remove, Find, Sort, Clear, ToArray</span></div></div>
      <div class="tree-item" onclick="showTopic('fundamentals',9)"><span class="tree-num">10</span><div class="tree-item-text"><span class="tree-title">String — Metodi</span><span class="tree-sub">Length, Split, Trim, Replace, Substring…</span></div></div>
      <div class="tree-item" onclick="showTopic('fundamentals',10)"><span class="tree-num">11</span><div class="tree-item-text"><span class="tree-title">Enum</span><span class="tree-sub">Enumerazioni, valori, casting, Flags</span></div></div>
      <div class="tree-item" onclick="showTopic('fundamentals',11)"><span class="tree-num">12</span><div class="tree-item-text"><span class="tree-title">Metodi</span><span class="tree-sub">Parametri, return, overload, ref/out, ricorsione</span></div></div>
      <div class="tree-item" onclick="showTopic('fundamentals',12)"><span class="tree-num">13</span><div class="tree-item-text"><span class="tree-title">Struct</span><span class="tree-sub">Tipo valore, costruttori, metodi</span></div></div>
      <div class="tree-item" onclick="showTopic('fundamentals',13)"><span class="tree-num">14</span><div class="tree-item-text"><span class="tree-title">Nullable & Null Operators</span><span class="tree-sub">int?, ??, ?., HasValue</span></div></div>
      <div class="tree-item" onclick="showTopic('fundamentals',14)"><span class="tree-num">15</span><div class="tree-item-text"><span class="tree-title">Scope & Visibilità</span><span class="tree-sub">Scope locale, blocco, shadowing</span></div></div>
    </div>
  </div>
  <!-- II — Intermedio (17) -->
  <div class="tree-group">
    <div class="tree-mod" onclick="treeToggle(this)" data-mod="intermediate">
      <span class="tree-arrow">▶</span>
      <span class="tree-mod-label">II — Intermedio</span>
      <span class="tree-count">17</span>
    </div>
    <div class="tree-children">
      <div class="tree-item" onclick="showTopic('intermediate',0)"><span class="tree-num">01</span><div class="tree-item-text"><span class="tree-title">Classi & Oggetti</span><span class="tree-sub">Blueprint, istanza, new, this</span></div></div>
      <div class="tree-item" onclick="showTopic('intermediate',1)"><span class="tree-num">02</span><div class="tree-item-text"><span class="tree-title">Costruttori</span><span class="tree-sub">Default, parametri, overload, object initializer</span></div></div>
      <div class="tree-item" onclick="showTopic('intermediate',2)"><span class="tree-num">03</span><div class="tree-item-text"><span class="tree-title">Proprietà</span><span class="tree-sub">get/set, auto-property, validazione, read-only</span></div></div>
      <div class="tree-item" onclick="showTopic('intermediate',3)"><span class="tree-num">04</span><div class="tree-item-text"><span class="tree-title">Incapsulamento</span><span class="tree-sub">public, private, protected, internal</span></div></div>
      <div class="tree-item" onclick="showTopic('intermediate',4)"><span class="tree-num">05</span><div class="tree-item-text"><span class="tree-title">Ereditarietà</span><span class="tree-sub">class Figlia : Padre, base, override</span></div></div>
      <div class="tree-item" onclick="showTopic('intermediate',5)"><span class="tree-num">06</span><div class="tree-item-text"><span class="tree-title">Interfacce</span><span class="tree-sub">interface, implementazione multipla, contratto</span></div></div>
      <div class="tree-item" onclick="showTopic('intermediate',6)"><span class="tree-num">07</span><div class="tree-item-text"><span class="tree-title">Polimorfismo</span><span class="tree-sub">virtual, override, abstract, sealed</span></div></div>
      <div class="tree-item" onclick="showTopic('intermediate',7)"><span class="tree-num">08</span><div class="tree-item-text"><span class="tree-title">Eccezioni</span><span class="tree-sub">try/catch/finally, throw, custom exceptions</span></div></div>
      <div class="tree-item" onclick="showTopic('intermediate',8)"><span class="tree-num">09</span><div class="tree-item-text"><span class="tree-title">Static & Object Init</span><span class="tree-sub">static class, membri statici, initializer</span></div></div>
      <div class="tree-item" onclick="showTopic('intermediate',9)"><span class="tree-num">10</span><div class="tree-item-text"><span class="tree-title">is, as, typeof</span><span class="tree-sub">Type checking, casting sicuro, runtime</span></div></div>
      <div class="tree-item" onclick="showTopic('intermediate',10)"><span class="tree-num">11</span><div class="tree-item-text"><span class="tree-title">File di Testo</span><span class="tree-sub">ReadAllText, WriteAllText, AppendAllText</span></div></div>
      <div class="tree-item" onclick="showTopic('intermediate',11)"><span class="tree-num">12</span><div class="tree-item-text"><span class="tree-title">StreamReader/Writer</span><span class="tree-sub">Lettura/scrittura riga per riga, encoding UTF-8</span></div></div>
      <div class="tree-item" onclick="showTopic('intermediate',12)"><span class="tree-num">13</span><div class="tree-item-text"><span class="tree-title">JSON</span><span class="tree-sub">JsonSerializer Serialize/Deserialize, opzioni</span></div></div>
      <div class="tree-item" onclick="showTopic('intermediate',13)"><span class="tree-num">14</span><div class="tree-item-text"><span class="tree-title">XML</span><span class="tree-sub">XmlSerializer, XDocument, LINQ to XML</span></div></div>
      <div class="tree-item" onclick="showTopic('intermediate',14)"><span class="tree-num">15</span><div class="tree-item-text"><span class="tree-title">Eccezioni I/O</span><span class="tree-sub">FileNotFoundException, IOException, pattern</span></div></div>
      <div class="tree-item" onclick="showTopic('intermediate',15)"><span class="tree-num">16</span><div class="tree-item-text"><span class="tree-title">Dictionary&lt;K,V&gt;</span><span class="tree-sub">Chiave-valore, ContainsKey, TryGetValue</span></div></div>
      <div class="tree-item" onclick="showTopic('intermediate',16)"><span class="tree-num">17</span><div class="tree-item-text"><span class="tree-title">Classe Path</span><span class="tree-sub">Combine, GetFileName, GetExtension</span></div></div>
    </div>
  </div>
  <!-- III — Avanzato (23) -->
  <div class="tree-group">
    <div class="tree-mod" onclick="treeToggle(this)" data-mod="advanced">
      <span class="tree-arrow">▶</span>
      <span class="tree-mod-label">III — Avanzato</span>
      <span class="tree-count">23</span>
    </div>
    <div class="tree-children">
      <div class="tree-item" onclick="showTopic('advanced',0)"><span class="tree-num">01</span><div class="tree-item-text"><span class="tree-title">LINQ</span><span class="tree-sub">Where, Select, OrderBy, GroupBy, First, Sum</span></div></div>
      <div class="tree-item" onclick="showTopic('advanced',1)"><span class="tree-num">02</span><div class="tree-item-text"><span class="tree-title">Generics &lt;T&gt;</span><span class="tree-sub">Classi/metodi generici, constraints where T:</span></div></div>
      <div class="tree-item" onclick="showTopic('advanced',2)"><span class="tree-num">03</span><div class="tree-item-text"><span class="tree-title">Delegates & Events</span><span class="tree-sub">Func, Action, Predicate, delegate, event</span></div></div>
      <div class="tree-item" onclick="showTopic('advanced',3)"><span class="tree-num">04</span><div class="tree-item-text"><span class="tree-title">Lambda & Closures</span><span class="tree-sub">=> espressioni, corpo, variabili catturate</span></div></div>
      <div class="tree-item" onclick="showTopic('advanced',4)"><span class="tree-num">05</span><div class="tree-item-text"><span class="tree-title">async / await</span><span class="tree-sub">Task, async, await, WhenAll, WhenAny</span></div></div>
      <div class="tree-item" onclick="showTopic('advanced',5)"><span class="tree-num">06</span><div class="tree-item-text"><span class="tree-title">DateTime & TimeSpan</span><span class="tree-sub">Now, Parse, Add, Format, differenza date</span></div></div>
      <div class="tree-item" onclick="showTopic('advanced',6)"><span class="tree-num">07</span><div class="tree-item-text"><span class="tree-title">StringBuilder</span><span class="tree-sub">Append, Insert, Replace, performance loop</span></div></div>
      <div class="tree-item" onclick="showTopic('advanced',7)"><span class="tree-num">08</span><div class="tree-item-text"><span class="tree-title">Random & Utilità</span><span class="tree-sub">Next, NextDouble, shuffle, elemento casuale</span></div></div>
      <div class="tree-item" onclick="showTopic('advanced',8)"><span class="tree-num">09</span><div class="tree-item-text"><span class="tree-title">Tuple & ValueTuple</span><span class="tree-sub">Ritorno multiplo, named tuples, decostruzione</span></div></div>
      <div class="tree-item" onclick="showTopic('advanced',9)"><span class="tree-num">10</span><div class="tree-item-text"><span class="tree-title">Pattern Matching</span><span class="tree-sub">switch expression avanzata, is, when, range</span></div></div>
      <div class="tree-item" onclick="showTopic('advanced',10)"><span class="tree-num">11</span><div class="tree-item-text"><span class="tree-title">Record</span><span class="tree-sub">Immutabilità, with expression, value equality</span></div></div>
      <div class="tree-item" onclick="showTopic('advanced',11)"><span class="tree-num">12</span><div class="tree-item-text"><span class="tree-title">HashSet, Queue & Stack</span><span class="tree-sub">Elementi unici, FIFO, LIFO</span></div></div>
      <div class="tree-item" onclick="showTopic('advanced',12)"><span class="tree-num">13</span><div class="tree-item-text"><span class="tree-title">Regular Expressions</span><span class="tree-sub">IsMatch, Match, Replace, Groups</span></div></div>
      <div class="tree-item" onclick="showTopic('advanced',13)"><span class="tree-num">14</span><div class="tree-item-text"><span class="tree-title">Preprocessore & Attributi</span><span class="tree-sub">#region, #if DEBUG, [Obsolete], [Serializable]</span></div></div>
      <div class="tree-item" onclick="showTopic('advanced',14)"><span class="tree-num">15</span><div class="tree-item-text"><span class="tree-title">IDisposable & using</span><span class="tree-sub">Gestione risorse, pattern Dispose, using sintattico</span></div></div>
      <div class="tree-item" onclick="showTopic('advanced',15)"><span class="tree-num">16</span><div class="tree-item-text"><span class="tree-title">IEnumerable & yield</span><span class="tree-sub">Iteratori pigri, yield return, yield break</span></div></div>
      <div class="tree-item" onclick="showTopic('advanced',16)"><span class="tree-num">17</span><div class="tree-item-text"><span class="tree-title">Extension Methods</span><span class="tree-sub">Metodi estensione, this keyword, static class</span></div></div>
      <div class="tree-item" onclick="showTopic('advanced',17)"><span class="tree-num">18</span><div class="tree-item-text"><span class="tree-title">Thread, Task & Parallel</span><span class="tree-sub">Task.Run, lock, CancellationToken, Interlocked</span></div></div>
      <div class="tree-item" onclick="showTopic('advanced',18)"><span class="tree-num">19</span><div class="tree-item-text"><span class="tree-title">Collezioni Avanzate</span><span class="tree-sub">SortedDictionary, ConcurrentDictionary, LinkedList</span></div></div>
      <div class="tree-item" onclick="showTopic('advanced',19)"><span class="tree-num">20</span><div class="tree-item-text"><span class="tree-title">Interfacce Fondamentali</span><span class="tree-sub">IComparable, IEquatable, IComparer</span></div></div>
      <div class="tree-item" onclick="showTopic('advanced',20)"><span class="tree-num">21</span><div class="tree-item-text"><span class="tree-title">Operator Overloading</span><span class="tree-sub">Sovraccaricare +, ==, !=, conversioni implicite</span></div></div>
      <div class="tree-item" onclick="showTopic('advanced',21)"><span class="tree-num">22</span><div class="tree-item-text"><span class="tree-title">Indexers & Proprietà Avanzate</span><span class="tree-sub">Indicizzatori, init-only, required, backing field</span></div></div>
      <div class="tree-item" onclick="showTopic('advanced',22)"><span class="tree-num">23</span><div class="tree-item-text"><span class="tree-title">Namespaces & using</span><span class="tree-sub">namespace, global using, file-scoped, alias</span></div></div>
    </div>
  </div>
</div>
  </aside>

  <!-- CONTENT -->
  <main class="content">
    <!-- SECTION FONDAMENTI (15) -->
    <div class="section active" id="section-fundamentals">
      <div class="section-title">I — Fondamenti <span class="tag">FOND</span></div>
      <!-- 1. Tipi di Dato -->
      <div class="topic-card">
        <div class="topic-header" onclick="toggle(this.closest('.topic-card'))"><div><h3>1. Tipi di Dato</h3><div class="topic-sub">int, long, double, decimal, string, char, bool, var, const, casting</div></div><span class="arrow">▼</span></div>
        <div class="topic-body">

          <h4>Numeri Interi — usa sempre int per iniziare</h4>
          <table>
            <tr><th>Tipo</th><th>Bit</th><th>Range</th><th>Uso</th></tr>
            <tr><td>byte</td><td>8</td><td>0 – 255</td><td>numeri piccoli positivi</td></tr>
            <tr><td>short</td><td>16</td><td>±32.767</td><td>numeri piccoli</td></tr>
            <tr><td>int</td><td>32</td><td>±2 miliardi</td><td>USO GENERALE ★</td></tr>
            <tr><td>long</td><td>64</td><td>±9 quintilioni</td><td>numeri enormi (aggiungi L)</td></tr>
          </table>
          <pre><span class="ty">int</span>  eta       = <span class="num">25</span>;
<span class="ty">int</span>  punti     = <span class="num">1500</span>;
<span class="ty">int</span>  abitanti  = <span class="num">60_000_000</span>;     <span class="cm">// _ migliora leggibilità</span>
<span class="ty">long</span> distanza  = <span class="num">384_400_000L</span>;  <span class="cm">// Luna in metri — aggiungi L!</span>

<span class="cm">// YouTube: int basta fino a 2 miliardi, long oltre:</span>
<span class="ty">int</span>  views       = <span class="num">2_000_000_000</span>;   <span class="cm">// OK per int</span>
<span class="ty">long</span> viewsVirali = <span class="num">10_000_000_000L</span>; <span class="cm">// serve long!</span>
<span class="cm">// int troppoGrande = 10_000_000_000; → ERRORE!</span></pre>

          <h4>Numeri Decimali — double per tutto, decimal solo per i soldi</h4>
          <table>
            <tr><th>Tipo</th><th>Bit</th><th>Precisione</th><th>Uso</th></tr>
            <tr><td>float</td><td>32</td><td>~7 cifre</td><td>raramente usato (aggiungi f)</td></tr>
            <tr><td>double</td><td>64</td><td>~15 cifre</td><td>USO GENERALE ★</td></tr>
            <tr><td>decimal</td><td>128</td><td>~28 cifre</td><td>SOLDI — sempre! (aggiungi m)</td></tr>
          </table>
          <pre><span class="ty">double</span>  altezza  = <span class="num">1.75</span>;
<span class="ty">double</span>  temp     = <span class="num">36.6</span>;
<span class="ty">float</span>   f        = <span class="num">1.75f</span>;    <span class="cm">// richiede 'f' — usa double invece</span>
<span class="ty">decimal</span> prezzo   = <span class="num">19.99m</span>;  <span class="cm">// richiede 'm'</span>
<span class="ty">decimal</span> stipendio = <span class="num">1_500.00m</span>;

<span class="cm">// Perché decimal per i soldi?</span>
<span class="ty">double</span>  sbagliato = <span class="num">0.1</span> + <span class="num">0.2</span>;   <span class="cm">// → 0.30000000000000004 !</span>
<span class="ty">decimal</span> giusto    = <span class="num">0.1m</span> + <span class="num">0.2m</span>; <span class="cm">// → 0.3  ✓</span></pre>
          <div class="warn">Su milioni di transazioni, l&apos;errore di double diventa un problema ENORME. Usa sempre decimal per i soldi!</div>

          <h4>Testo — string e char</h4>
          <pre><span class="ty">string</span> nome    = <span class="str">"Marco"</span>;      <span class="cm">// testo — doppi apici</span>
<span class="ty">string</span> email   = <span class="str">"m@email.com"</span>;
<span class="ty">string</span> vuoto   = <span class="str">""</span>;           <span class="cm">// stringa vuota — valido!</span>
<span class="ty">char</span>   iniziale = <span class="str">'M'</span>;         <span class="cm">// UN solo carattere — singoli apici</span>
<span class="ty">char</span>   simbolo  = <span class="str">'@'</span>;
<span class="ty">char</span>   cifra    = <span class="str">'5'</span>;         <span class="cm">// è un char, non un int!</span>

<span class="cm">// Errori comuni:</span>
<span class="cm">// char c = "A";       → ERRORE! doppi apici = string</span>
<span class="cm">// string s = 'Ciao';  → ERRORE! singoli apici = char</span></pre>

          <h4>Booleani — bool</h4>
          <pre><span class="ty">bool</span> maggiorenne     = <span class="kw">true</span>;
<span class="ty">bool</span> connesso        = <span class="kw">false</span>;
<span class="ty">bool</span> emailVerificata = <span class="kw">true</span>;   <span class="cm">// solo true o false — nient&apos;altro!</span>

<span class="kw">if</span> (maggiorenne)
    Console.<span class="fn">WriteLine</span>(<span class="str">"Puoi entrare"</span>);</pre>

          <h4>var — lascia decidere al compilatore</h4>
          <pre><span class="kw">var</span> numero = <span class="num">42</span>;        <span class="cm">// int</span>
<span class="kw">var</span> prezzo2 = <span class="num">19.99</span>;    <span class="cm">// double</span>
<span class="kw">var</span> nome2   = <span class="str">"Marco"</span>; <span class="cm">// string</span>
<span class="kw">var</span> attivo  = <span class="kw">true</span>;    <span class="cm">// bool</span>
<span class="cm">// var qualcosa; → ERRORE! deve avere un valore subito</span>

<span class="cm">// OK — tipo ovvio:</span>
<span class="kw">var</span> dict = <span class="kw">new</span> Dictionary&lt;<span class="ty">string</span>, List&lt;<span class="ty">int</span>&gt;&gt;();
<span class="cm">// NO — tipo non chiaro:</span>
<span class="cm">// var x = CalcolaQualcosa();</span></pre>

          <h4>const — valori che non cambiano mai</h4>
          <pre><span class="kw">const</span> <span class="ty">double</span> PI              = <span class="num">3.14159265359</span>;
<span class="kw">const</span> <span class="ty">int</span>    GIORNI_SETTIMANA = <span class="num">7</span>;
<span class="kw">const</span> <span class="ty">double</span> IVA              = <span class="num">0.22</span>;

<span class="kw">const</span> <span class="ty">int</span>    MAX_VITE = <span class="num">3</span>;
<span class="ty">int</span> viteRimaste = MAX_VITE;
viteRimaste--;               <span class="cm">// OK!</span>
<span class="cm">// MAX_VITE--; → ERRORE! const non modificabile</span></pre>
          <div class="tip">Usa const per centralizzare i valori: se cambi IVA dal 22% al 10%, lo modifichi in un solo posto.</div>

          <h4>Type Casting</h4>
          <pre><span class="cm">// Implicito (automatico, sicuro — da piccolo a grande):</span>
<span class="ty">int</span>    n = <span class="num">100</span>;
<span class="ty">double</span> d = n;    <span class="cm">// int → double, nessun rischio</span>

<span class="cm">// Esplicito (manuale — puoi perdere dati!):</span>
<span class="ty">double</span> prezzo3      = <span class="num">19.99</span>;
<span class="ty">int</span>    prezzoIntero = (<span class="ty">int</span>)prezzo3; <span class="cm">// → 19, NON 20! tronca</span>

<span class="cm">// Parse — lancia eccezione se fallisce:</span>
<span class="ty">int</span> n1 = <span class="ty">int</span>.<span class="fn">Parse</span>(<span class="str">"42"</span>);
<span class="cm">// int.Parse("abc") → CRASH! FormatException</span>

<span class="cm">// TryParse — sicuro, non lancia eccezione:</span>
<span class="kw">if</span> (<span class="ty">int</span>.<span class="fn">TryParse</span>(<span class="str">"123"</span>, <span class="kw">out int</span> risultato))
    Console.<span class="fn">WriteLine</span>(<span class="str">$"OK: {risultato}"</span>);
<span class="kw">else</span>
    Console.<span class="fn">WriteLine</span>(<span class="str">"Input non valido!"</span>);

<span class="cm">// Da numero a stringa:</span>
<span class="ty">string</span> testo = (<span class="num">1500</span>).<span class="fn">ToString</span>(); <span class="cm">// "1500"</span></pre>

          <h4>Progetto pratico — Scheda Personaggio RPG</h4>
          <pre><span class="kw">const</span> <span class="ty">int</span> MAX_LIVELLO = <span class="num">100</span>;
<span class="kw">const</span> <span class="ty">int</span> VITA_BASE   = <span class="num">100</span>;

<span class="ty">string</span>  nomePersonaggio = <span class="str">"Arthas"</span>;
<span class="ty">char</span>    classe          = <span class="str">'G'</span>;  <span class="cm">// G=Guerriero M=Mago A=Arciere</span>
<span class="ty">int</span>     livello         = <span class="num">15</span>;
<span class="ty">int</span>     vitaAttuale     = <span class="num">85</span>;
<span class="ty">int</span>     vitaMassima     = VITA_BASE + (livello * <span class="num">10</span>);
<span class="ty">double</span>  percVita        = (<span class="ty">double</span>)vitaAttuale / vitaMassima * <span class="num">100</span>;
<span class="ty">bool</span>    vivo            = vitaAttuale > <span class="num">0</span>;
<span class="ty">decimal</span> oro             = <span class="num">1_523.50m</span>;

Console.<span class="fn">WriteLine</span>(<span class="str">$"Nome: {nomePersonaggio}"</span>);
Console.<span class="fn">WriteLine</span>(<span class="str">$"Livello: {livello}/{MAX_LIVELLO}"</span>);
Console.<span class="fn">WriteLine</span>(<span class="str">$"Vita: {vitaAttuale}/{vitaMassima} ({percVita:F1}%)"</span>);
Console.<span class="fn">WriteLine</span>(<span class="str">$"Oro: {oro:F2} monete"</span>);</pre>

          <h4>Errori comuni</h4>
          <pre><span class="cm">// 1. Dimenticare 'm' per decimal:</span>
<span class="cm">// decimal p = 19.99;      → ERRORE!</span>
<span class="ty">decimal</span> p = <span class="num">19.99m</span>;        <span class="cm">// OK</span>

<span class="cm">// 2. Dimenticare 'L' per long grandi:</span>
<span class="cm">// long g = 10_000_000_000; → ERRORE!</span>
<span class="ty">long</span> g = <span class="num">10_000_000_000L</span>;  <span class="cm">// OK</span>

<span class="cm">// 3. char con doppi apici:</span>
<span class="cm">// char c = "A";  → ERRORE!</span>
<span class="ty">char</span> c = <span class="str">'A'</span>;               <span class="cm">// OK</span>

<span class="cm">// 4. Divisione intera quando vuoi decimali:</span>
<span class="ty">int</span> a = <span class="num">5</span>, b = <span class="num">2</span>;
<span class="ty">double</span> sbagliato = a / b;           <span class="cm">// → 2, non 2.5!</span>
<span class="ty">double</span> giusto2   = (<span class="ty">double</span>)a / b;  <span class="cm">// → 2.5 ✓</span>

<span class="cm">// 5. Confrontare double con ==:</span>
<span class="ty">double</span> x = <span class="num">0.1</span> + <span class="num">0.2</span>;
<span class="cm">// if (x == 0.3) → potrebbe essere false!</span>
<span class="kw">if</span> (Math.<span class="fn">Abs</span>(x - <span class="num">0.3</span>) &lt; <span class="num">0.0001</span>)   <span class="cm">// OK — tolleranza</span>
    Console.<span class="fn">WriteLine</span>(<span class="str">"Uguali"</span>);</pre>

          <h4>Tabella riassuntiva</h4>
          <table>
            <tr><th>Tipo</th><th>Quando usarlo</th></tr>
            <tr><td>int</td><td>Numeri interi normali (età, quantità, punteggi)</td></tr>
            <tr><td>long</td><td>Numeri interi oltre i 2 miliardi</td></tr>
            <tr><td>double</td><td>Numeri decimali (altezza, temperatura, percentuali)</td></tr>
            <tr><td>decimal</td><td>SOLDI — sempre!</td></tr>
            <tr><td>string</td><td>Testo, parole, frasi</td></tr>
            <tr><td>char</td><td>Un solo carattere</td></tr>
            <tr><td>bool</td><td>Vero/falso, flag, stati</td></tr>
            <tr><td>var</td><td>Quando il tipo è ovvio dal contesto</td></tr>
            <tr><td>const</td><td>Valori che non cambiano mai</td></tr>
          </table>

          <h4>Esercizi</h4>
          <pre><span class="cm">// FACILE:</span>
<span class="cm">// 1. Dichiara variabili per: nome, età, altezza, peso, sposato</span>
<span class="cm">// 2. Calcola area di un cerchio (usa const per PI)</span>
<span class="cm">// 3. Converti temperatura da Celsius a Fahrenheit</span>

<span class="cm">// MEDIO:</span>
<span class="cm">// 4. Scheda prodotto: nome, prezzo, quantità, disponibile</span>
<span class="cm">// 5. Calcola sconto: prezzo 100€, sconto 15%, prezzo finale?</span>
<span class="cm">// 6. Converti minuti totali in ore e minuti (135 min → 2h 15min)</span>

<span class="cm">// DIFFICILE:</span>
<span class="cm">// 7. Calcola interesse composto: capitale, tasso, anni</span>
<span class="cm">// 8. Converti bytes → KB / MB / GB</span>
<span class="cm">// 9. Valida input: chiedi un numero e riprova finché non è valido</span></pre>

          <h4>Soluzioni</h4>
          <pre><span class="cm">// --- 1. Variabili personali ---</span>
<span class="ty">string</span> nomeP  = <span class="str">"Mario Rossi"</span>;
<span class="ty">int</span>    etaP   = <span class="num">30</span>;
<span class="ty">double</span> altP   = <span class="num">1.75</span>;
<span class="ty">double</span> pesoP  = <span class="num">72.5</span>;
<span class="ty">bool</span>   sposato = <span class="kw">false</span>;

<span class="cm">// --- 2. Area cerchio ---</span>
<span class="kw">const</span> <span class="ty">double</span> PI_G = <span class="num">3.14159</span>;
<span class="ty">double</span> raggio = <span class="num">5</span>;
<span class="ty">double</span> area   = PI_G * raggio * raggio;  <span class="cm">// 78.54</span>

<span class="cm">// --- 3. Celsius → Fahrenheit ---</span>
<span class="ty">double</span> celsius    = <span class="num">30</span>;
<span class="ty">double</span> fahrenheit = celsius * <span class="num">9.0</span> / <span class="num">5.0</span> + <span class="num">32</span>; <span class="cm">// 86.0</span>

<span class="cm">// --- 4. Scheda prodotto ---</span>
<span class="ty">string</span>  nomeProd    = <span class="str">"iPhone 15 Pro"</span>;
<span class="ty">decimal</span> prezzoProd  = <span class="num">1_299.99m</span>;
<span class="ty">int</span>     qty         = <span class="num">50</span>;
<span class="ty">bool</span>    disponibile = qty > <span class="num">0</span>;

<span class="cm">// --- 5. Calcolo sconto ---</span>
<span class="ty">decimal</span> prezzoOrig  = <span class="num">100.00m</span>;
<span class="ty">decimal</span> sconto      = prezzoOrig * <span class="num">0.15m</span>;  <span class="cm">// 15.00</span>
<span class="ty">decimal</span> prezzoFinal = prezzoOrig - sconto;  <span class="cm">// 85.00</span>

<span class="cm">// --- 6. Conversione minuti ---</span>
<span class="ty">int</span> minTotali  = <span class="num">135</span>;
<span class="ty">int</span> ore        = minTotali / <span class="num">60</span>;  <span class="cm">// 2</span>
<span class="ty">int</span> minRimasti = minTotali % <span class="num">60</span>; <span class="cm">// 15</span>

<span class="cm">// --- 7. Interesse composto ---</span>
<span class="ty">decimal</span> capitale = <span class="num">1_000.00m</span>;
<span class="ty">double</span>  tasso    = <span class="num">0.05</span>;
<span class="ty">int</span>     anni     = <span class="num">10</span>;
<span class="ty">double</span>  montante = (<span class="ty">double</span>)capitale * Math.<span class="fn">Pow</span>(<span class="num">1</span> + tasso, anni);
<span class="ty">decimal</span> interessi = (<span class="ty">decimal</span>)montante - capitale; <span class="cm">// ~628.89</span>

<span class="cm">// --- 8. Conversione bytes ---</span>
<span class="ty">long</span>   bytes = <span class="num">1_572_864_000L</span>;
<span class="ty">string</span> unita; <span class="ty">double</span> valore;
<span class="kw">if</span>      (bytes >= <span class="num">1024L</span>*<span class="num">1024</span>*<span class="num">1024</span>) { valore = bytes/<span class="num">1073741824.0</span>; unita = <span class="str">"GB"</span>; }
<span class="kw">else if</span> (bytes >= <span class="num">1024L</span>*<span class="num">1024</span>)      { valore = bytes/<span class="num">1048576.0</span>;   unita = <span class="str">"MB"</span>; }
<span class="kw">else if</span> (bytes >= <span class="num">1024L</span>)            { valore = bytes/<span class="num">1024.0</span>;      unita = <span class="str">"KB"</span>; }
<span class="kw">else</span>                                  { valore = bytes;              unita = <span class="str">"bytes"</span>; }
Console.<span class="fn">WriteLine</span>(<span class="str">$"{bytes:N0} = {valore:F2} {unita}"</span>);

<span class="cm">// --- 9. Input validato ---</span>
<span class="ty">int</span>  numero; <span class="ty">bool</span> valido = <span class="kw">false</span>;
<span class="kw">while</span> (!valido) {
    Console.<span class="fn">Write</span>(<span class="str">"Inserisci un numero: "</span>);
    <span class="kw">if</span> (<span class="ty">int</span>.<span class="fn">TryParse</span>(Console.<span class="fn">ReadLine</span>(), <span class="kw">out</span> numero)) {
        valido = <span class="kw">true</span>;
        Console.<span class="fn">WriteLine</span>(<span class="str">$"Doppio: {numero*2}, Quadrato: {numero*numero}"</span>);
    } <span class="kw">else</span> Console.<span class="fn">WriteLine</span>(<span class="str">"Non valido, riprova..."</span>);
}</pre>

        </div>
      </div>
      <!-- 2. Input / Output -->
<div class="topic-card">
  <div class="topic-header" onclick="toggle(this.closest('.topic-card'))"><div><h3>2. Input / Output</h3><div class="topic-sub">Console.Write/WriteLine, ReadLine, interpolazione, formattazione, TryParse, colori</div></div><span class="arrow">▼</span></div>
  <div class="topic-body">

    <h4>Output — stampare a schermo</h4>
    <pre><span class="cm">// WriteLine = stampa E va a capo</span>
Console.<span class="fn">WriteLine</span>(<span class="str">"Prima riga"</span>);
Console.<span class="fn">WriteLine</span>(<span class="str">"Seconda riga"</span>);

<span class="cm">// Write = stampa SENZA andare a capo</span>
Console.<span class="fn">Write</span>(<span class="str">"Nome: "</span>); Console.<span class="fn">Write</span>(<span class="str">"Marco"</span>); <span class="cm">// Output: Nome: Marco</span>

<span class="cm">// Menu:</span>
Console.<span class="fn">WriteLine</span>(<span class="str">"+============================+"</span>);
Console.<span class="fn">WriteLine</span>(<span class="str">"|      MENU PRINCIPALE       |"</span>);
Console.<span class="fn">WriteLine</span>(<span class="str">"+============================+"</span>);
Console.<span class="fn">WriteLine</span>(<span class="str">"| 1. Nuovo gioco             |"</span>);
Console.<span class="fn">WriteLine</span>(<span class="str">"| 2. Carica partita          |"</span>);
Console.<span class="fn">WriteLine</span>(<span class="str">"+============================+"</span>);
Console.<span class="fn">Write</span>(<span class="str">"Scegli un&apos;opzione: "</span>);</pre>

    <h4>Interpolazione — combinare testo e variabili</h4>
    <pre><span class="ty">string</span> nome = <span class="str">"Marco"</span>; <span class="ty">int</span> eta = <span class="num">25</span>;

<span class="cm">// Metodo 1: interpolazione con $ — CONSIGLIATO</span>
Console.<span class="fn">WriteLine</span>(<span class="str">$"Mi chiamo {nome}, ho {eta} anni"</span>);
Console.<span class="fn">WriteLine</span>(<span class="str">$"Tra 5 anni avro&apos; {eta + 5} anni"</span>);

<span class="cm">// Metodo 2: concatenazione con +</span>
Console.<span class="fn">WriteLine</span>(<span class="str">"Mi chiamo "</span> + nome + <span class="str">" e ho "</span> + eta + <span class="str">" anni"</span>);

<span class="cm">// Metodo 3: placeholder {0},{1} — vecchio stile</span>
Console.<span class="fn">WriteLine</span>(<span class="str">"Mi chiamo {0} e ho {1} anni"</span>, nome, eta);

<span class="cm">// Metodo 4: String.Format</span>
<span class="ty">string</span> msg = String.<span class="fn">Format</span>(<span class="str">"Ciao {0}, hai {1} anni"</span>, nome, eta);

<span class="cm">// Calcoli dentro {}:</span>
<span class="ty">int</span> a = <span class="num">5</span>, b = <span class="num">3</span>;
Console.<span class="fn">WriteLine</span>(<span class="str">$"{a} + {b} = {a + b}"</span>);  <span class="cm">// 5 + 3 = 8</span>
Console.<span class="fn">WriteLine</span>(<span class="str">$"{a} x {b} = {a * b}"</span>);  <span class="cm">// 5 x 3 = 15</span></pre>

    <h4>Formattazione numeri</h4>
    <pre><span class="ty">double</span> prezzo = <span class="num">1234.5678</span>; <span class="ty">int</span> pop = <span class="num">1_000_000</span>; <span class="ty">double</span> perc = <span class="num">0.756</span>;

Console.<span class="fn">WriteLine</span>(<span class="str">$"{prezzo:F2}"</span>);   <span class="cm">// 1234.57   — 2 decimali fissi</span>
Console.<span class="fn">WriteLine</span>(<span class="str">$"{prezzo:F0}"</span>);   <span class="cm">// 1235      — nessun decimale</span>
Console.<span class="fn">WriteLine</span>(<span class="str">$"{prezzo:C}"</span>);    <span class="cm">// 1.234,57 EUR — valuta locale</span>
Console.<span class="fn">WriteLine</span>(<span class="str">$"{prezzo:C0}"</span>);   <span class="cm">// 1.235 EUR</span>
Console.<span class="fn">WriteLine</span>(<span class="str">$"{pop:N0}"</span>);      <span class="cm">// 1.000.000</span>
Console.<span class="fn">WriteLine</span>(<span class="str">$"{perc:P0}"</span>);     <span class="cm">// 76%</span>
Console.<span class="fn">WriteLine</span>(<span class="str">$"{perc:P2}"</span>);     <span class="cm">// 75,60%</span>
Console.<span class="fn">WriteLine</span>(<span class="str">$"{42:D5}"</span>);       <span class="cm">// 00042</span>
Console.<span class="fn">WriteLine</span>(<span class="str">$"{255:X4}"</span>);      <span class="cm">// 00FF</span></pre>
    <table>
      <tr><th>Formato</th><th>Descrizione</th><th>Esempio</th></tr>
      <tr><td>:F2 / :F0</td><td>Decimali fissi</td><td>1234.57 / 1235</td></tr>
      <tr><td>:C / :C0</td><td>Valuta</td><td>1.234,57 EUR</td></tr>
      <tr><td>:N0</td><td>Separatore migliaia</td><td>1.000.000</td></tr>
      <tr><td>:P0 / :P2</td><td>Percentuale</td><td>76% / 75,60%</td></tr>
      <tr><td>:D5</td><td>Padding con zeri</td><td>00042</td></tr>
      <tr><td>:X / :X4</td><td>Esadecimale</td><td>FF / 00FF</td></tr>
    </table>

    <h4>Allineamento e padding</h4>
    <pre><span class="cm">// ,N = destra   ,-N = sinistra</span>
Console.<span class="fn">WriteLine</span>(<span class="str">$"|{"Pizza",15}|"</span>);   <span class="cm">// |          Pizza|</span>
Console.<span class="fn">WriteLine</span>(<span class="str">$"|{"Pizza",-15}|"</span>);  <span class="cm">// |Pizza          |</span>

Console.<span class="fn">WriteLine</span>(<span class="str">$"{"Prodotto",-20} {"Qta",6} {"Prezzo",10}"</span>);
Console.<span class="fn">WriteLine</span>(<span class="kw">new</span> <span class="ty">string</span>(<span class="str">'-'</span>, <span class="num">38</span>));
Console.<span class="fn">WriteLine</span>(<span class="str">$"{"Laptop",-20} {5,6} {999.99,10:C}"</span>);
Console.<span class="fn">WriteLine</span>(<span class="str">$"{"Mouse",-20} {50,6} {29.99,10:C}"</span>);</pre>

    <h4>Caratteri speciali (escape sequences)</h4>
    <pre><span class="cm">// \n nuova riga   \t tab   \\ backslash   \" virgolette</span>
Console.<span class="fn">WriteLine</span>(<span class="str">"Nome:\tMarco\nEta:\t25"</span>);
Console.<span class="fn">WriteLine</span>(<span class="str">"Path: C:\\Users\\Marco"</span>);

<span class="cm">// @ verbatim — ignora escape:</span>
Console.<span class="fn">WriteLine</span>(<span class="str">@"Path: C:\Users\Marco"</span>);
<span class="ty">string</span> multi = <span class="str">@"Riga uno
Riga due
Riga tre"</span>;</pre>
    <table>
      <tr><th>Escape</th><th>Significato</th></tr>
      <tr><td>\n</td><td>Nuova riga</td></tr>
      <tr><td>\t</td><td>Tab</td></tr>
      <tr><td>\\</td><td>Backslash</td></tr>
      <tr><td>\"</td><td>Virgolette</td></tr>
      <tr><td>\r</td><td>Ritorno carrello</td></tr>
    </table>

    <h4>Input — leggere dalla tastiera</h4>
    <pre><span class="cm">// ReadLine() restituisce SEMPRE una stringa!</span>
Console.<span class="fn">Write</span>(<span class="str">"Come ti chiami? "</span>);
<span class="ty">string</span> nomeInput = Console.<span class="fn">ReadLine</span>();

<span class="ty">int</span>     etaInput    = <span class="ty">int</span>.<span class="fn">Parse</span>(Console.<span class="fn">ReadLine</span>());
<span class="ty">double</span>  altInput    = <span class="ty">double</span>.<span class="fn">Parse</span>(Console.<span class="fn">ReadLine</span>());
<span class="ty">decimal</span> prezzoInput = <span class="ty">decimal</span>.<span class="fn">Parse</span>(Console.<span class="fn">ReadLine</span>());</pre>
    <div class="warn">int.Parse() CRASHA se l&apos;utente scrive &quot;abc&quot;! Usa sempre TryParse per input utente.</div>

    <h4>TryParse — input sicuro</h4>
    <pre><span class="kw">if</span> (<span class="ty">int</span>.<span class="fn">TryParse</span>(Console.<span class="fn">ReadLine</span>(), <span class="kw">out int</span> n))
    Console.<span class="fn">WriteLine</span>(<span class="str">$"Inserito: {n}, doppio: {n * 2}"</span>);
<span class="kw">else</span>
    Console.<span class="fn">WriteLine</span>(<span class="str">"Input non valido!"</span>);

<span class="ty">double</span>.<span class="fn">TryParse</span>(input, <span class="kw">out double</span> d);
<span class="ty">decimal</span>.<span class="fn">TryParse</span>(input, <span class="kw">out decimal</span> m);
<span class="ty">bool</span>.<span class="fn">TryParse</span>(input, <span class="kw">out bool</span> b);</pre>

    <h4>Input ripetuto — chiedi finché non è valido</h4>
    <pre><span class="ty">int</span> nv;
<span class="kw">while</span> (<span class="kw">true</span>) {
    Console.<span class="fn">Write</span>(<span class="str">"Numero: "</span>);
    <span class="kw">if</span> (<span class="ty">int</span>.<span class="fn">TryParse</span>(Console.<span class="fn">ReadLine</span>(), <span class="kw">out</span> nv)) <span class="kw">break</span>;
    Console.<span class="fn">WriteLine</span>(<span class="str">"Non valido. Riprova!"</span>);
}

<span class="cm">// Con range:</span>
<span class="ty">int</span> votoV;
<span class="kw">while</span> (<span class="kw">true</span>) {
    Console.<span class="fn">Write</span>(<span class="str">"Voto (0-100): "</span>);
    <span class="kw">if</span> (<span class="ty">int</span>.<span class="fn">TryParse</span>(Console.<span class="fn">ReadLine</span>(), <span class="kw">out</span> votoV) &amp;&amp; votoV >= <span class="num">0</span> &amp;&amp; votoV &lt;= <span class="num">100</span>) <span class="kw">break</span>;
    Console.<span class="fn">WriteLine</span>(<span class="str">"Deve essere tra 0 e 100!"</span>);
}

<span class="cm">// Con default:</span>
Console.<span class="fn">Write</span>(<span class="str">"Nome [default: Ospite]: "</span>);
<span class="ty">string</span> nomeD = Console.<span class="fn">ReadLine</span>();
<span class="kw">if</span> (<span class="ty">string</span>.<span class="fn">IsNullOrWhiteSpace</span>(nomeD)) nomeD = <span class="str">"Ospite"</span>;</pre>

    <h4>Leggere tasti singoli</h4>
    <pre>ConsoleKeyInfo tasto = Console.<span class="fn">ReadKey</span>();
Console.<span class="fn">WriteLine</span>(<span class="str">$"\nHai premuto: {tasto.KeyChar}"</span>);

ConsoleKeyInfo scelta = Console.<span class="fn">ReadKey</span>(<span class="kw">true</span>); <span class="cm">// true = non mostrare</span>
<span class="kw">if</span>      (scelta.Key == ConsoleKey.S) Console.<span class="fn">WriteLine</span>(<span class="str">"Si!"</span>);
<span class="kw">else if</span> (scelta.Key == ConsoleKey.N) Console.<span class="fn">WriteLine</span>(<span class="str">"No!"</span>);

<span class="kw">while</span> (Console.<span class="fn">ReadKey</span>(<span class="kw">true</span>).Key != ConsoleKey.Enter) { } <span class="cm">// aspetta INVIO</span></pre>

    <h4>Colori nella console</h4>
    <pre>Console.ForegroundColor = ConsoleColor.Green;  Console.<span class="fn">WriteLine</span>(<span class="str">"Verde!"</span>);
Console.ForegroundColor = ConsoleColor.Red;    Console.<span class="fn">WriteLine</span>(<span class="str">"Rosso!"</span>);
Console.BackgroundColor = ConsoleColor.Blue;
Console.ForegroundColor = ConsoleColor.White;  Console.<span class="fn">WriteLine</span>(<span class="str">"Bianco su blu!"</span>);
Console.<span class="fn">ResetColor</span>();

<span class="kw">void</span> <span class="fn">Errore</span>(<span class="ty">string</span> m) { Console.ForegroundColor=ConsoleColor.Red;   Console.<span class="fn">WriteLine</span>(<span class="str">$"[ERRORE] {m}"</span>); Console.<span class="fn">ResetColor</span>(); }
<span class="kw">void</span> <span class="fn">Ok</span>(<span class="ty">string</span> m)     { Console.ForegroundColor=ConsoleColor.Green; Console.<span class="fn">WriteLine</span>(<span class="str">$"[OK] {m}"</span>);     Console.<span class="fn">ResetColor</span>(); }</pre>

    <h4>Altre funzioni utili</h4>
    <pre>Console.<span class="fn">Clear</span>();
Console.<span class="fn">Beep</span>(<span class="num">1000</span>, <span class="num">500</span>);
Console.<span class="fn">SetCursorPosition</span>(<span class="num">10</span>, <span class="num">5</span>);
Console.Title = <span class="str">"Il Mio Programma C#"</span>;
<span class="ty">int</span> w = Console.WindowWidth; <span class="ty">int</span> h = Console.WindowHeight;</pre>

    <h4>Progetto completo — Calcolatore IMC</h4>
    <pre>Console.<span class="fn">Write</span>(<span class="str">"Come ti chiami? "</span>); <span class="ty">string</span> nomeIMC = Console.<span class="fn">ReadLine</span>();

<span class="ty">double</span> altIMC;
<span class="kw">while</span> (<span class="kw">true</span>) {
    Console.<span class="fn">Write</span>(<span class="str">"Altezza (es. 1.75): "</span>);
    <span class="kw">if</span> (<span class="ty">double</span>.<span class="fn">TryParse</span>(Console.<span class="fn">ReadLine</span>(), <span class="kw">out</span> altIMC) &amp;&amp; altIMC &gt; <span class="num">0.5</span> &amp;&amp; altIMC &lt; <span class="num">2.5</span>) <span class="kw">break</span>;
    Console.<span class="fn">WriteLine</span>(<span class="str">"Non valida (0.5–2.5 m)"</span>);
}
<span class="ty">double</span> pesoIMC;
<span class="kw">while</span> (<span class="kw">true</span>) {
    Console.<span class="fn">Write</span>(<span class="str">"Peso in kg: "</span>);
    <span class="kw">if</span> (<span class="ty">double</span>.<span class="fn">TryParse</span>(Console.<span class="fn">ReadLine</span>(), <span class="kw">out</span> pesoIMC) &amp;&amp; pesoIMC &gt; <span class="num">20</span> &amp;&amp; pesoIMC &lt; <span class="num">300</span>) <span class="kw">break</span>;
    Console.<span class="fn">WriteLine</span>(<span class="str">"Non valido (20–300 kg)"</span>);
}
<span class="ty">double</span> imc = pesoIMC / (altIMC * altIMC);
<span class="ty">string</span> cat = imc &lt; <span class="num">18.5</span> ? <span class="str">"Sottopeso"</span> : imc &lt; <span class="num">25</span> ? <span class="str">"Normopeso"</span> : imc &lt; <span class="num">30</span> ? <span class="str">"Sovrappeso"</span> : <span class="str">"Obesita&apos;"</span>;
Console.<span class="fn">WriteLine</span>(<span class="str">$"IMC: {imc:F1} — {cat}"</span>);</pre>

    <h4>Errori comuni</h4>
    <pre><span class="cm">// 1. Non convertire l&apos;input:</span>
<span class="ty">int</span> r = <span class="ty">int</span>.<span class="fn">Parse</span>(Console.<span class="fn">ReadLine</span>()) * <span class="num">2</span>; <span class="cm">// OK — non usare ReadLine() * 2 direttamente!</span>

<span class="cm">// 2. Dimenticare $:</span>
Console.<span class="fn">WriteLine</span>(<span class="str">"Valore: {x}"</span>);   <span class="cm">// stampa {x} letteralmente!</span>
Console.<span class="fn">WriteLine</span>(<span class="str">$"Valore: {x}"</span>);  <span class="cm">// OK</span>

<span class="cm">// 3. Virgola vs punto (dipende dal sistema):</span>
<span class="cm">// Italia: "1,75"   USA/UK: "1.75"</span>

<span class="cm">// 4. Input vuoto:</span>
<span class="kw">if</span> (<span class="ty">string</span>.<span class="fn">IsNullOrWhiteSpace</span>(Console.<span class="fn">ReadLine</span>()))
    Console.<span class="fn">WriteLine</span>(<span class="str">"Non hai inserito nulla!"</span>);</pre>

    <h4>Esercizi</h4>
    <pre><span class="cm">// FACILE:</span>
<span class="cm">// 1. Chiedi nome e cognome, stampa "Ciao, [Nome] [Cognome]!"</span>
<span class="cm">// 2. Chiedi due numeri e stampa la somma</span>
<span class="cm">// 3. Chiedi anno di nascita, calcola e stampa l&apos;eta&apos;</span>
<span class="cm">// MEDIO:</span>
<span class="cm">// 4. Calcolatrice: chiedi 2 numeri e un operatore (+,-,*,/)</span>
<span class="cm">// 5. Converti temperatura: Celsius → Fahrenheit e Kelvin</span>
<span class="cm">// 6. Chiedi 3 voti, calcola e mostra la media formattata</span>
<span class="cm">// DIFFICILE:</span>
<span class="cm">// 7. Quiz: 5 domande, conta corrette, mostra percentuale</span>
<span class="cm">// 8. Scontrino con 4+ prodotti formattato con colonne</span>
<span class="cm">// 9. Rubrica: nome+telefono in array, mostra tutti</span></pre>

    <h4>Soluzioni</h4>
    <pre><span class="cm">// --- 1. ---</span>
Console.<span class="fn">Write</span>(<span class="str">"Nome: "</span>);    <span class="ty">string</span> n1s = Console.<span class="fn">ReadLine</span>();
Console.<span class="fn">Write</span>(<span class="str">"Cognome: "</span>); <span class="ty">string</span> c1s = Console.<span class="fn">ReadLine</span>();
Console.<span class="fn">WriteLine</span>(<span class="str">$"Ciao, {n1s} {c1s}!"</span>);

<span class="cm">// --- 2. ---</span>
Console.<span class="fn">Write</span>(<span class="str">"Primo: "</span>);  <span class="ty">int</span> s1 = <span class="ty">int</span>.<span class="fn">Parse</span>(Console.<span class="fn">ReadLine</span>());
Console.<span class="fn">Write</span>(<span class="str">"Secondo: "</span>); <span class="ty">int</span> s2 = <span class="ty">int</span>.<span class="fn">Parse</span>(Console.<span class="fn">ReadLine</span>());
Console.<span class="fn">WriteLine</span>(<span class="str">$"{s1} + {s2} = {s1 + s2}"</span>);

<span class="cm">// --- 3. ---</span>
Console.<span class="fn">Write</span>(<span class="str">"Anno di nascita: "</span>);
Console.<span class="fn">WriteLine</span>(<span class="str">$"Hai {DateTime.Now.Year - int.Parse(Console.ReadLine())} anni"</span>);

<span class="cm">// --- 4. ---</span>
Console.<span class="fn">Write</span>(<span class="str">"Num1: "</span>); <span class="ty">double</span>.<span class="fn">TryParse</span>(Console.<span class="fn">ReadLine</span>(), <span class="kw">out double</span> op1);
Console.<span class="fn">Write</span>(<span class="str">"Op: "</span>);   <span class="ty">string</span> op = Console.<span class="fn">ReadLine</span>();
Console.<span class="fn">Write</span>(<span class="str">"Num2: "</span>); <span class="ty">double</span>.<span class="fn">TryParse</span>(Console.<span class="fn">ReadLine</span>(), <span class="kw">out double</span> op2);
<span class="ty">double</span> res = op <span class="kw">switch</span> {
    <span class="str">"+"</span> =&gt; op1+op2, <span class="str">"-"</span> =&gt; op1-op2,
    <span class="str">"*"</span> =&gt; op1*op2, <span class="str">"/"</span> =&gt; op2!=<span class="num">0</span>?op1/op2:<span class="ty">double</span>.NaN, _ =&gt; <span class="ty">double</span>.NaN
};
Console.<span class="fn">WriteLine</span>(<span class="str">$"{op1} {op} {op2} = {res}"</span>);

<span class="cm">// --- 5. ---</span>
Console.<span class="fn">Write</span>(<span class="str">"Celsius: "</span>); <span class="ty">double</span>.<span class="fn">TryParse</span>(Console.<span class="fn">ReadLine</span>(), <span class="kw">out double</span> cel);
Console.<span class="fn">WriteLine</span>(<span class="str">$"{cel}C = {cel*9.0/5.0+32:F2}F = {cel+273.15:F2}K"</span>);

<span class="cm">// --- 6. ---</span>
Console.<span class="fn">Write</span>(<span class="str">"Voto 1: "</span>); <span class="ty">int</span> v1=<span class="ty">int</span>.<span class="fn">Parse</span>(Console.<span class="fn">ReadLine</span>());
Console.<span class="fn">Write</span>(<span class="str">"Voto 2: "</span>); <span class="ty">int</span> v2=<span class="ty">int</span>.<span class="fn">Parse</span>(Console.<span class="fn">ReadLine</span>());
Console.<span class="fn">Write</span>(<span class="str">"Voto 3: "</span>); <span class="ty">int</span> v3=<span class="ty">int</span>.<span class="fn">Parse</span>(Console.<span class="fn">ReadLine</span>());
<span class="ty">double</span> med=(v1+v2+v3)/3.0;
<span class="ty">string</span> giu=med&gt;=9?<span class="str">"Eccellente"</span>:med&gt;=7?<span class="str">"Buono"</span>:med&gt;=6?<span class="str">"Sufficiente"</span>:<span class="str">"Insufficiente"</span>;
Console.<span class="fn">WriteLine</span>(<span class="str">$"Media: {med:F2} — {giu} — {(med &gt;= 6 ? &quot;PROMOSSO&quot; : &quot;BOCCIATO&quot;)}"</span>);

<span class="cm">// --- 7. ---</span>
<span class="ty">int</span> pt=<span class="num">0</span>;
Console.<span class="fn">Write</span>(<span class="str">"Capitale d&apos;Italia? "</span>);
<span class="kw">if</span>(Console.<span class="fn">ReadLine</span>().<span class="fn">Trim</span>().<span class="fn">ToLower</span>()==<span class="str">"roma"</span>){Console.<span class="fn">WriteLine</span>(<span class="str">"[OK]"</span>);pt++;}else Console.<span class="fn">WriteLine</span>(<span class="str">"[NO] Roma"</span>);
Console.<span class="fn">Write</span>(<span class="str">"7 x 8? "</span>);
<span class="kw">if</span>(<span class="ty">int</span>.<span class="fn">TryParse</span>(Console.<span class="fn">ReadLine</span>(),<span class="kw">out int</span> r2)&amp;&amp;r2==<span class="num">56</span>){Console.<span class="fn">WriteLine</span>(<span class="str">"[OK]"</span>);pt++;}else Console.<span class="fn">WriteLine</span>(<span class="str">"[NO] 56"</span>);
Console.<span class="fn">Write</span>(<span class="str">"Anno caduta muro Berlino? "</span>);
<span class="kw">if</span>(<span class="ty">int</span>.<span class="fn">TryParse</span>(Console.<span class="fn">ReadLine</span>(),<span class="kw">out int</span> r3)&amp;&amp;r3==<span class="num">1989</span>){Console.<span class="fn">WriteLine</span>(<span class="str">"[OK]"</span>);pt++;}else Console.<span class="fn">WriteLine</span>(<span class="str">"[NO] 1989"</span>);
Console.<span class="fn">Write</span>(<span class="str">"Pianeti sistema solare? "</span>);
<span class="kw">if</span>(<span class="ty">int</span>.<span class="fn">TryParse</span>(Console.<span class="fn">ReadLine</span>(),<span class="kw">out int</span> r4)&amp;&amp;r4==<span class="num">8</span>){Console.<span class="fn">WriteLine</span>(<span class="str">"[OK]"</span>);pt++;}else Console.<span class="fn">WriteLine</span>(<span class="str">"[NO] 8"</span>);
Console.<span class="fn">Write</span>(<span class="str">"Autore Divina Commedia? "</span>);
<span class="ty">string</span> r5=Console.<span class="fn">ReadLine</span>().<span class="fn">Trim</span>().<span class="fn">ToLower</span>();
<span class="kw">if</span>(r5==<span class="str">"dante"</span>||r5==<span class="str">"dante alighieri"</span>){Console.<span class="fn">WriteLine</span>(<span class="str">"[OK]"</span>);pt++;}else Console.<span class="fn">WriteLine</span>(<span class="str">"[NO] Dante Alighieri"</span>);
Console.<span class="fn">WriteLine</span>(<span class="str">$"Risultato: {pt}/5 ({(double)pt/5*100:F0}%)"</span>);

<span class="cm">// --- 8. ---</span>
<span class="ty">string</span>[]  prod={<span class="str">"Pane"</span>,<span class="str">"Latte"</span>,<span class="str">"Pasta"</span>,<span class="str">"Pomodori"</span>,<span class="str">"Olio"</span>};
<span class="ty">decimal</span>[] prz={<span class="num">2.50m</span>,<span class="num">1.80m</span>,<span class="num">1.35m</span>,<span class="num">3.20m</span>,<span class="num">8.90m</span>};
<span class="ty">int</span>[]     qta={<span class="num">1</span>,<span class="num">2</span>,<span class="num">3</span>,<span class="num">1</span>,<span class="num">1</span>};
<span class="ty">decimal</span> sub=<span class="num">0</span>;
Console.<span class="fn">WriteLine</span>(<span class="str">$"{"Prodotto",-15} {"Qta",4} {"Prezzo",10}"</span>);
Console.<span class="fn">WriteLine</span>(<span class="kw">new</span> <span class="ty">string</span>(<span class="str">'-'</span>,31));
<span class="kw">for</span>(<span class="ty">int</span> i=<span class="num">0</span>;i&lt;prod.Length;i++){<span class="ty">decimal</span> t=prz[i]*qta[i];sub+=t;Console.<span class="fn">WriteLine</span>(<span class="str">$"{prod[i],-15}{qta[i],4}{t,10:C}"</span>);}
Console.<span class="fn">WriteLine</span>(<span class="str">$"{"Subtotale:",-20}{sub,10:C}\n{"IVA 22%:",-20}{sub*0.22m,10:C}\n{"TOTALE:",-20}{sub*1.22m,10:C}"</span>);

<span class="cm">// --- 9. ---</span>
<span class="kw">const</span> <span class="ty">int</span> MAX=<span class="num">5</span>; <span class="ty">string</span>[] nR=<span class="kw">new</span> <span class="ty">string</span>[MAX]; <span class="ty">string</span>[] tR=<span class="kw">new</span> <span class="ty">string</span>[MAX]; <span class="ty">int</span> cnt=<span class="num">0</span>;
<span class="kw">while</span>(cnt&lt;MAX){
    Console.<span class="fn">Write</span>(<span class="str">$"Nome {cnt+1} (o &apos;fine&apos;): "</span>); <span class="ty">string</span> nn=Console.<span class="fn">ReadLine</span>();
    <span class="kw">if</span>(nn.<span class="fn">ToLower</span>()==<span class="str">"fine"</span>)<span class="kw">break</span>;
    <span class="kw">if</span>(<span class="ty">string</span>.<span class="fn">IsNullOrWhiteSpace</span>(nn)){Console.<span class="fn">WriteLine</span>(<span class="str">"Non valido!"</span>);<span class="kw">continue</span>;}
    Console.<span class="fn">Write</span>(<span class="str">"Tel: "</span>); <span class="ty">string</span> tt=Console.<span class="fn">ReadLine</span>();
    <span class="kw">if</span>(<span class="ty">string</span>.<span class="fn">IsNullOrWhiteSpace</span>(tt)){Console.<span class="fn">WriteLine</span>(<span class="str">"Non valido!"</span>);<span class="kw">continue</span>;}
    nR[cnt]=nn; tR[cnt]=tt; cnt++;
}
<span class="kw">for</span>(<span class="ty">int</span> i=<span class="num">0</span>;i&lt;cnt;i++) Console.<span class="fn">WriteLine</span>(<span class="str">$"{i+1,-3} {nR[i],-20} {tR[i],-15}"</span>);</pre>

  </div>
</div>
      <!-- 3. Aritmetica & Math -->
<div class="topic-card">
  <div class="topic-header" onclick="toggle(this.closest('.topic-card'))"><div><h3>3. Aritmetica &amp; Math</h3><div class="topic-sub">+−×÷%, modulo, operatori composti, incremento, libreria Math, progetti</div></div><span class="arrow">▼</span></div>
  <div class="topic-body">

    <h4>Operazioni base</h4>
    <pre><span class="ty">int</span> a = <span class="num">10</span>, b = <span class="num">3</span>;
<span class="ty">int</span> somma    = a + b;  <span class="cm">// 13</span>
<span class="ty">int</span> diff     = a - b;  <span class="cm">// 7</span>
<span class="ty">int</span> prodotto = a * b;  <span class="cm">// 30</span>
<span class="ty">int</span> quoz     = a / b;  <span class="cm">// 3  ← int/int = int! decimali PERSI</span>
<span class="ty">int</span> resto    = a % b;  <span class="cm">// 1  (modulo)</span>

<span class="cm">// Per ottenere decimali:</span>
<span class="ty">double</span> d1 = (<span class="ty">double</span>)a / b;  <span class="cm">// 3.333…  cast esplicito</span>
<span class="ty">double</span> d2 = <span class="num">10.0</span> / <span class="num">3</span>;       <span class="cm">// 3.333…  letterale decimale</span>

<span class="cm">// Media corretta:</span>
<span class="ty">int</span> v1=<span class="num">7</span>, v2=<span class="num">8</span>, v3=<span class="num">6</span>;
<span class="ty">double</span> media = (v1+v2+v3) / <span class="num">3.0</span>;  <span class="cm">// OK: 7.0</span>
<span class="cm">// double media = (v1+v2+v3) / 3;  ← SBAGLIATO: 7 (troncato!)</span></pre>
    <div class="warn">int / int = int. I decimali vengono troncati silenziosamente!</div>

    <h4>Modulo (%) — usi pratici</h4>
    <pre><span class="cm">// Pari o dispari:</span>
<span class="kw">if</span> (n % <span class="num">2</span> == <span class="num">0</span>) Console.<span class="fn">WriteLine</span>(<span class="str">"Pari"</span>); <span class="kw">else</span> Console.<span class="fn">WriteLine</span>(<span class="str">"Dispari"</span>);

<span class="cm">// Divisibile per N:</span>
<span class="kw">if</span> (n % <span class="num">3</span> == <span class="num">0</span>) Console.<span class="fn">WriteLine</span>(<span class="str">"Divisibile per 3"</span>);

<span class="cm">// Ultima cifra:</span>
<span class="ty">int</span> ultimaCifra = <span class="num">12345</span> % <span class="num">10</span>;  <span class="cm">// 5</span>

<span class="cm">// Secondi → minuti e secondi:</span>
<span class="ty">int</span> tot = <span class="num">185</span>;
<span class="ty">int</span> min = tot / <span class="num">60</span>;   <span class="cm">// 3</span>
<span class="ty">int</span> sec = tot % <span class="num">60</span>;   <span class="cm">// 5  → "3:05"</span>

<span class="cm">// Secondi → h, m, s:</span>
<span class="ty">int</span> s = <span class="num">3725</span>;
<span class="ty">int</span> ore = s / <span class="num">3600</span>;
<span class="ty">int</span> m2  = (s % <span class="num">3600</span>) / <span class="num">60</span>;
<span class="ty">int</span> s2  = s % <span class="num">60</span>;
Console.<span class="fn">WriteLine</span>(<span class="str">$"{ore}h {m2}m {s2}s"</span>);  <span class="cm">// 1h 2m 5s</span>

<span class="cm">// Wrap-around (cicla da 0 a N-1):</span>
<span class="kw">for</span> (<span class="ty">int</span> i = <span class="num">0</span>; i &lt; <span class="num">10</span>; i++) Console.<span class="fn">Write</span>(<span class="str">$"{i % 4} "</span>);
<span class="cm">// 0 1 2 3 0 1 2 3 0 1</span></pre>

    <h4>Operatori composti e incremento</h4>
    <pre>n += <span class="num">5</span>;  n -= <span class="num">3</span>;  n *= <span class="num">2</span>;  n /= <span class="num">4</span>;  n %= <span class="num">3</span>;

<span class="cm">// ++ e -- (pre vs post):</span>
<span class="ty">int</span> i = <span class="num">5</span>;
Console.<span class="fn">WriteLine</span>(i++);  <span class="cm">// stampa 5, poi i diventa 6</span>
Console.<span class="fn">WriteLine</span>(++i);  <span class="cm">// i diventa 7, poi stampa 7</span>

<span class="cm">// Nelle assegnazioni importa:</span>
<span class="ty">int</span> a2 = <span class="num">5</span>, b2 = a2++;  <span class="cm">// b2=5, a2=6  (post)</span>
<span class="ty">int</span> a3 = <span class="num">5</span>, b3 = ++a3;  <span class="cm">// b3=6, a3=6  (pre)</span></pre>

    <h4>Ordine delle operazioni</h4>
    <pre><span class="ty">int</span> r1 = <span class="num">2</span> + <span class="num">3</span> * <span class="num">4</span>;     <span class="cm">// 14 — * prima di +</span>
<span class="ty">int</span> r2 = (<span class="num">2</span> + <span class="num">3</span>) * <span class="num">4</span>;   <span class="cm">// 20 — parentesi prima</span>
<span class="cm">// Regola: nel dubbio, usa le parentesi!</span></pre>

    <h4>Libreria Math</h4>
    <pre>Math.<span class="fn">Abs</span>(-<span class="num">5</span>)           <span class="cm">// 5   — valore assoluto</span>
Math.<span class="fn">Pow</span>(<span class="num">2</span>, <span class="num">10</span>)        <span class="cm">// 1024 — potenza</span>
Math.<span class="fn">Sqrt</span>(<span class="num">144</span>)         <span class="cm">// 12  — radice quadrata</span>
Math.<span class="fn">Round</span>(<span class="num">3.567</span>, <span class="num">2</span>)  <span class="cm">// 3.57</span>
Math.<span class="fn">Floor</span>(<span class="num">3.9</span>)       <span class="cm">// 3.0 — arrotonda per difetto</span>
Math.<span class="fn">Ceiling</span>(<span class="num">3.1</span>)    <span class="cm">// 4.0 — arrotonda per eccesso</span>
Math.<span class="fn">Truncate</span>(<span class="num">3.9</span>)   <span class="cm">// 3.0 — taglia i decimali</span>
Math.<span class="fn">Max</span>(<span class="num">10</span>, <span class="num">20</span>)      <span class="cm">// 20</span>
Math.<span class="fn">Min</span>(<span class="num">10</span>, <span class="num">20</span>)      <span class="cm">// 10</span>
Math.<span class="fn">Log10</span>(<span class="num">1000</span>)      <span class="cm">// 3</span>
Math.<span class="fn">Sin</span>(Math.PI/<span class="num">2</span>)  <span class="cm">// 1.0</span>
Math.<span class="fn">Sign</span>(-<span class="num">42</span>)        <span class="cm">// -1  (segno: -1, 0, 1)</span>
Math.PI                 <span class="cm">// 3.14159…</span>
Math.E                  <span class="cm">// 2.71828…</span>

<span class="cm">// Max/Min tra 3+ valori:</span>
<span class="ty">int</span> max = Math.<span class="fn">Max</span>(Math.<span class="fn">Max</span>(<span class="num">5</span>, <span class="num">12</span>), Math.<span class="fn">Max</span>(<span class="num">7</span>, <span class="num">3</span>));  <span class="cm">// 12</span>

<span class="cm">// Gradi ↔ radianti:</span>
<span class="ty">double</span> rad = <span class="num">90</span> * (Math.PI / <span class="num">180</span>);  <span class="cm">// 90° in radianti</span></pre>

    <h4>Progetto — Calcolatore cerchio</h4>
    <pre>Console.<span class="fn">Write</span>(<span class="str">"Raggio: "</span>);
<span class="ty">double</span> r = <span class="ty">double</span>.<span class="fn">Parse</span>(Console.<span class="fn">ReadLine</span>());

Console.<span class="fn">WriteLine</span>(<span class="str">$"Diametro:      {2 * r:F2}"</span>);
Console.<span class="fn">WriteLine</span>(<span class="str">$"Circonferenza: {2 * Math.PI * r:F2}"</span>);
Console.<span class="fn">WriteLine</span>(<span class="str">$"Area:          {Math.PI * Math.Pow(r, 2):F2}"</span>);</pre>

    <h4>Progetto — Distanza tra due punti</h4>
    <pre>Console.<span class="fn">Write</span>(<span class="str">"X1: "</span>); <span class="ty">double</span>.<span class="fn">TryParse</span>(Console.<span class="fn">ReadLine</span>(), <span class="kw">out double</span> x1);
Console.<span class="fn">Write</span>(<span class="str">"Y1: "</span>); <span class="ty">double</span>.<span class="fn">TryParse</span>(Console.<span class="fn">ReadLine</span>(), <span class="kw">out double</span> y1);
Console.<span class="fn">Write</span>(<span class="str">"X2: "</span>); <span class="ty">double</span>.<span class="fn">TryParse</span>(Console.<span class="fn">ReadLine</span>(), <span class="kw">out double</span> x2);
Console.<span class="fn">Write</span>(<span class="str">"Y2: "</span>); <span class="ty">double</span>.<span class="fn">TryParse</span>(Console.<span class="fn">ReadLine</span>(), <span class="kw">out double</span> y2);

<span class="ty">double</span> dist = Math.<span class="fn">Sqrt</span>(Math.<span class="fn">Pow</span>(x2-x1, <span class="num">2</span>) + Math.<span class="fn">Pow</span>(y2-y1, <span class="num">2</span>));
Console.<span class="fn">WriteLine</span>(<span class="str">$"Distanza: {dist:F2}"</span>);</pre>

    <h4>Errori comuni</h4>
    <pre><span class="cm">// 1. Divisione intera inaspettata:</span>
<span class="ty">double</span> media2 = (<span class="num">7</span>+<span class="num">8</span>+<span class="num">6</span>) / <span class="num">3</span>;    <span class="cm">// SBAGLIATO: 7.0</span>
<span class="ty">double</span> media3 = (<span class="num">7</span>+<span class="num">8</span>+<span class="num">6</span>) / <span class="num">3.0</span>;  <span class="cm">// OK: 7.0</span>

<span class="cm">// 2. Dividere per zero:</span>
<span class="kw">if</span> (divisore != <span class="num">0</span>)
    Console.<span class="fn">WriteLine</span>(<span class="num">10</span> / divisore);
<span class="kw">else</span>
    Console.<span class="fn">WriteLine</span>(<span class="str">"Errore: divisione per zero!"</span>);

<span class="cm">// 3. Overflow:</span>
<span class="ty">int</span> max2 = <span class="ty">int</span>.MaxValue;  <span class="cm">// 2147483647</span>
<span class="cm">// max2++;  ← diventa -2147483648! Usa long per numeri grandi.</span>

<span class="cm">// 4. / vs %:</span>
<span class="cm">// 17 / 5 = 3  (quante volte)   17 % 5 = 2  (resto)</span></pre>

    <h4>Esercizi</h4>
    <pre><span class="cm">// FACILE:</span>
<span class="cm">// 1. Area e perimetro di un rettangolo</span>
<span class="cm">// 2. Converti miglia in km (1 miglio = 1.609 km)</span>
<span class="cm">// 3. Calcola il 15% di mancia su un conto</span>
<span class="cm">// MEDIO:</span>
<span class="cm">// 4. Ipotenusa con teorema di Pitagora</span>
<span class="cm">// 5. Converti secondi in ore, minuti, secondi</span>
<span class="cm">// 6. Calcola che giorno della settimana sara&apos; tra N giorni</span>
<span class="cm">// DIFFICILE:</span>
<span class="cm">// 7. Verifica se un numero e&apos; primo</span>
<span class="cm">// 8. Calcola il fattoriale di N</span>
<span class="cm">// 9. Risolvi equazione di secondo grado ax^2+bx+c=0</span></pre>

    <h4>Soluzioni</h4>
    <pre><span class="cm">// --- 1. Rettangolo ---</span>
Console.<span class="fn">Write</span>(<span class="str">"Base: "</span>);    <span class="ty">double</span>.<span class="fn">TryParse</span>(Console.<span class="fn">ReadLine</span>(), <span class="kw">out double</span> bas);
Console.<span class="fn">Write</span>(<span class="str">"Altezza: "</span>); <span class="ty">double</span>.<span class="fn">TryParse</span>(Console.<span class="fn">ReadLine</span>(), <span class="kw">out double</span> alt);
Console.<span class="fn">WriteLine</span>(<span class="str">$"Area: {bas*alt:F2}  Perimetro: {2*(bas+alt):F2}  Diagonale: {Math.Sqrt(Math.Pow(bas,2)+Math.Pow(alt,2)):F2}"</span>);

<span class="cm">// --- 2. Miglia → km ---</span>
Console.<span class="fn">Write</span>(<span class="str">"Miglia: "</span>); <span class="ty">double</span>.<span class="fn">TryParse</span>(Console.<span class="fn">ReadLine</span>(), <span class="kw">out double</span> mig);
Console.<span class="fn">WriteLine</span>(<span class="str">$"{mig} miglia = {mig * 1.609:F2} km"</span>);

<span class="cm">// --- 3. Mancia ---</span>
Console.<span class="fn">Write</span>(<span class="str">"Conto: "</span>); <span class="ty">decimal</span>.<span class="fn">TryParse</span>(Console.<span class="fn">ReadLine</span>(), <span class="kw">out decimal</span> conto);
Console.<span class="fn">WriteLine</span>(<span class="str">$"10%: {conto*0.10m:C}  15%: {conto*0.15m:C}  20%: {conto*0.20m:C}"</span>);

<span class="cm">// --- 4. Pitagora ---</span>
Console.<span class="fn">Write</span>(<span class="str">"Cateto a: "</span>); <span class="ty">double</span>.<span class="fn">TryParse</span>(Console.<span class="fn">ReadLine</span>(), <span class="kw">out double</span> ca);
Console.<span class="fn">Write</span>(<span class="str">"Cateto b: "</span>); <span class="ty">double</span>.<span class="fn">TryParse</span>(Console.<span class="fn">ReadLine</span>(), <span class="kw">out double</span> cb);
Console.<span class="fn">WriteLine</span>(<span class="str">$"Ipotenusa: {Math.Sqrt(Math.Pow(ca,2)+Math.Pow(cb,2)):F4}"</span>);

<span class="cm">// --- 5. Secondi → h m s ---</span>
Console.<span class="fn">Write</span>(<span class="str">"Secondi: "</span>); <span class="ty">int</span>.<span class="fn">TryParse</span>(Console.<span class="fn">ReadLine</span>(), <span class="kw">out int</span> tot5);
Console.<span class="fn">WriteLine</span>(<span class="str">$"{tot5/3600}h {(tot5%3600)/60}m {tot5%60}s"</span>);

<span class="cm">// --- 6. Giorno della settimana ---</span>
Console.<span class="fn">Write</span>(<span class="str">"Giorni da oggi: "</span>); <span class="ty">int</span>.<span class="fn">TryParse</span>(Console.<span class="fn">ReadLine</span>(), <span class="kw">out int</span> gg);
<span class="ty">string</span>[] giorni6 = {<span class="str">"Domenica"</span>,<span class="str">"Lunedi"</span>,<span class="str">"Martedi"</span>,<span class="str">"Mercoledi"</span>,<span class="str">"Giovedi"</span>,<span class="str">"Venerdi"</span>,<span class="str">"Sabato"</span>};
<span class="ty">int</span> oggi6 = (<span class="ty">int</span>)DateTime.Now.DayOfWeek;
Console.<span class="fn">WriteLine</span>(<span class="str">$"Tra {gg} giorni: {giorni6[(oggi6+gg)%7]}"</span>);

<span class="cm">// --- 7. Numero primo ---</span>
Console.<span class="fn">Write</span>(<span class="str">"Numero: "</span>); <span class="ty">int</span>.<span class="fn">TryParse</span>(Console.<span class="fn">ReadLine</span>(), <span class="kw">out int</span> np);
<span class="ty">bool</span> primo = np >= <span class="num">2</span>;
<span class="kw">for</span> (<span class="ty">int</span> d=<span class="num">2</span>; d&lt;=Math.<span class="fn">Sqrt</span>(np)&amp;&amp;primo; d++) <span class="kw">if</span>(np%d==<span class="num">0</span>) primo=<span class="kw">false</span>;
Console.<span class="fn">WriteLine</span>(primo ? <span class="str">$"{np} E&apos; primo"</span> : <span class="str">$"{np} NON e&apos; primo"</span>);

<span class="cm">// --- 8. Fattoriale ---</span>
Console.<span class="fn">Write</span>(<span class="str">"N: "</span>); <span class="ty">int</span>.<span class="fn">TryParse</span>(Console.<span class="fn">ReadLine</span>(), <span class="kw">out int</span> nf);
<span class="ty">long</span> fatt=<span class="num">1</span>; <span class="kw">for</span>(<span class="ty">int</span> f=<span class="num">2</span>;f&lt;=nf;f++) fatt*=f;
Console.<span class="fn">WriteLine</span>(<span class="str">$"{nf}! = {fatt}"</span>);

<span class="cm">// --- 9. Equazione 2° grado ---</span>
Console.<span class="fn">Write</span>(<span class="str">"a: "</span>); <span class="ty">double</span>.<span class="fn">TryParse</span>(Console.<span class="fn">ReadLine</span>(), <span class="kw">out double</span> ea);
Console.<span class="fn">Write</span>(<span class="str">"b: "</span>); <span class="ty">double</span>.<span class="fn">TryParse</span>(Console.<span class="fn">ReadLine</span>(), <span class="kw">out double</span> eb);
Console.<span class="fn">Write</span>(<span class="str">"c: "</span>); <span class="ty">double</span>.<span class="fn">TryParse</span>(Console.<span class="fn">ReadLine</span>(), <span class="kw">out double</span> ec);
<span class="ty">double</span> delta = Math.<span class="fn">Pow</span>(eb,<span class="num">2</span>) - <span class="num">4</span>*ea*ec;
<span class="kw">if</span>(delta &gt; <span class="num">0</span>) {
    Console.<span class="fn">WriteLine</span>(<span class="str">$"x1={(-eb+Math.Sqrt(delta))/(2*ea):F4}  x2={(-eb-Math.Sqrt(delta))/(2*ea):F4}"</span>);
} <span class="kw">else if</span>(delta==<span class="num">0</span>) {
    Console.<span class="fn">WriteLine</span>(<span class="str">$"x={-eb/(2*ea):F4} (soluzione doppia)"</span>);
} <span class="kw">else</span> {
    Console.<span class="fn">WriteLine</span>(<span class="str">"Nessuna soluzione reale (delta negativo)"</span>);
}</pre>

  </div>
</div>
      <!-- 4. Confronto & Booleani -->
<div class="topic-card">
  <div class="topic-header" onclick="toggle(this.closest('.topic-card'))"><div><h3>4. Operatori di Confronto &amp; Booleani</h3><div class="topic-sub">==, !=, &gt;, &lt;, &amp;&amp;, ||, !, ternario, short-circuit</div></div><span class="arrow">▼</span></div>
  <div class="topic-body">

    <h4>Operatori di confronto</h4>
    <pre><span class="ty">int</span> a = <span class="num">10</span>, b = <span class="num">5</span>;
<span class="ty">bool</span> uguale         = (a == b);  <span class="cm">// false</span>
<span class="ty">bool</span> diverso        = (a != b);  <span class="cm">// true</span>
<span class="ty">bool</span> maggiore       = (a &gt;  b);  <span class="cm">// true</span>
<span class="ty">bool</span> minore         = (a &lt;  b);  <span class="cm">// false</span>
<span class="ty">bool</span> maggioreUguale = (a &gt;= b);  <span class="cm">// true</span>
<span class="ty">bool</span> minoreUguale   = (a &lt;= b);  <span class="cm">// false</span></pre>
    <table>
      <tr><th>Op</th><th>Significato</th><th>Esempio</th></tr>
      <tr><td>==</td><td>Uguale a</td><td>5 == 5 → true</td></tr>
      <tr><td>!=</td><td>Diverso da</td><td>5 != 3 → true</td></tr>
      <tr><td>&gt;</td><td>Maggiore di</td><td>5 &gt; 3 → true</td></tr>
      <tr><td>&lt;</td><td>Minore di</td><td>5 &lt; 3 → false</td></tr>
      <tr><td>&gt;=</td><td>Maggiore o uguale</td><td>5 &gt;= 5 → true</td></tr>
      <tr><td>&lt;=</td><td>Minore o uguale</td><td>5 &lt;= 3 → false</td></tr>
    </table>
    <div class="warn">Non confondere = (assegnazione) con == (confronto)!</div>

    <h4>Operatori logici</h4>
    <pre><span class="cm">// AND (&&) — entrambi devono essere true:</span>
<span class="ty">bool</span> adulto = eta &gt;= <span class="num">18</span> &amp;&amp; haDocumento;

<span class="cm">// OR (||) — almeno uno deve essere true:</span>
<span class="ty">bool</span> paga = haCarta || haContanti;

<span class="cm">// NOT (!) — inverte:</span>
<span class="ty">bool</span> offline = !connesso;</pre>
    <table>
      <tr><th>A</th><th>B</th><th>A &amp;&amp; B</th><th>A || B</th><th>!A</th></tr>
      <tr><td>true</td><td>true</td><td>true</td><td>true</td><td>false</td></tr>
      <tr><td>true</td><td>false</td><td>false</td><td>true</td><td>false</td></tr>
      <tr><td>false</td><td>true</td><td>false</td><td>true</td><td>true</td></tr>
      <tr><td>false</td><td>false</td><td>false</td><td>false</td><td>true</td></tr>
    </table>

    <h4>Esempi pratici</h4>
    <pre><span class="cm">// Accesso sito:</span>
<span class="ty">bool</span> puoAccedere = (eta &gt;= <span class="num">18</span>) &amp;&amp; haAccount &amp;&amp; emailVerificata;

<span class="cm">// Sconto:</span>
<span class="ty">bool</span> sconto = (totale &gt;= <span class="num">50m</span>) &amp;&amp; (premium || codiceScontoValido);

<span class="cm">// Orario apertura:</span>
<span class="ty">bool</span> apertoFer = feriale &amp;&amp; (ora &gt;= <span class="num">9</span> &amp;&amp; ora &lt; <span class="num">18</span>);
<span class="ty">bool</span> apertoWe  = !feriale &amp;&amp; (ora &gt;= <span class="num">10</span> &amp;&amp; ora &lt; <span class="num">16</span>);
<span class="ty">bool</span> aperto    = apertoFer || apertoWe;

<span class="cm">// Stringhe — CASE SENSITIVE!</span>
<span class="ty">bool</span> ok1 = (<span class="str">"Marco"</span> == <span class="str">"marco"</span>);                              <span class="cm">// false!</span>
<span class="ty">bool</span> ok2 = <span class="str">"Marco"</span>.<span class="fn">Equals</span>(<span class="str">"marco"</span>, StringComparison.OrdinalIgnoreCase); <span class="cm">// true</span></pre>

    <h4>Operatore ternario</h4>
    <pre><span class="cm">// condizione ? valore_true : valore_false</span>
<span class="ty">string</span> msg = (eta &gt;= <span class="num">18</span>) ? <span class="str">"Adulto"</span> : <span class="str">"Minore"</span>;

<span class="cm">// Singolare/Plurale:</span>
<span class="ty">string</span> t = (n == <span class="num">1</span>) ? <span class="str">"elemento"</span> : <span class="str">"elementi"</span>;

<span class="cm">// Annidato (voto in lettere):</span>
<span class="ty">string</span> voto = (punti &gt;= <span class="num">90</span>) ? <span class="str">"A"</span> :
              (punti &gt;= <span class="num">80</span>) ? <span class="str">"B"</span> :
              (punti &gt;= <span class="num">70</span>) ? <span class="str">"C"</span> :
              (punti &gt;= <span class="num">60</span>) ? <span class="str">"D"</span> : <span class="str">"F"</span>;

<span class="cm">// Prezzo condizionale:</span>
<span class="ty">string</span> pStr = (prezzo == <span class="num">0</span>) ? <span class="str">"Gratuito"</span> : <span class="str">$"{prezzo:C}"</span>;</pre>

    <h4>Short-circuit evaluation</h4>
    <pre><span class="cm">// && si ferma se il primo è false</span>
<span class="cm">// || si ferma se il primo è true</span>
<span class="cm">// Utile per evitare NullReferenceException:</span>

<span class="ty">string</span> nome = <span class="kw">null</span>;
<span class="cm">// if (nome.Length > 0)          ← CRASH! nome è null</span>
<span class="kw">if</span> (nome != <span class="kw">null</span> &amp;&amp; nome.Length &gt; <span class="num">0</span>) { }  <span class="cm">// OK — null check prima</span>
<span class="kw">if</span> (!<span class="ty">string</span>.<span class="fn">IsNullOrEmpty</span>(nome)) { }        <span class="cm">// ancora meglio</span></pre>

    <h4>Errori comuni</h4>
    <pre><span class="cm">// 1. = invece di ==:</span>
<span class="kw">if</span> (x == <span class="num">5</span>) { }   <span class="cm">// OK   — confronto</span>
<span class="cm">// if (x = 5)      ← ERRORE — assegnazione!</span>

<span class="cm">// 2. Condizioni ridondanti:</span>
<span class="kw">if</span> (attivo)       <span class="cm">// OK — non serve "== true"</span>
<span class="kw">if</span> (!attivo)      <span class="cm">// OK — non serve "== false"</span>

<span class="cm">// 3. Precedenza: && prima di ||</span>
<span class="cm">// Usa parentesi per chiarezza:</span>
<span class="ty">bool</span> ok = (eta &gt;= <span class="num">18</span>) || (eta &gt;= <span class="num">13</span> &amp;&amp; genPresente);</pre>

    <h4>Progetto — Sistema di login</h4>
    <pre><span class="kw">const</span> <span class="ty">string</span> USER = <span class="str">"admin"</span>, PASS = <span class="str">"admin123"</span>;
<span class="ty">int</span> tentativi = <span class="num">3</span>; <span class="ty">bool</span> ok = <span class="kw">false</span>;

<span class="kw">while</span> (tentativi &gt; <span class="num">0</span> &amp;&amp; !ok) {
    Console.<span class="fn">Write</span>(<span class="str">$"Username ({tentativi} tentativi): "</span>); <span class="ty">string</span> u = Console.<span class="fn">ReadLine</span>();
    Console.<span class="fn">Write</span>(<span class="str">"Password: "</span>);                        <span class="ty">string</span> p = Console.<span class="fn">ReadLine</span>();
    <span class="kw">if</span> (u == USER &amp;&amp; p == PASS) { ok = <span class="kw">true</span>; Console.<span class="fn">WriteLine</span>(<span class="str">"[OK] Benvenuto!"</span>); }
    <span class="kw">else</span> { tentativi--; Console.<span class="fn">WriteLine</span>(<span class="str">"[NO] Credenziali errate."</span>); }
}
<span class="kw">if</span> (!ok) Console.<span class="fn">WriteLine</span>(<span class="str">"[BLOCCATO] Troppi tentativi!"</span>);</pre>

    <h4>Esercizi</h4>
    <pre><span class="cm">// FACILE:</span>
<span class="cm">// 1. Verifica se un numero e&apos; positivo, negativo o zero</span>
<span class="cm">// 2. Controlla se una persona puo&apos; votare (eta >= 18)</span>
<span class="cm">// 3. Anno bisestile (% 400 == 0 || (% 4 == 0 &amp;&amp; % 100 != 0))</span>
<span class="cm">// MEDIO:</span>
<span class="cm">// 4. Triangolo valido (somma due lati > terzo)</span>
<span class="cm">// 5. Carattere vocale o consonante</span>
<span class="cm">// 6. Validazione password (lunghezza, maiuscola, numero)</span>
<span class="cm">// DIFFICILE:</span>
<span class="cm">// 7. Validazione data (giorno/mese/anno con bisestile)</span>
<span class="cm">// 8. Prezzo con sconti condizionali cumulativi</span>
<span class="cm">// 9. Sistema prenotazione con disponibilita&apos; e requisiti</span></pre>

    <h4>Soluzioni</h4>
    <pre><span class="cm">// --- 1. Segno ---</span>
Console.<span class="fn">Write</span>(<span class="str">"Numero: "</span>); <span class="ty">int</span>.<span class="fn">TryParse</span>(Console.<span class="fn">ReadLine</span>(), <span class="kw">out int</span> n1);
Console.<span class="fn">WriteLine</span>(n1&gt;<span class="num">0</span>?<span class="str">"POSITIVO"</span>:n1&lt;<span class="num">0</span>?<span class="str">"NEGATIVO"</span>:<span class="str">"ZERO"</span>);

<span class="cm">// --- 2. Voto ---</span>
Console.<span class="fn">Write</span>(<span class="str">"Eta&apos;: "</span>); <span class="ty">int</span>.<span class="fn">TryParse</span>(Console.<span class="fn">ReadLine</span>(), <span class="kw">out int</span> e2);
Console.<span class="fn">WriteLine</span>(e2&gt;=<span class="num">18</span>?<span class="str">"Puoi votare!"</span>:<span class="str">"Non puoi ancora votare."</span>);

<span class="cm">// --- 3. Bisestile ---</span>
Console.<span class="fn">Write</span>(<span class="str">"Anno: "</span>); <span class="ty">int</span>.<span class="fn">TryParse</span>(Console.<span class="fn">ReadLine</span>(), <span class="kw">out int</span> anno);
<span class="ty">bool</span> bis = (anno%<span class="num">400</span>==<span class="num">0</span>) || (anno%<span class="num">4</span>==<span class="num">0</span> &amp;&amp; anno%<span class="num">100</span>!=<span class="num">0</span>);
Console.<span class="fn">WriteLine</span>(<span class="str">$"{anno} {(bis ? "E'" : "NON e'")} bisestile"</span>);

<span class="cm">// --- 4. Triangolo ---</span>
Console.<span class="fn">Write</span>(<span class="str">"a: "</span>); <span class="ty">double</span>.<span class="fn">TryParse</span>(Console.<span class="fn">ReadLine</span>(), <span class="kw">out double</span> la);
Console.<span class="fn">Write</span>(<span class="str">"b: "</span>); <span class="ty">double</span>.<span class="fn">TryParse</span>(Console.<span class="fn">ReadLine</span>(), <span class="kw">out double</span> lb);
Console.<span class="fn">Write</span>(<span class="str">"c: "</span>); <span class="ty">double</span>.<span class="fn">TryParse</span>(Console.<span class="fn">ReadLine</span>(), <span class="kw">out double</span> lc);
<span class="ty">bool</span> triang = la&gt;<span class="num">0</span>&amp;&amp;lb&gt;<span class="num">0</span>&amp;&amp;lc&gt;<span class="num">0</span>&amp;&amp;(la+lb&gt;lc)&amp;&amp;(la+lc&gt;lb)&amp;&amp;(lb+lc&gt;la);
Console.<span class="fn">WriteLine</span>(triang?<span class="str">"Triangolo valido"</span>:<span class="str">"Non valido"</span>);
<span class="kw">if</span>(triang) Console.<span class="fn">WriteLine</span>(la==lb&amp;&amp;lb==lc?<span class="str">"Equilatero"</span>:la==lb||lb==lc||la==lc?<span class="str">"Isoscele"</span>:<span class="str">"Scaleno"</span>);

<span class="cm">// --- 5. Vocale o consonante ---</span>
Console.<span class="fn">Write</span>(<span class="str">"Carattere: "</span>); <span class="ty">string</span> ci = Console.<span class="fn">ReadLine</span>();
<span class="kw">if</span>(ci.Length==<span class="num">1</span>&amp;&amp;<span class="ty">char</span>.<span class="fn">IsLetter</span>(ci[<span class="num">0</span>]))
    Console.<span class="fn">WriteLine</span>(<span class="str">"aeiouAEIOU"</span>.<span class="fn">Contains</span>(ci[<span class="num">0</span>])?<span class="str">"Vocale"</span>:<span class="str">"Consonante"</span>);

<span class="cm">// --- 6. Password ---</span>
Console.<span class="fn">Write</span>(<span class="str">"Password: "</span>); <span class="ty">string</span> pwd = Console.<span class="fn">ReadLine</span>();
<span class="ty">bool</span> pwOk = pwd.Length&gt;=<span class="num">8</span> &amp;&amp; pwd.<span class="fn">Any</span>(<span class="ty">char</span>.IsUpper) &amp;&amp; pwd.<span class="fn">Any</span>(<span class="ty">char</span>.IsLower) &amp;&amp; pwd.<span class="fn">Any</span>(<span class="ty">char</span>.IsDigit);
Console.<span class="fn">WriteLine</span>(pwOk?<span class="str">"Password valida"</span>:<span class="str">"Troppo debole (min 8 car, maiusc, minusc, numero)"</span>);

<span class="cm">// --- 7. Valida data ---</span>
Console.<span class="fn">Write</span>(<span class="str">"Giorno: "</span>); <span class="ty">int</span>.<span class="fn">TryParse</span>(Console.<span class="fn">ReadLine</span>(), <span class="kw">out int</span> gd);
Console.<span class="fn">Write</span>(<span class="str">"Mese: "</span>);   <span class="ty">int</span>.<span class="fn">TryParse</span>(Console.<span class="fn">ReadLine</span>(), <span class="kw">out int</span> ms);
Console.<span class="fn">Write</span>(<span class="str">"Anno: "</span>);   <span class="ty">int</span>.<span class="fn">TryParse</span>(Console.<span class="fn">ReadLine</span>(), <span class="kw">out int</span> an);
<span class="ty">bool</span> bisD = (an%<span class="num">400</span>==<span class="num">0</span>)||(an%<span class="num">4</span>==<span class="num">0</span>&amp;&amp;an%<span class="num">100</span>!=<span class="num">0</span>);
<span class="ty">int</span>[] giMax = {<span class="num">0</span>,<span class="num">31</span>,bisD?<span class="num">29</span>:<span class="num">28</span>,<span class="num">31</span>,<span class="num">30</span>,<span class="num">31</span>,<span class="num">30</span>,<span class="num">31</span>,<span class="num">31</span>,<span class="num">30</span>,<span class="num">31</span>,<span class="num">30</span>,<span class="num">31</span>};
<span class="ty">bool</span> dateOk = ms&gt;=<span class="num">1</span>&amp;&amp;ms&lt;=<span class="num">12</span>&amp;&amp;gd&gt;=<span class="num">1</span>&amp;&amp;gd&lt;=giMax[ms];
Console.<span class="fn">WriteLine</span>(dateOk?<span class="str">$"[OK] {gd:D2}/{ms:D2}/{an}"</span>:<span class="str">"[ERRORE] Data non valida"</span>);

<span class="cm">// --- 8. Sconti cumulativi ---</span>
Console.<span class="fn">Write</span>(<span class="str">"Importo: "</span>); <span class="ty">decimal</span>.<span class="fn">TryParse</span>(Console.<span class="fn">ReadLine</span>(), <span class="kw">out decimal</span> imp);
Console.<span class="fn">Write</span>(<span class="str">"Premium? s/n: "</span>); <span class="ty">bool</span> prem = Console.<span class="fn">ReadLine</span>().<span class="fn">ToLower</span>()==<span class="str">"s"</span>;
Console.<span class="fn">Write</span>(<span class="str">"Black Friday? s/n: "</span>); <span class="ty">bool</span> bf = Console.<span class="fn">ReadLine</span>().<span class="fn">ToLower</span>()==<span class="str">"s"</span>;
<span class="ty">decimal</span> sc = <span class="num">0</span>;
<span class="kw">if</span>(imp&gt;=<span class="num">100m</span>) sc+=<span class="num">0.10m</span>; <span class="kw">else if</span>(imp&gt;=<span class="num">50m</span>) sc+=<span class="num">0.05m</span>;
<span class="kw">if</span>(prem) sc+=<span class="num">0.15m</span>;
<span class="kw">if</span>(bf) sc+=<span class="num">0.20m</span>;
<span class="kw">if</span>(sc&gt;<span class="num">0.50m</span>) sc=<span class="num">0.50m</span>;
Console.<span class="fn">WriteLine</span>(<span class="str">$"Sconto: {sc:P0}  Totale: {imp*(1-sc):C}"</span>);

<span class="cm">// --- 9. Prenotazione hotel ---</span>
<span class="ty">bool</span> sinDispo=<span class="kw">true</span>, dopDispo=<span class="kw">true</span>, suitDispo=<span class="kw">false</span>;
Console.<span class="fn">Write</span>(<span class="str">"Stanza (S/D/U): "</span>); <span class="ty">char</span> st=<span class="ty">char</span>.<span class="fn">ToUpper</span>(Console.<span class="fn">ReadLine</span>()[<span class="num">0</span>]);
Console.<span class="fn">Write</span>(<span class="str">"Notti: "</span>); <span class="ty">int</span>.<span class="fn">TryParse</span>(Console.<span class="fn">ReadLine</span>(), <span class="kw">out int</span> notti);
Console.<span class="fn">Write</span>(<span class="str">"Eta&apos;: "</span>); <span class="ty">int</span>.<span class="fn">TryParse</span>(Console.<span class="fn">ReadLine</span>(), <span class="kw">out int</span> etaH);
Console.<span class="fn">Write</span>(<span class="str">"Carta? s/n: "</span>); <span class="ty">bool</span> carta=Console.<span class="fn">ReadLine</span>().<span class="fn">ToLower</span>()==<span class="str">"s"</span>;
(<span class="ty">bool</span> dispo, <span class="ty">decimal</span> prz, <span class="ty">string</span> nome) stanza = st <span class="kw">switch</span> {
    <span class="str">'S'</span> =&gt; (sinDispo, <span class="num">50m</span>, <span class="str">"Singola"</span>), <span class="str">'D'</span> =&gt; (dopDispo, <span class="num">80m</span>, <span class="str">"Doppia"</span>),
    <span class="str">'U'</span> =&gt; (suitDispo, <span class="num">200m</span>, <span class="str">"Suite"</span>), _ =&gt; (<span class="kw">false</span>, <span class="num">0m</span>, <span class="str">"?"</span>)
};
<span class="ty">bool</span> preOk = stanza.dispo &amp;&amp; etaH&gt;=<span class="num">18</span> &amp;&amp; carta &amp;&amp; notti&gt;=<span class="num">1</span>&amp;&amp;notti&lt;=<span class="num">30</span>;
<span class="kw">if</span>(preOk) Console.<span class="fn">WriteLine</span>(<span class="str">$"[OK] {stanza.nome} x {notti} notti = {stanza.prz*notti:C}"</span>);
<span class="kw">else</span> Console.<span class="fn">WriteLine</span>(<span class="str">"[NO] Prenotazione non possibile"</span>);</pre>

  </div>
</div>
      <!-- 5. Strutture di Controllo -->
<div class="topic-card">
  <div class="topic-header" onclick="toggle(this.closest('.topic-card'))"><div><h3>5. Strutture di Controllo</h3><div class="topic-sub">if/else if/else, switch, switch expression (C# 8+), progetti</div></div><span class="arrow">▼</span></div>
  <div class="topic-body">

    <h4>if / else if / else</h4>
    <pre><span class="kw">if</span> (voto &gt;= <span class="num">90</span>)      Console.<span class="fn">WriteLine</span>(<span class="str">"Ottimo!"</span>);
<span class="kw">else if</span> (voto &gt;= <span class="num">80</span>) Console.<span class="fn">WriteLine</span>(<span class="str">"Molto bene!"</span>);
<span class="kw">else if</span> (voto &gt;= <span class="num">70</span>) Console.<span class="fn">WriteLine</span>(<span class="str">"Bene!"</span>);
<span class="kw">else if</span> (voto &gt;= <span class="num">60</span>) Console.<span class="fn">WriteLine</span>(<span class="str">"Sufficiente"</span>);
<span class="kw">else</span>                 Console.<span class="fn">WriteLine</span>(<span class="str">"Insufficiente"</span>);</pre>
    <div class="warn">Usa sempre le { } anche per una sola istruzione — senza di esse è facile introdurre bug invisibili.</div>

    <h4>if annidati</h4>
    <pre><span class="kw">if</span> (eta &gt;= <span class="num">18</span>) {
    Console.<span class="fn">WriteLine</span>(<span class="str">"Maggiorenne"</span>);
    <span class="kw">if</span> (haPatente) Console.<span class="fn">WriteLine</span>(<span class="str">"Puoi guidare!"</span>);
    <span class="kw">else</span>           Console.<span class="fn">WriteLine</span>(<span class="str">"Ma non hai la patente"</span>);
} <span class="kw">else</span> {
    Console.<span class="fn">WriteLine</span>(<span class="str">"Minorenne"</span>);
    <span class="kw">if</span> (eta &gt;= <span class="num">14</span>) Console.<span class="fn">WriteLine</span>(<span class="str">"Puoi guidare il motorino"</span>);
    <span class="kw">else</span>            Console.<span class="fn">WriteLine</span>(<span class="str">"Non puoi guidare nulla"</span>);
}</pre>

    <h4>switch classico</h4>
    <pre><span class="kw">switch</span> (giorno) {
    <span class="kw">case</span> <span class="num">1</span>: Console.<span class="fn">WriteLine</span>(<span class="str">"Lunedi"</span>);   <span class="kw">break</span>;
    <span class="kw">case</span> <span class="num">2</span>: Console.<span class="fn">WriteLine</span>(<span class="str">"Martedi"</span>);  <span class="kw">break</span>;
    <span class="kw">case</span> <span class="num">6</span>:
    <span class="kw">case</span> <span class="num">7</span>: Console.<span class="fn">WriteLine</span>(<span class="str">"Weekend!"</span>);  <span class="kw">break</span>;  <span class="cm">// case multipli</span>
    <span class="kw">default</span>: Console.<span class="fn">WriteLine</span>(<span class="str">"Altro"</span>);    <span class="kw">break</span>;
}

<span class="cm">// Funziona anche con stringhe:</span>
<span class="kw">switch</span> (comando.<span class="fn">ToLower</span>()) {
    <span class="kw">case</span> <span class="str">"start"</span>: <span class="kw">case</span> <span class="str">"avvia"</span>: Console.<span class="fn">WriteLine</span>(<span class="str">"Avvio..."</span>); <span class="kw">break</span>;
    <span class="kw">case</span> <span class="str">"stop"</span>:  <span class="kw">case</span> <span class="str">"ferma"</span>: Console.<span class="fn">WriteLine</span>(<span class="str">"Stop..."</span>);  <span class="kw">break</span>;
    <span class="kw">default</span>: Console.<span class="fn">WriteLine</span>(<span class="str">"Comando sconosciuto"</span>); <span class="kw">break</span>;
}</pre>

    <h4>switch expression (C# 8+)</h4>
    <pre><span class="cm">// Restituisce direttamente un valore — più compatto:</span>
<span class="ty">string</span> nomeGiorno = giorno <span class="kw">switch</span> {
    <span class="num">1</span> =&gt; <span class="str">"Lunedi"</span>, <span class="num">2</span> =&gt; <span class="str">"Martedi"</span>, <span class="num">3</span> =&gt; <span class="str">"Mercoledi"</span>,
    <span class="num">4</span> =&gt; <span class="str">"Giovedi"</span>, <span class="num">5</span> =&gt; <span class="str">"Venerdi"</span>, <span class="num">6</span> =&gt; <span class="str">"Sabato"</span>, <span class="num">7</span> =&gt; <span class="str">"Domenica"</span>,
    _ =&gt; <span class="str">"Non valido"</span>
};

<span class="cm">// Con range (C# 9+):</span>
<span class="ty">string</span> valut = punti <span class="kw">switch</span> {
    &gt;= <span class="num">90</span> =&gt; <span class="str">"Eccellente"</span>,
    &gt;= <span class="num">80</span> =&gt; <span class="str">"Ottimo"</span>,
    &gt;= <span class="num">70</span> =&gt; <span class="str">"Buono"</span>,
    &gt;= <span class="num">60</span> =&gt; <span class="str">"Sufficiente"</span>,
    _      =&gt; <span class="str">"Insufficiente"</span>
};

<span class="cm">// Con 'or':</span>
<span class="ty">int</span> giorniMese = mese <span class="kw">switch</span> {
    <span class="num">1</span> <span class="kw">or</span> <span class="num">3</span> <span class="kw">or</span> <span class="num">5</span> <span class="kw">or</span> <span class="num">7</span> <span class="kw">or</span> <span class="num">8</span> <span class="kw">or</span> <span class="num">10</span> <span class="kw">or</span> <span class="num">12</span> =&gt; <span class="num">31</span>,
    <span class="num">4</span> <span class="kw">or</span> <span class="num">6</span> <span class="kw">or</span> <span class="num">9</span> <span class="kw">or</span> <span class="num">11</span> =&gt; <span class="num">30</span>,
    <span class="num">2</span> =&gt; <span class="num">28</span>,
    _ =&gt; <span class="num">0</span>
};</pre>
    <table>
      <tr><th>Usa if quando...</th><th>Usa switch quando...</th></tr>
      <tr><td>Range di valori</td><td>Valori specifici/discreti</td></tr>
      <tr><td>Condizioni complesse</td><td>Una variabile, molti casi</td></tr>
      <tr><td>Poche opzioni (2-3)</td><td>Molte opzioni (&gt; 3)</td></tr>
    </table>

    <h4>Progetto — Calcolatrice</h4>
    <pre>Console.<span class="fn">Write</span>(<span class="str">"Num1: "</span>); <span class="ty">double</span>.<span class="fn">TryParse</span>(Console.<span class="fn">ReadLine</span>(), <span class="kw">out double</span> n1);
Console.<span class="fn">Write</span>(<span class="str">"Op: "</span>);   <span class="ty">string</span> op = Console.<span class="fn">ReadLine</span>();
Console.<span class="fn">Write</span>(<span class="str">"Num2: "</span>); <span class="ty">double</span>.<span class="fn">TryParse</span>(Console.<span class="fn">ReadLine</span>(), <span class="kw">out double</span> n2);

<span class="ty">double</span> res = op <span class="kw">switch</span> {
    <span class="str">"+"</span> =&gt; n1+n2, <span class="str">"-"</span> =&gt; n1-n2, <span class="str">"*"</span> <span class="kw">or</span> <span class="str">"x"</span> =&gt; n1*n2,
    <span class="str">"/"</span> =&gt; n2!=<span class="num">0</span> ? n1/n2 : <span class="ty">double</span>.NaN,
    <span class="str">"%"</span> =&gt; n1%n2,
    _ =&gt; <span class="ty">double</span>.NaN
};
Console.<span class="fn">WriteLine</span>(<span class="ty">double</span>.<span class="fn">IsNaN</span>(res) ? <span class="str">"Operazione non valida"</span> : <span class="str">$"{n1} {op} {n2} = {res}"</span>);</pre>

    <h4>Progetto — BMI con switch expression</h4>
    <pre>Console.<span class="fn">Write</span>(<span class="str">"Peso (kg): "</span>);  <span class="ty">double</span>.<span class="fn">TryParse</span>(Console.<span class="fn">ReadLine</span>(), <span class="kw">out double</span> peso);
Console.<span class="fn">Write</span>(<span class="str">"Altezza (m): "</span>); <span class="ty">double</span>.<span class="fn">TryParse</span>(Console.<span class="fn">ReadLine</span>(), <span class="kw">out double</span> alt);
<span class="ty">double</span> bmi = peso / (alt * alt);

<span class="ty">string</span> cat = bmi <span class="kw">switch</span> {
    &lt; <span class="num">16</span>              =&gt; <span class="str">"Grave magrezza"</span>,
    &gt;= <span class="num">16</span> <span class="kw">and</span> &lt; <span class="num">18.5</span> =&gt; <span class="str">"Sottopeso"</span>,
    &gt;= <span class="num">18.5</span> <span class="kw">and</span> &lt; <span class="num">25</span> =&gt; <span class="str">"Normopeso"</span>,
    &gt;= <span class="num">25</span> <span class="kw">and</span> &lt; <span class="num">30</span>   =&gt; <span class="str">"Sovrappeso"</span>,
    &gt;= <span class="num">30</span> <span class="kw">and</span> &lt; <span class="num">35</span>   =&gt; <span class="str">"Obesita&apos; I"</span>,
    &gt;= <span class="num">35</span>             =&gt; <span class="str">"Obesita&apos; II+"</span>,
    _                  =&gt; <span class="str">"Errore"</span>
};
Console.<span class="fn">WriteLine</span>(<span class="str">$"BMI: {bmi:F1} — {cat}"</span>);</pre>

    <h4>Errori comuni</h4>
    <pre><span class="cm">// 1. Ordine condizioni sbagliato (dal più generale al più specifico):</span>
<span class="kw">if</span> (v &gt;= <span class="num">60</span>) Console.<span class="fn">WriteLine</span>(<span class="str">"Sufficiente"</span>);  <span class="cm">// cattura anche 95!</span>
<span class="kw">else if</span> (v &gt;= <span class="num">90</span>) Console.<span class="fn">WriteLine</span>(<span class="str">"Ottimo"</span>);   <span class="cm">// mai raggiunto!</span>
<span class="cm">// CORRETTO: metti prima il caso più restrittivo (>= 90)</span>

<span class="cm">// 2. else senza parentesi — il secondo WriteLine esegue SEMPRE:</span>
<span class="kw">if</span> (ok)
    Console.<span class="fn">WriteLine</span>(<span class="str">"A"</span>);
    Console.<span class="fn">WriteLine</span>(<span class="str">"B"</span>);  <span class="cm">// NON è dentro l'if!</span>

<span class="cm">// 3. Dimenticare break nel switch (errore di compilazione in C#)</span>

<span class="cm">// 4. Else if senza else finale — alcuni casi non vengono gestiti</span></pre>

    <h4>Esercizi</h4>
    <pre><span class="cm">// FACILE:</span>
<span class="cm">// 1. Segno del numero (positivo/negativo/zero)</span>
<span class="cm">// 2. Numero mese → nome mese</span>
<span class="cm">// 3. Giorno feriale o weekend</span>
<span class="cm">// MEDIO:</span>
<span class="cm">// 4. Voto USA (A/B/C/D/F)</span>
<span class="cm">// 5. Tariffa parcheggio (prima ora 2€, poi 1.50€/ora, max 10€)</span>
<span class="cm">// 6. Distributore automatico con gestione del resto</span>
<span class="cm">// DIFFICILE:</span>
<span class="cm">// 7. Controllo accesso cinema (T, VM14, VM18)</span>
<span class="cm">// 8. Calcolatore imposte progressive (scaglioni IRPEF)</span>
<span class="cm">// 9. Simulatore bancomat con menu e PIN</span></pre>

    <h4>Soluzioni</h4>
    <pre><span class="cm">// --- 1. Segno ---</span>
Console.<span class="fn">Write</span>(<span class="str">"Numero: "</span>); <span class="ty">int</span>.<span class="fn">TryParse</span>(Console.<span class="fn">ReadLine</span>(), <span class="kw">out int</span> ns);
Console.<span class="fn">WriteLine</span>(ns&gt;<span class="num">0</span>?<span class="str">"POSITIVO [+]"</span>:ns&lt;<span class="num">0</span>?<span class="str">"NEGATIVO [-]"</span>:<span class="str">"ZERO [0]"</span>);

<span class="cm">// --- 2. Mese ---</span>
Console.<span class="fn">Write</span>(<span class="str">"Mese (1-12): "</span>); <span class="ty">int</span>.<span class="fn">TryParse</span>(Console.<span class="fn">ReadLine</span>(), <span class="kw">out int</span> ms2);
<span class="ty">string</span> nomeMese = ms2 <span class="kw">switch</span> {
    <span class="num">1</span>=&gt;<span class="str">"Gennaio"</span>,<span class="num">2</span>=&gt;<span class="str">"Febbraio"</span>,<span class="num">3</span>=&gt;<span class="str">"Marzo"</span>,<span class="num">4</span>=&gt;<span class="str">"Aprile"</span>,
    <span class="num">5</span>=&gt;<span class="str">"Maggio"</span>,<span class="num">6</span>=&gt;<span class="str">"Giugno"</span>,<span class="num">7</span>=&gt;<span class="str">"Luglio"</span>,<span class="num">8</span>=&gt;<span class="str">"Agosto"</span>,
    <span class="num">9</span>=&gt;<span class="str">"Settembre"</span>,<span class="num">10</span>=&gt;<span class="str">"Ottobre"</span>,<span class="num">11</span>=&gt;<span class="str">"Novembre"</span>,<span class="num">12</span>=&gt;<span class="str">"Dicembre"</span>,
    _=&gt;<span class="str">"Non valido"</span>
};
Console.<span class="fn">WriteLine</span>(nomeMese);

<span class="cm">// --- 3. Feriale/Weekend ---</span>
Console.<span class="fn">Write</span>(<span class="str">"Giorno (1=Lun…7=Dom): "</span>); <span class="ty">int</span>.<span class="fn">TryParse</span>(Console.<span class="fn">ReadLine</span>(), <span class="kw">out int</span> gw);
Console.<span class="fn">WriteLine</span>(gw <span class="kw">switch</span> { &gt;=<span class="num">1</span> <span class="kw">and</span> &lt;=<span class="num">5</span>=&gt;<span class="str">"Feriale"</span>, <span class="num">6</span> <span class="kw">or</span> <span class="num">7</span>=&gt;<span class="str">"Weekend"</span>, _=&gt;<span class="str">"Non valido"</span> });

<span class="cm">// --- 4. Voto USA ---</span>
Console.<span class="fn">Write</span>(<span class="str">"Punteggio: "</span>); <span class="ty">int</span>.<span class="fn">TryParse</span>(Console.<span class="fn">ReadLine</span>(), <span class="kw">out int</span> pv);
Console.<span class="fn">WriteLine</span>(pv <span class="kw">switch</span> { &lt;<span class="num">0</span> <span class="kw">or</span> &gt;<span class="num">100</span>=&gt;<span class="str">"Non valido"</span>, &gt;=<span class="num">90</span>=&gt;<span class="str">"A"</span>, &gt;=<span class="num">80</span>=&gt;<span class="str">"B"</span>, &gt;=<span class="num">70</span>=&gt;<span class="str">"C"</span>, &gt;=<span class="num">60</span>=&gt;<span class="str">"D"</span>, _=&gt;<span class="str">"F"</span> });

<span class="cm">// --- 5. Parcheggio ---</span>
Console.<span class="fn">Write</span>(<span class="str">"Ore: "</span>); <span class="ty">int</span>.<span class="fn">TryParse</span>(Console.<span class="fn">ReadLine</span>(), <span class="kw">out int</span> ore);
<span class="ty">decimal</span> tariffa = ore &lt;= <span class="num">0</span> ? <span class="num">0m</span> : ore == <span class="num">1</span> ? <span class="num">2.00m</span> : Math.<span class="fn">Min</span>(<span class="num">2.00m</span> + (ore-<span class="num">1</span>)*<span class="num">1.50m</span>, <span class="num">10.00m</span>);
Console.<span class="fn">WriteLine</span>(<span class="str">$"{ore} ore → {tariffa:C}"</span>);

<span class="cm">// --- 6. Distributore ---</span>
Console.<span class="fn">WriteLine</span>(<span class="str">"1.Caffe 0.80  2.Cappuccino 1.20  3.Te 0.70  4.Acqua 0.50"</span>);
Console.<span class="fn">Write</span>(<span class="str">"Scelta: "</span>); <span class="ty">string</span> sc = Console.<span class="fn">ReadLine</span>();
<span class="ty">decimal</span> prz = sc <span class="kw">switch</span> { <span class="str">"1"</span>=&gt;<span class="num">0.80m</span>,<span class="str">"2"</span>=&gt;<span class="num">1.20m</span>,<span class="str">"3"</span>=&gt;<span class="num">0.70m</span>,<span class="str">"4"</span>=&gt;<span class="num">0.50m</span>,_=&gt;-<span class="num">1m</span> };
<span class="kw">if</span>(prz&lt;<span class="num">0</span>){Console.<span class="fn">WriteLine</span>(<span class="str">"Selezione non valida"</span>);}
<span class="kw">else</span> {
    Console.<span class="fn">Write</span>(<span class="str">$"Inserisci {prz:C}: "</span>);
    <span class="ty">decimal</span>.<span class="fn">TryParse</span>(Console.<span class="fn">ReadLine</span>(), <span class="kw">out decimal</span> ins);
    <span class="kw">if</span>(ins&lt;prz) Console.<span class="fn">WriteLine</span>(<span class="str">$"Insufficiente, restituzione {ins:C}"</span>);
    <span class="kw">else</span> Console.<span class="fn">WriteLine</span>(<span class="str">$"Erogazione... Resto: {ins-prz:C}"</span>);
}

<span class="cm">// --- 7. Cinema ---</span>
Console.<span class="fn">Write</span>(<span class="str">"Eta&apos;: "</span>); <span class="ty">int</span>.<span class="fn">TryParse</span>(Console.<span class="fn">ReadLine</span>(), <span class="kw">out int</span> ec);
Console.<span class="fn">Write</span>(<span class="str">"Classif (T/VM14/VM18): "</span>); <span class="ty">string</span> cl = Console.<span class="fn">ReadLine</span>().<span class="fn">ToUpper</span>();
Console.<span class="fn">Write</span>(<span class="str">"Accompagnato? s/n: "</span>); <span class="ty">bool</span> acc = Console.<span class="fn">ReadLine</span>().<span class="fn">ToLower</span>()==<span class="str">"s"</span>;
<span class="ty">bool</span> cinOk = cl <span class="kw">switch</span> {
    <span class="str">"T"</span>    =&gt; <span class="kw">true</span>,
    <span class="str">"VM14"</span> =&gt; ec&gt;=<span class="num">14</span> || (ec&gt;=<span class="num">10</span>&amp;&amp;acc),
    <span class="str">"VM18"</span> =&gt; ec&gt;=<span class="num">18</span>,
    _      =&gt; <span class="kw">false</span>
};
Console.<span class="fn">WriteLine</span>(cinOk?<span class="str">"[OK] Accesso consentito"</span>:<span class="str">"[NO] Accesso negato"</span>);

<span class="cm">// --- 8. Imposte IRPEF ---</span>
Console.<span class="fn">Write</span>(<span class="str">"Reddito: "</span>); <span class="ty">decimal</span>.<span class="fn">TryParse</span>(Console.<span class="fn">ReadLine</span>(), <span class="kw">out decimal</span> red);
<span class="ty">decimal</span> imp=<span class="num">0</span>, res=red;
<span class="kw">if</span>(res&gt;<span class="num">0</span>){<span class="ty">decimal</span> q=Math.<span class="fn">Min</span>(res,<span class="num">15000m</span>);imp+=q*<span class="num">0.23m</span>;res-=q;}
<span class="kw">if</span>(res&gt;<span class="num">0</span>){<span class="ty">decimal</span> q=Math.<span class="fn">Min</span>(res,<span class="num">13000m</span>);imp+=q*<span class="num">0.27m</span>;res-=q;}
<span class="kw">if</span>(res&gt;<span class="num">0</span>){<span class="ty">decimal</span> q=Math.<span class="fn">Min</span>(res,<span class="num">27000m</span>);imp+=q*<span class="num">0.38m</span>;res-=q;}
<span class="kw">if</span>(res&gt;<span class="num">0</span>) imp+=res*<span class="num">0.43m</span>;
Console.<span class="fn">WriteLine</span>(<span class="str">$"Imposta: {imp:C}  Aliquota eff: {imp/red:P1}  Netto: {red-imp:C}"</span>);

<span class="cm">// --- 9. Bancomat ---</span>
<span class="ty">decimal</span> saldo=<span class="num">1500m</span>; <span class="ty">string</span> pin=<span class="str">"1234"</span>; <span class="ty">int</span> tent=<span class="num">3</span>; <span class="ty">bool</span> auth=<span class="kw">false</span>;
<span class="kw">while</span>(tent&gt;<span class="num">0</span>&amp;&amp;!auth){Console.<span class="fn">Write</span>(<span class="str">$"PIN ({tent} tent.): "</span>);
    <span class="kw">if</span>(Console.<span class="fn">ReadLine</span>()==pin) auth=<span class="kw">true</span>; <span class="kw">else</span>{tent--;Console.<span class="fn">WriteLine</span>(<span class="str">"Errato"</span>);}}
<span class="kw">if</span>(!auth){Console.<span class="fn">WriteLine</span>(<span class="str">"Carta bloccata"</span>);}
<span class="kw">else</span> {
    <span class="ty">bool</span> esci=<span class="kw">false</span>;
    <span class="kw">while</span>(!esci){
        Console.<span class="fn">Write</span>(<span class="str">"1.Saldo 2.Preleva 3.Deposita 0.Esci → "</span>);
        <span class="kw">switch</span>(Console.<span class="fn">ReadLine</span>()){
            <span class="kw">case</span> <span class="str">"1"</span>: Console.<span class="fn">WriteLine</span>(<span class="str">$"Saldo: {saldo:C}"</span>); <span class="kw">break</span>;
            <span class="kw">case</span> <span class="str">"2"</span>: Console.<span class="fn">Write</span>(<span class="str">"Importo: "</span>);
                <span class="ty">decimal</span>.<span class="fn">TryParse</span>(Console.<span class="fn">ReadLine</span>(),<span class="kw">out decimal</span> pr);
                <span class="kw">if</span>(pr&gt;<span class="num">0</span>&amp;&amp;pr&lt;=saldo&amp;&amp;pr&lt;=<span class="num">500m</span>){saldo-=pr;Console.<span class="fn">WriteLine</span>(<span class="str">$"Prelevati {pr:C}. Saldo: {saldo:C}"</span>);}
                <span class="kw">else</span> Console.<span class="fn">WriteLine</span>(<span class="str">"Non valido (max 500, saldo sufficiente)"</span>); <span class="kw">break</span>;
            <span class="kw">case</span> <span class="str">"3"</span>: Console.<span class="fn">Write</span>(<span class="str">"Importo: "</span>);
                <span class="ty">decimal</span>.<span class="fn">TryParse</span>(Console.<span class="fn">ReadLine</span>(),<span class="kw">out decimal</span> dp);
                <span class="kw">if</span>(dp&gt;<span class="num">0</span>){saldo+=dp;Console.<span class="fn">WriteLine</span>(<span class="str">$"Depositati {dp:C}. Saldo: {saldo:C}"</span>);}
                <span class="kw">else</span> Console.<span class="fn">WriteLine</span>(<span class="str">"Non valido"</span>); <span class="kw">break</span>;
            <span class="kw">case</span> <span class="str">"0"</span>: esci=<span class="kw">true</span>; Console.<span class="fn">WriteLine</span>(<span class="str">"Arrivederci!"</span>); <span class="kw">break</span>;
            <span class="kw">default</span>: Console.<span class="fn">WriteLine</span>(<span class="str">"Scelta non valida"</span>); <span class="kw">break</span>;
        }
    }
}</pre>

  </div>
</div>
      <!-- 6. Ciclo for -->
<div class="topic-card">
  <div class="topic-header" onclick="toggle(this.closest('.topic-card'))"><div><h3>6. Ciclo for</h3><div class="topic-sub">Iterazioni note, contatore, break, continue, step, cicli annidati</div></div><span class="arrow">▼</span></div>
  <div class="topic-body">

    <h4>Struttura base</h4>
    <pre><span class="cm">// for (inizio; condizione; aggiornamento)</span>
<span class="kw">for</span> (<span class="ty">int</span> i = <span class="num">0</span>; i &lt; <span class="num">5</span>; i++)
    Console.<span class="fn">WriteLine</span>(<span class="str">$"i = {i}"</span>);  <span class="cm">// 0, 1, 2, 3, 4</span>

<span class="cm">// Le tre parti del for:</span>
<span class="cm">// int i = 0  → eseguito UNA volta all'inizio</span>
<span class="cm">// i &lt; 5      → controllata PRIMA di ogni iterazione</span>
<span class="cm">// i++        → eseguito DOPO ogni iterazione</span></pre>

    <h4>Varianti comuni</h4>
    <pre><span class="cm">// Contare al contrario:</span>
<span class="kw">for</span> (<span class="ty">int</span> i = <span class="num">10</span>; i &gt;= <span class="num">0</span>; i--)
    Console.<span class="fn">Write</span>(<span class="str">$"{i} "</span>);  <span class="cm">// 10 9 8 7 6 5 4 3 2 1 0</span>

<span class="cm">// Step di 2 (numeri pari):</span>
<span class="kw">for</span> (<span class="ty">int</span> i = <span class="num">0</span>; i &lt;= <span class="num">20</span>; i += <span class="num">2</span>)
    Console.<span class="fn">Write</span>(<span class="str">$"{i} "</span>);  <span class="cm">// 0 2 4 6 8 10 12 14 16 18 20</span>

<span class="cm">// Step di 5:</span>
<span class="kw">for</span> (<span class="ty">int</span> i = <span class="num">0</span>; i &lt;= <span class="num">100</span>; i += <span class="num">5</span>)
    Console.<span class="fn">Write</span>(<span class="str">$"{i} "</span>);  <span class="cm">// 0 5 10 15 ... 100</span>

<span class="cm">// Moltiplicare (tavola del 2):</span>
<span class="kw">for</span> (<span class="ty">int</span> i = <span class="num">1</span>; i &lt;= <span class="num">10</span>; i *= <span class="num">2</span>)
    Console.<span class="fn">Write</span>(<span class="str">$"{i} "</span>);  <span class="cm">// 1 2 4 8 16... (attenzione: può non fermarsi!)</span></pre>

    <h4>break e continue</h4>
    <pre><span class="cm">// break — esce dal ciclo immediatamente:</span>
<span class="kw">for</span> (<span class="ty">int</span> i = <span class="num">0</span>; i &lt; <span class="num">10</span>; i++) {
    <span class="kw">if</span> (i == <span class="num">5</span>) <span class="kw">break</span>;
    Console.<span class="fn">Write</span>(<span class="str">$"{i} "</span>);  <span class="cm">// 0 1 2 3 4</span>
}

<span class="cm">// continue — salta questa iterazione e va alla prossima:</span>
<span class="kw">for</span> (<span class="ty">int</span> i = <span class="num">0</span>; i &lt; <span class="num">10</span>; i++) {
    <span class="kw">if</span> (i % <span class="num">2</span> == <span class="num">0</span>) <span class="kw">continue</span>;  <span class="cm">// salta i pari</span>
    Console.<span class="fn">Write</span>(<span class="str">$"{i} "</span>);  <span class="cm">// 1 3 5 7 9</span>
}

<span class="cm">// Insieme:</span>
<span class="kw">for</span> (<span class="ty">int</span> i = <span class="num">0</span>; i &lt; <span class="num">10</span>; i++) {
    <span class="kw">if</span> (i == <span class="num">3</span>) <span class="kw">continue</span>;  <span class="cm">// salta 3</span>
    <span class="kw">if</span> (i == <span class="num">7</span>) <span class="kw">break</span>;     <span class="cm">// si ferma a 7</span>
    Console.<span class="fn">Write</span>(<span class="str">$"{i} "</span>);  <span class="cm">// 0 1 2 4 5 6</span>
}</pre>

    <h4>Cicli annidati</h4>
    <pre><span class="cm">// Tavola pitagorica:</span>
<span class="kw">for</span> (<span class="ty">int</span> i = <span class="num">1</span>; i &lt;= <span class="num">5</span>; i++) {
    <span class="kw">for</span> (<span class="ty">int</span> j = <span class="num">1</span>; j &lt;= <span class="num">5</span>; j++) {
        Console.<span class="fn">Write</span>(<span class="str">$"{i*j,4}"</span>);
    }
    Console.<span class="fn">WriteLine</span>();
}
<span class="cm">// Output:</span>
<span class="cm">//    1   2   3   4   5</span>
<span class="cm">//    2   4   6   8  10</span>
<span class="cm">//    3   6   9  12  15  ...</span>

<span class="cm">// Triangolo di asterischi:</span>
<span class="kw">for</span> (<span class="ty">int</span> i = <span class="num">1</span>; i &lt;= <span class="num">5</span>; i++) {
    <span class="kw">for</span> (<span class="ty">int</span> j = <span class="num">0</span>; j &lt; i; j++)
        Console.<span class="fn">Write</span>(<span class="str">"* "</span>);
    Console.<span class="fn">WriteLine</span>();
}
<span class="cm">// *</span>
<span class="cm">// * *</span>
<span class="cm">// * * *  ...</span></pre>

    <h4>Usi pratici</h4>
    <pre><span class="cm">// Somma dei numeri da 1 a 100:</span>
<span class="ty">int</span> somma = <span class="num">0</span>;
<span class="kw">for</span> (<span class="ty">int</span> i = <span class="num">1</span>; i &lt;= <span class="num">100</span>; i++) somma += i;
Console.<span class="fn">WriteLine</span>(<span class="str">$"Somma 1-100: {somma}"</span>);  <span class="cm">// 5050</span>

<span class="cm">// Conto alla rovescia con messaggio finale:</span>
<span class="kw">for</span> (<span class="ty">int</span> i = <span class="num">10</span>; i &gt;= <span class="num">1</span>; i--) {
    Console.<span class="fn">WriteLine</span>(<span class="str">$"Lancio tra {i}..."</span>);
}
Console.<span class="fn">WriteLine</span>(<span class="str">"LANCIO!"</span>);

<span class="cm">// Trovare il primo multiplo di 7 dopo 50:</span>
<span class="kw">for</span> (<span class="ty">int</span> i = <span class="num">51</span>; i &lt; <span class="num">200</span>; i++) {
    <span class="kw">if</span> (i % <span class="num">7</span> == <span class="num">0</span>) {
        Console.<span class="fn">WriteLine</span>(<span class="str">$"Primo multiplo di 7 dopo 50: {i}"</span>);
        <span class="kw">break</span>;
    }
}

<span class="cm">// Stampare numeri da input dell'utente:</span>
Console.<span class="fn">Write</span>(<span class="str">"Fino a che numero? "</span>);
<span class="ty">int</span>.<span class="fn">TryParse</span>(Console.<span class="fn">ReadLine</span>(), <span class="kw">out int</span> fine);
<span class="kw">for</span> (<span class="ty">int</span> i = <span class="num">1</span>; i &lt;= fine; i++)
    Console.<span class="fn">Write</span>(<span class="str">$"{i} "</span>);</pre>

    <h4>Progetto — Tavola pitagorica completa</h4>
    <pre>Console.<span class="fn">WriteLine</span>(<span class="str">"=== TAVOLA PITAGORICA ==="</span>);
Console.<span class="fn">Write</span>(<span class="str">$"{"",4}"</span>);
<span class="kw">for</span> (<span class="ty">int</span> i = <span class="num">1</span>; i &lt;= <span class="num">10</span>; i++) Console.<span class="fn">Write</span>(<span class="str">$"{i,4}"</span>);
Console.<span class="fn">WriteLine</span>();
Console.<span class="fn">WriteLine</span>(<span class="kw">new</span> <span class="ty">string</span>(<span class="str">'-'</span>, <span class="num">44</span>));

<span class="kw">for</span> (<span class="ty">int</span> i = <span class="num">1</span>; i &lt;= <span class="num">10</span>; i++) {
    Console.<span class="fn">Write</span>(<span class="str">$"{i,3}|"</span>);
    <span class="kw">for</span> (<span class="ty">int</span> j = <span class="num">1</span>; j &lt;= <span class="num">10</span>; j++)
        Console.<span class="fn">Write</span>(<span class="str">$"{i*j,4}"</span>);
    Console.<span class="fn">WriteLine</span>();
}</pre>

    <h4>Errori comuni</h4>
    <pre><span class="cm">// 1. Ciclo infinito — condizione sempre vera:</span>
<span class="cm">// for (int i = 0; i &gt;= 0; i++)   ← non si ferma mai!</span>

<span class="cm">// 2. Off-by-one — indice sbagliato di 1:</span>
<span class="ty">string</span>[] nomi = { <span class="str">"A"</span>, <span class="str">"B"</span>, <span class="str">"C"</span> };
<span class="cm">// for (int i = 0; i &lt;= nomi.Length; i++)   ← CRASH all'ultimo giro!</span>
<span class="kw">for</span> (<span class="ty">int</span> i = <span class="num">0</span>; i &lt; nomi.Length; i++)    <span class="cm">// OK — &lt; non &lt;=</span>
    Console.<span class="fn">WriteLine</span>(nomi[i]);

<span class="cm">// 3. Modificare i dentro il ciclo:</span>
<span class="kw">for</span> (<span class="ty">int</span> i = <span class="num">0</span>; i &lt; <span class="num">10</span>; i++) {
    <span class="cm">// i = 5;  ← cattiva pratica, causa comportamenti imprevedibili</span>
}

<span class="cm">// 4. Variabile i usata fuori dal ciclo:</span>
<span class="kw">for</span> (<span class="ty">int</span> i = <span class="num">0</span>; i &lt; <span class="num">5</span>; i++) { }
<span class="cm">// Console.WriteLine(i);  ← ERRORE! i non esiste fuori dal for</span></pre>

    <h4>Esercizi</h4>
    <pre><span class="cm">// FACILE:</span>
<span class="cm">// 1. Stampa tutti i numeri da 1 a 20</span>
<span class="cm">// 2. Stampa solo i numeri dispari da 1 a 30</span>
<span class="cm">// 3. Calcola la somma dei numeri da 1 a N (N inserito dall'utente)</span>
<span class="cm">// MEDIO:</span>
<span class="cm">// 4. Tavola del 7 (da 7x1 a 7x10)</span>
<span class="cm">// 5. Trova tutti i multipli di 3 e 5 tra 1 e 100</span>
<span class="cm">// 6. Calcola N! (fattoriale) con un ciclo for</span>
<span class="cm">// DIFFICILE:</span>
<span class="cm">// 7. Stampa un quadrato N×N di asterischi</span>
<span class="cm">// 8. Trova tutti i numeri primi tra 2 e 100</span>
<span class="cm">// 9. Sequenza di Fibonacci fino a N termini</span></pre>

    <h4>Soluzioni</h4>
    <pre><span class="cm">// --- 1. ---</span>
<span class="kw">for</span> (<span class="ty">int</span> i = <span class="num">1</span>; i &lt;= <span class="num">20</span>; i++) Console.<span class="fn">Write</span>(<span class="str">$"{i} "</span>);

<span class="cm">// --- 2. ---</span>
<span class="kw">for</span> (<span class="ty">int</span> i = <span class="num">1</span>; i &lt;= <span class="num">30</span>; i += <span class="num">2</span>) Console.<span class="fn">Write</span>(<span class="str">$"{i} "</span>);

<span class="cm">// --- 3. ---</span>
Console.<span class="fn">Write</span>(<span class="str">"N: "</span>); <span class="ty">int</span>.<span class="fn">TryParse</span>(Console.<span class="fn">ReadLine</span>(), <span class="kw">out int</span> n3);
<span class="ty">int</span> s3 = <span class="num">0</span>; <span class="kw">for</span> (<span class="ty">int</span> i = <span class="num">1</span>; i &lt;= n3; i++) s3 += i;
Console.<span class="fn">WriteLine</span>(<span class="str">$"Somma 1-{n3}: {s3}"</span>);

<span class="cm">// --- 4. ---</span>
<span class="kw">for</span> (<span class="ty">int</span> i = <span class="num">1</span>; i &lt;= <span class="num">10</span>; i++) Console.<span class="fn">WriteLine</span>(<span class="str">$"7 x {i} = {7*i}"</span>);

<span class="cm">// --- 5. ---</span>
<span class="kw">for</span> (<span class="ty">int</span> i = <span class="num">1</span>; i &lt;= <span class="num">100</span>; i++)
    <span class="kw">if</span> (i%<span class="num">3</span>==<span class="num">0</span> &amp;&amp; i%<span class="num">5</span>==<span class="num">0</span>) Console.<span class="fn">Write</span>(<span class="str">$"{i} "</span>);

<span class="cm">// --- 6. ---</span>
Console.<span class="fn">Write</span>(<span class="str">"N: "</span>); <span class="ty">int</span>.<span class="fn">TryParse</span>(Console.<span class="fn">ReadLine</span>(), <span class="kw">out int</span> n6);
<span class="ty">long</span> f = <span class="num">1</span>; <span class="kw">for</span> (<span class="ty">int</span> i = <span class="num">2</span>; i &lt;= n6; i++) f *= i;
Console.<span class="fn">WriteLine</span>(<span class="str">$"{n6}! = {f}"</span>);

<span class="cm">// --- 7. ---</span>
Console.<span class="fn">Write</span>(<span class="str">"Dimensione: "</span>); <span class="ty">int</span>.<span class="fn">TryParse</span>(Console.<span class="fn">ReadLine</span>(), <span class="kw">out int</span> dim);
<span class="kw">for</span> (<span class="ty">int</span> i = <span class="num">0</span>; i &lt; dim; i++) {
    <span class="kw">for</span> (<span class="ty">int</span> j = <span class="num">0</span>; j &lt; dim; j++) Console.<span class="fn">Write</span>(<span class="str">"* "</span>);
    Console.<span class="fn">WriteLine</span>();
}

<span class="cm">// --- 8. ---</span>
<span class="kw">for</span> (<span class="ty">int</span> n = <span class="num">2</span>; n &lt;= <span class="num">100</span>; n++) {
    <span class="ty">bool</span> primo = <span class="kw">true</span>;
    <span class="kw">for</span> (<span class="ty">int</span> d = <span class="num">2</span>; d &lt;= Math.<span class="fn">Sqrt</span>(n) &amp;&amp; primo; d++)
        <span class="kw">if</span> (n % d == <span class="num">0</span>) primo = <span class="kw">false</span>;
    <span class="kw">if</span> (primo) Console.<span class="fn">Write</span>(<span class="str">$"{n} "</span>);
}

<span class="cm">// --- 9. ---</span>
Console.<span class="fn">Write</span>(<span class="str">"Termini: "</span>); <span class="ty">int</span>.<span class="fn">TryParse</span>(Console.<span class="fn">ReadLine</span>(), <span class="kw">out int</span> fib);
<span class="ty">long</span> a9 = <span class="num">0</span>, b9 = <span class="num">1</span>;
<span class="kw">for</span> (<span class="ty">int</span> i = <span class="num">0</span>; i &lt; fib; i++) {
    Console.<span class="fn">Write</span>(<span class="str">$"{a9} "</span>);
    (<span class="ty">long</span> tmp) = a9 + b9; a9 = b9; b9 = tmp;
}</pre>

  </div>
</div>
      <!-- 7. Ciclo while / do-while -->
<div class="topic-card">
  <div class="topic-header" onclick="toggle(this.closest('.topic-card'))"><div><h3>7. Ciclo while / do-while</h3><div class="topic-sub">Condizione prima/dopo, input utente, loop infinito, menu interattivo</div></div><span class="arrow">▼</span></div>
  <div class="topic-body">

    <h4>while — condizione controllata PRIMA</h4>
    <pre><span class="cm">// Sintassi: while (condizione) { ... }</span>
<span class="cm">// Se la condizione è falsa subito, il blocco NON esegue mai.</span>

<span class="ty">int</span> i = <span class="num">0</span>;
<span class="kw">while</span> (i &lt; <span class="num">5</span>) {
    Console.<span class="fn">WriteLine</span>(<span class="str">$"i = {i}"</span>);
    i++;  <span class="cm">// FONDAMENTALE: senza questo, ciclo infinito!</span>
}

<span class="cm">// Conta al contrario:</span>
<span class="ty">int</span> cont = <span class="num">10</span>;
<span class="kw">while</span> (cont &gt;= <span class="num">0</span>) {
    Console.<span class="fn">Write</span>(<span class="str">$"{cont} "</span>);
    cont--;
}</pre>

    <h4>do-while — condizione controllata DOPO</h4>
    <pre><span class="cm">// Il blocco esegue ALMENO UNA VOLTA, poi controlla la condizione.</span>
<span class="ty">int</span> n = <span class="num">10</span>;
<span class="kw">do</span> {
    Console.<span class="fn">WriteLine</span>(<span class="str">$"n = {n}"</span>);
    n--;
} <span class="kw">while</span> (n &gt; <span class="num">0</span>);

<span class="cm">// Tipico uso: menu che mostra almeno una volta</span>
<span class="ty">string</span> scelta;
<span class="kw">do</span> {
    Console.<span class="fn">WriteLine</span>(<span class="str">"1. Gioca  0. Esci"</span>);
    Console.<span class="fn">Write</span>(<span class="str">"Scelta: "</span>);
    scelta = Console.<span class="fn">ReadLine</span>();
} <span class="kw">while</span> (scelta != <span class="str">"0"</span>);</pre>
    <table>
      <tr><th></th><th>for</th><th>while</th><th>do-while</th></tr>
      <tr><td>Quando usarlo</td><td>Iterazioni note</td><td>Iterazioni non note</td><td>Almeno 1 volta</td></tr>
      <tr><td>Condizione</td><td>Prima</td><td>Prima</td><td>Dopo</td></tr>
      <tr><td>Caso tipico</td><td>Scorrere array</td><td>Input utente</td><td>Menu interattivo</td></tr>
      <tr><td>Esegue se falso</td><td>No</td><td>No</td><td>Sì (1 volta)</td></tr>
    </table>

    <h4>Usi pratici del while</h4>
    <pre><span class="cm">// 1. Input valido (chiedi finché non è corretto):</span>
<span class="ty">int</span> eta;
<span class="kw">while</span> (<span class="kw">true</span>) {
    Console.<span class="fn">Write</span>(<span class="str">"Eta&apos; (0-120): "</span>);
    <span class="kw">if</span> (<span class="ty">int</span>.<span class="fn">TryParse</span>(Console.<span class="fn">ReadLine</span>(), <span class="kw">out</span> eta) &amp;&amp; eta &gt;= <span class="num">0</span> &amp;&amp; eta &lt;= <span class="num">120</span>)
        <span class="kw">break</span>;
    Console.<span class="fn">WriteLine</span>(<span class="str">"Valore non valido! Riprova."</span>);
}
Console.<span class="fn">WriteLine</span>(<span class="str">$"Eta&apos; inserita: {eta}"</span>);

<span class="cm">// 2. Somma finché l'utente non inserisce 0:</span>
<span class="ty">int</span> totale = <span class="num">0</span>, numero = -<span class="num">1</span>;
<span class="kw">while</span> (numero != <span class="num">0</span>) {
    Console.<span class="fn">Write</span>(<span class="str">"Numero (0 per finire): "</span>);
    <span class="ty">int</span>.<span class="fn">TryParse</span>(Console.<span class="fn">ReadLine</span>(), <span class="kw">out</span> numero);
    totale += numero;
}
Console.<span class="fn">WriteLine</span>(<span class="str">$"Totale: {totale}"</span>);

<span class="cm">// 3. Gioco: indovina il numero:</span>
Random rnd = <span class="kw">new</span> Random();
<span class="ty">int</span> segreto = rnd.<span class="fn">Next</span>(<span class="num">1</span>, <span class="num">101</span>);
<span class="ty">int</span> tentativo = <span class="num">0</span>, tentativi = <span class="num">0</span>;
<span class="kw">while</span> (tentativo != segreto) {
    Console.<span class="fn">Write</span>(<span class="str">"Indovina (1-100): "</span>);
    <span class="ty">int</span>.<span class="fn">TryParse</span>(Console.<span class="fn">ReadLine</span>(), <span class="kw">out</span> tentativo);
    tentativi++;
    <span class="kw">if</span>      (tentativo &lt; segreto) Console.<span class="fn">WriteLine</span>(<span class="str">"Troppo basso!"</span>);
    <span class="kw">else if</span> (tentativo &gt; segreto) Console.<span class="fn">WriteLine</span>(<span class="str">"Troppo alto!"</span>);
}
Console.<span class="fn">WriteLine</span>(<span class="str">$"Bravo! Trovato in {tentativi} tentativi!"</span>);</pre>

    <h4>Loop infinito controllato</h4>
    <pre><span class="cm">// while(true) + break è il pattern più comune per menu:</span>
<span class="kw">while</span> (<span class="kw">true</span>) {
    Console.<span class="fn">WriteLine</span>(<span class="str">"\n1. Opzione A  2. Opzione B  0. Esci"</span>);
    Console.<span class="fn">Write</span>(<span class="str">"Scelta: "</span>);
    <span class="ty">string</span> s = Console.<span class="fn">ReadLine</span>();
    <span class="kw">if</span>      (s == <span class="str">"1"</span>) Console.<span class="fn">WriteLine</span>(<span class="str">"Hai scelto A"</span>);
    <span class="kw">else if</span> (s == <span class="str">"2"</span>) Console.<span class="fn">WriteLine</span>(<span class="str">"Hai scelto B"</span>);
    <span class="kw">else if</span> (s == <span class="str">"0"</span>) { Console.<span class="fn">WriteLine</span>(<span class="str">"Arrivederci!"</span>); <span class="kw">break</span>; }
    <span class="kw">else</span>              Console.<span class="fn">WriteLine</span>(<span class="str">"Scelta non valida"</span>);
}</pre>

    <h4>Progetto — Gioco della vita (conto punti)</h4>
    <pre><span class="ty">int</span> vite = <span class="num">3</span>, punteggio = <span class="num">0</span>, livello = <span class="num">1</span>;
Random r = <span class="kw">new</span> Random();

<span class="kw">while</span> (vite &gt; <span class="num">0</span>) {
    Console.<span class="fn">WriteLine</span>(<span class="str">$"\n[Livello {livello}] Vite: {vite} Punti: {punteggio}"</span>);
    <span class="ty">int</span> risposta = r.<span class="fn">Next</span>(<span class="num">1</span>, <span class="num">11</span>);
    Console.<span class="fn">Write</span>(<span class="str">$"Numero segreto tra 1 e 10, hai 1 tentativo: "</span>);
    <span class="ty">int</span>.<span class="fn">TryParse</span>(Console.<span class="fn">ReadLine</span>(), <span class="kw">out int</span> guess);
    <span class="kw">if</span> (guess == risposta) {
        punteggio += livello * <span class="num">10</span>;
        Console.<span class="fn">WriteLine</span>(<span class="str">$"ESATTO! +{livello*10} punti!"</span>);
        livello++;
    } <span class="kw">else</span> {
        vite--;
        Console.<span class="fn">WriteLine</span>(<span class="str">$"Sbagliato! Era {risposta}. Vite rimaste: {vite}"</span>);
    }
}
Console.<span class="fn">WriteLine</span>(<span class="str">$"\nGame Over! Punteggio finale: {punteggio} (Livello {livello})"</span>);</pre>

    <h4>Errori comuni</h4>
    <pre><span class="cm">// 1. Ciclo infinito — dimenticare di aggiornare la variabile:</span>
<span class="ty">int</span> x = <span class="num">0</span>;
<span class="kw">while</span> (x &lt; <span class="num">5</span>) {
    Console.<span class="fn">WriteLine</span>(x);
    <span class="cm">// x++;  ← dimenticato! ciclo infinito</span>
}

<span class="cm">// 2. Condizione errata — mai vera:</span>
<span class="ty">int</span> y = <span class="num">10</span>;
<span class="kw">while</span> (y &lt; <span class="num">5</span>) {  <span class="cm">// falsa subito, non esegue mai</span>
    Console.<span class="fn">WriteLine</span>(y);
}

<span class="cm">// 3. do-while con ; mancante:</span>
<span class="kw">do</span> {
    Console.<span class="fn">WriteLine</span>(<span class="str">"Ciao"</span>);
} <span class="kw">while</span> (<span class="kw">false</span>)  <span class="cm">// ← manca il ; finale!</span></pre>

    <h4>Esercizi</h4>
    <pre><span class="cm">// FACILE:</span>
<span class="cm">// 1. Chiedi numeri all'utente finché non inserisce un negativo, poi mostra la somma</span>
<span class="cm">// 2. Conta quante volte l'utente inserisce "si" prima di inserire "no"</span>
<span class="cm">// 3. Mostra un menu con 3 opzioni usando do-while</span>
<span class="cm">// MEDIO:</span>
<span class="cm">// 4. Indovina il numero (con hints "troppo alto/basso" e conta i tentativi)</span>
<span class="cm">// 5. Chiedi password finché non è corretta (max 3 tentativi)</span>
<span class="cm">// 6. Calcola la media di numeri inseriti dall'utente (0 per terminare)</span>
<span class="cm">// DIFFICILE:</span>
<span class="cm">// 7. Simulatore cassa automatica (inserisci monete finché non copri il prezzo)</span>
<span class="cm">// 8. Gioco del 21 (somma carte, non superare 21)</span>
<span class="cm">// 9. Conversa con l'utente finché non scrive "esci" (eco dei messaggi)</span></pre>

    <h4>Soluzioni</h4>
    <pre><span class="cm">// --- 1. Somma finché negativo ---</span>
<span class="ty">int</span> s1=<span class="num">0</span>, n1;
<span class="kw">do</span> { Console.<span class="fn">Write</span>(<span class="str">"Numero: "</span>); <span class="ty">int</span>.<span class="fn">TryParse</span>(Console.<span class="fn">ReadLine</span>(),<span class="kw">out</span> n1); <span class="kw">if</span>(n1&gt;=<span class="num">0</span>) s1+=n1; } <span class="kw">while</span>(n1&gt;=<span class="num">0</span>);
Console.<span class="fn">WriteLine</span>(<span class="str">$"Somma: {s1}"</span>);

<span class="cm">// --- 2. Conta "si" ---</span>
<span class="ty">int</span> cnt2=<span class="num">0</span>; <span class="ty">string</span> r2;
<span class="kw">while</span>((r2=Console.<span class="fn">ReadLine</span>().<span class="fn">ToLower</span>())!=<span class="str">"no"</span>) <span class="kw">if</span>(r2==<span class="str">"si"</span>) cnt2++;
Console.<span class="fn">WriteLine</span>(<span class="str">$"Hai detto si {cnt2} volte"</span>);

<span class="cm">// --- 3. Menu do-while ---</span>
<span class="ty">string</span> sc3;
<span class="kw">do</span> {
    Console.<span class="fn">WriteLine</span>(<span class="str">"1.Saluta 2.Calcola 0.Esci"</span>);
    sc3=Console.<span class="fn">ReadLine</span>();
    <span class="kw">if</span>(sc3==<span class="str">"1"</span>) Console.<span class="fn">WriteLine</span>(<span class="str">"Ciao!"</span>);
    <span class="kw">else if</span>(sc3==<span class="str">"2"</span>) Console.<span class="fn">WriteLine</span>(<span class="str">"2+2=4"</span>);
} <span class="kw">while</span>(sc3!=<span class="str">"0"</span>);

<span class="cm">// --- 4. Indovina numero ---</span>
<span class="ty">int</span> seg=<span class="kw">new</span> Random().<span class="fn">Next</span>(<span class="num">1</span>,<span class="num">101</span>), tent4=<span class="num">0</span>, cnt4=<span class="num">0</span>;
<span class="kw">while</span>(tent4!=seg){Console.<span class="fn">Write</span>(<span class="str">"Indovina: "</span>);<span class="ty">int</span>.<span class="fn">TryParse</span>(Console.<span class="fn">ReadLine</span>(),<span class="kw">out</span> tent4);cnt4++;
    <span class="kw">if</span>(tent4&lt;seg)Console.<span class="fn">WriteLine</span>(<span class="str">"Troppo basso!"</span>);<span class="kw">else if</span>(tent4&gt;seg)Console.<span class="fn">WriteLine</span>(<span class="str">"Troppo alto!"</span>);}
Console.<span class="fn">WriteLine</span>(<span class="str">$"Trovato in {cnt4} tentativi!"</span>);

<span class="cm">// --- 5. Password ---</span>
<span class="kw">const</span> <span class="ty">string</span> PWD=<span class="str">"segreto"</span>; <span class="ty">int</span> t5=<span class="num">3</span>;
<span class="kw">while</span>(t5&gt;<span class="num">0</span>){Console.<span class="fn">Write</span>(<span class="str">$"Password ({t5} tentativi): "</span>);
    <span class="kw">if</span>(Console.<span class="fn">ReadLine</span>()==PWD){Console.<span class="fn">WriteLine</span>(<span class="str">"Accesso!"</span>);t5=-<span class="num">1</span>;}
    <span class="kw">else</span>{t5--;Console.<span class="fn">WriteLine</span>(<span class="str">"Errata!"</span>);}}
<span class="kw">if</span>(t5==<span class="num">0</span>) Console.<span class="fn">WriteLine</span>(<span class="str">"Bloccato!"</span>);

<span class="cm">// --- 6. Media ---</span>
<span class="ty">double</span> sum6=<span class="num">0</span>; <span class="ty">int</span> cnt6=<span class="num">0</span>, n6;
<span class="kw">while</span>(<span class="kw">true</span>){Console.<span class="fn">Write</span>(<span class="str">"Numero (0 fine): "</span>);<span class="ty">int</span>.<span class="fn">TryParse</span>(Console.<span class="fn">ReadLine</span>(),<span class="kw">out</span> n6);
    <span class="kw">if</span>(n6==<span class="num">0</span>)<span class="kw">break</span>;sum6+=n6;cnt6++;}
Console.<span class="fn">WriteLine</span>(cnt6&gt;<span class="num">0</span>?<span class="str">$"Media: {sum6/cnt6:F2}"</span>:<span class="str">"Nessun numero"</span>);

<span class="cm">// --- 7. Cassa ---</span>
<span class="ty">decimal</span> prezzo=<span class="num">1.80m</span>, inserito=<span class="num">0</span>;
Console.<span class="fn">WriteLine</span>(<span class="str">$"Prezzo: {prezzo:C}"</span>);
<span class="kw">while</span>(inserito&lt;prezzo){Console.<span class="fn">Write</span>(<span class="str">"Inserisci moneta: "</span>);
    <span class="ty">decimal</span>.<span class="fn">TryParse</span>(Console.<span class="fn">ReadLine</span>(),<span class="kw">out decimal</span> m);inserito+=m;
    Console.<span class="fn">WriteLine</span>(<span class="str">$"Inserito: {inserito:C} Mancano: {Math.Max(0,prezzo-inserito):C}"</span>);}
Console.<span class="fn">WriteLine</span>(<span class="str">$"Grazie! Resto: {inserito-prezzo:C}"</span>);

<span class="cm">// --- 8. Gioco del 21 ---</span>
Random r8=<span class="kw">new</span> Random(); <span class="ty">int</span> tot8=<span class="num">0</span>;
<span class="kw">while</span>(tot8&lt;<span class="num">21</span>){<span class="ty">int</span> carta=r8.<span class="fn">Next</span>(<span class="num">1</span>,<span class="num">11</span>);tot8+=carta;
    Console.<span class="fn">WriteLine</span>(<span class="str">$"Carta: {carta}  Totale: {tot8}"</span>);
    <span class="kw">if</span>(tot8&gt;=<span class="num">21</span>)<span class="kw">break</span>;
    Console.<span class="fn">Write</span>(<span class="str">"Altra carta? s/n: "</span>);
    <span class="kw">if</span>(Console.<span class="fn">ReadLine</span>().<span class="fn">ToLower</span>()!=<span class="str">"s"</span>)<span class="kw">break</span>;}
Console.<span class="fn">WriteLine</span>(tot8==<span class="num">21</span>?<span class="str">"21! PERFETTO!"</span>:tot8&gt;<span class="num">21</span>?<span class="str">"Sballato!"</span>:<span class="str">$"Totale: {tot8}"</span>);

<span class="cm">// --- 9. Eco ---</span>
<span class="ty">string</span> msg9;
<span class="kw">while</span>((msg9=Console.<span class="fn">ReadLine</span>()).<span class="fn">ToLower</span>()!=<span class="str">"esci"</span>)
    Console.<span class="fn">WriteLine</span>(<span class="str">$"Hai scritto: {msg9}"</span>);</pre>

  </div>
</div>
      <!-- 8. Array & foreach -->
<div class="topic-card">
  <div class="topic-header" onclick="toggle(this.closest('.topic-card'))"><div><h3>8. Array &amp; foreach</h3><div class="topic-sub">Array fisso, indici, foreach, 2D, metodi Array, errori comuni</div></div><span class="arrow">▼</span></div>
  <div class="topic-body">

    <h4>Cos'è un array?</h4>
    <pre><span class="cm">// Un array è una sequenza di elementi dello STESSO tipo, a dimensione FISSA.</span>
<span class="cm">// L'indice parte sempre da 0!</span>

<span class="cm">// Dichiarazione vuota (tutti i valori = 0 o null):</span>
<span class="ty">int</span>[] numeri = <span class="kw">new</span> <span class="ty">int</span>[<span class="num">5</span>];   <span class="cm">// [0, 0, 0, 0, 0]</span>

<span class="cm">// Dichiarazione con valori:</span>
<span class="ty">int</span>[]    voti  = { <span class="num">7</span>, <span class="num">8</span>, <span class="num">6</span>, <span class="num">9</span>, <span class="num">7</span> };
<span class="ty">string</span>[] nomi  = { <span class="str">"Marco"</span>, <span class="str">"Giulia"</span>, <span class="str">"Luca"</span> };
<span class="ty">bool</span>[]   flags = { <span class="kw">true</span>, <span class="kw">false</span>, <span class="kw">true</span> };

<span class="cm">// Accesso per indice:</span>
Console.<span class="fn">WriteLine</span>(voti[<span class="num">0</span>]);   <span class="cm">// 7 — primo elemento</span>
Console.<span class="fn">WriteLine</span>(voti[<span class="num">4</span>]);   <span class="cm">// 7 — ultimo elemento</span>
Console.<span class="fn">WriteLine</span>(voti[voti.Length - <span class="num">1</span>]); <span class="cm">// 7 — ultimo (generico)</span>

<span class="cm">// Modificare un elemento:</span>
voti[<span class="num">2</span>] = <span class="num">10</span>;  <span class="cm">// ora è [7, 8, 10, 9, 7]</span>

<span class="cm">// Lunghezza dell'array:</span>
Console.<span class="fn">WriteLine</span>(voti.Length);  <span class="cm">// 5</span></pre>

    <h4>Ciclo for su array</h4>
    <pre><span class="ty">string</span>[] frutti = { <span class="str">"Mela"</span>, <span class="str">"Banana"</span>, <span class="str">"Arancia"</span>, <span class="str">"Pera"</span> };

<span class="cm">// Scorrere con for (puoi modificare gli elementi):</span>
<span class="kw">for</span> (<span class="ty">int</span> i = <span class="num">0</span>; i &lt; frutti.Length; i++)
    Console.<span class="fn">WriteLine</span>(<span class="str">$"{i}: {frutti[i]}"</span>);

<span class="cm">// Scorrere al contrario:</span>
<span class="kw">for</span> (<span class="ty">int</span> i = frutti.Length - <span class="num">1</span>; i &gt;= <span class="num">0</span>; i--)
    Console.<span class="fn">Write</span>(<span class="str">$"{frutti[i]} "</span>);

<span class="cm">// Calcolo somma e media:</span>
<span class="ty">int</span>[] punteggi = { <span class="num">85</span>, <span class="num">92</span>, <span class="num">78</span>, <span class="num">95</span>, <span class="num">88</span> };
<span class="ty">int</span> somma = <span class="num">0</span>;
<span class="kw">for</span> (<span class="ty">int</span> i = <span class="num">0</span>; i &lt; punteggi.Length; i++) somma += punteggi[i];
Console.<span class="fn">WriteLine</span>(<span class="str">$"Somma: {somma}  Media: {somma/(double)punteggi.Length:F1}"</span>);</pre>

    <h4>foreach — la forma più semplice</h4>
    <pre><span class="cm">// foreach è ideale quando non hai bisogno dell'indice:</span>
<span class="kw">foreach</span> (<span class="ty">string</span> frutto <span class="kw">in</span> frutti)
    Console.<span class="fn">WriteLine</span>(frutto);

<span class="cm">// Somma con foreach:</span>
<span class="ty">int</span> totale = <span class="num">0</span>;
<span class="kw">foreach</span> (<span class="ty">int</span> p <span class="kw">in</span> punteggi) totale += p;

<span class="cm">// ATTENZIONE: non puoi modificare gli elementi con foreach!</span>
<span class="kw">foreach</span> (<span class="ty">int</span> n <span class="kw">in</span> punteggi) {
    <span class="cm">// n = n * 2;  ← ERRORE! non si può modificare</span>
}
<span class="cm">// Per modificare, usa for con indice.</span></pre>
    <table>
      <tr><th></th><th>for</th><th>foreach</th></tr>
      <tr><td>Accesso indice</td><td>Sì</td><td>No</td></tr>
      <tr><td>Modifica elementi</td><td>Sì</td><td>No</td></tr>
      <tr><td>Leggibilità</td><td>Media</td><td>Alta</td></tr>
      <tr><td>Usalo per</td><td>Modifica, indice necessario</td><td>Solo lettura</td></tr>
    </table>

    <h4>Metodi della classe Array</h4>
    <pre><span class="ty">int</span>[] n = { <span class="num">5</span>, <span class="num">2</span>, <span class="num">8</span>, <span class="num">1</span>, <span class="num">9</span>, <span class="num">3</span> };

Array.<span class="fn">Sort</span>(n);                      <span class="cm">// ordina: [1, 2, 3, 5, 8, 9]</span>
Array.<span class="fn">Reverse</span>(n);                   <span class="cm">// inverte: [9, 8, 5, 3, 2, 1]</span>
<span class="ty">int</span> pos = Array.<span class="fn">IndexOf</span>(n, <span class="num">5</span>);     <span class="cm">// 2 — posizione del valore 5</span>
Array.<span class="fn">Clear</span>(n, <span class="num">0</span>, n.Length);       <span class="cm">// azzera tutti: [0,0,0,0,0,0]</span>

<span class="cm">// Copiare un array:</span>
<span class="ty">int</span>[] copia = (<span class="ty">int</span>[])n.<span class="fn">Clone</span>();   <span class="cm">// copia indipendente</span>
Array.<span class="fn">Copy</span>(n, copia, n.Length);    <span class="cm">// copia in array esistente</span>

<span class="cm">// Min, Max, Sum (con LINQ — using System.Linq):</span>
Console.<span class="fn">WriteLine</span>(n.<span class="fn">Min</span>());  <span class="cm">// 1</span>
Console.<span class="fn">WriteLine</span>(n.<span class="fn">Max</span>());  <span class="cm">// 9</span>
Console.<span class="fn">WriteLine</span>(n.<span class="fn">Sum</span>());  <span class="cm">// 28</span></pre>

    <h4>Array 2D (griglia)</h4>
    <pre><span class="cm">// Matrice 3 righe × 4 colonne:</span>
<span class="ty">int</span>[,] griglia = {
    { <span class="num">1</span>, <span class="num">2</span>, <span class="num">3</span>, <span class="num">4</span> },
    { <span class="num">5</span>, <span class="num">6</span>, <span class="num">7</span>, <span class="num">8</span> },
    { <span class="num">9</span>,<span class="num">10</span>,<span class="num">11</span>,<span class="num">12</span> }
};

Console.<span class="fn">WriteLine</span>(griglia[<span class="num">1</span>, <span class="num">2</span>]);    <span class="cm">// 7 — riga 1, colonna 2</span>
Console.<span class="fn">WriteLine</span>(griglia.<span class="fn">GetLength</span>(<span class="num">0</span>)); <span class="cm">// 3 — numero righe</span>
Console.<span class="fn">WriteLine</span>(griglia.<span class="fn">GetLength</span>(<span class="num">1</span>)); <span class="cm">// 4 — numero colonne</span>

<span class="cm">// Scorrere con cicli annidati:</span>
<span class="kw">for</span> (<span class="ty">int</span> r = <span class="num">0</span>; r &lt; griglia.<span class="fn">GetLength</span>(<span class="num">0</span>); r++) {
    <span class="kw">for</span> (<span class="ty">int</span> c = <span class="num">0</span>; c &lt; griglia.<span class="fn">GetLength</span>(<span class="num">1</span>); c++)
        Console.<span class="fn">Write</span>(<span class="str">$"{griglia[r,c],4}"</span>);
    Console.<span class="fn">WriteLine</span>();
}</pre>

    <h4>Progetto — Gestione voti classe</h4>
    <pre><span class="ty">string</span>[] studenti = { <span class="str">"Marco"</span>, <span class="str">"Giulia"</span>, <span class="str">"Luca"</span>, <span class="str">"Anna"</span>, <span class="str">"Paolo"</span> };
<span class="ty">int</span>[]    voti2    = <span class="kw">new</span> <span class="ty">int</span>[studenti.Length];

<span class="cm">// Inserimento voti:</span>
<span class="kw">for</span> (<span class="ty">int</span> i = <span class="num">0</span>; i &lt; studenti.Length; i++) {
    <span class="kw">while</span> (<span class="kw">true</span>) {
        Console.<span class="fn">Write</span>(<span class="str">$"Voto di {studenti[i]}: "</span>);
        <span class="kw">if</span> (<span class="ty">int</span>.<span class="fn">TryParse</span>(Console.<span class="fn">ReadLine</span>(), <span class="kw">out</span> voti2[i]) &amp;&amp; voti2[i] &gt;= <span class="num">0</span> &amp;&amp; voti2[i] &lt;= <span class="num">10</span>) <span class="kw">break</span>;
        Console.<span class="fn">WriteLine</span>(<span class="str">"Voto non valido (0-10)!"</span>);
    }
}

<span class="cm">// Statistiche:</span>
<span class="ty">int</span> sommaV = <span class="num">0</span>, maxV = voti2[<span class="num">0</span>], minV = voti2[<span class="num">0</span>];
<span class="ty">int</span> idxMax = <span class="num">0</span>, idxMin = <span class="num">0</span>;
<span class="kw">for</span> (<span class="ty">int</span> i = <span class="num">0</span>; i &lt; voti2.Length; i++) {
    sommaV += voti2[i];
    <span class="kw">if</span> (voti2[i] &gt; maxV) { maxV = voti2[i]; idxMax = i; }
    <span class="kw">if</span> (voti2[i] &lt; minV) { minV = voti2[i]; idxMin = i; }
}

Console.<span class="fn">WriteLine</span>(<span class="str">$"\nMedia: {sommaV/(double)voti2.Length:F2}"</span>);
Console.<span class="fn">WriteLine</span>(<span class="str">$"Migliore: {studenti[idxMax]} ({maxV})"</span>);
Console.<span class="fn">WriteLine</span>(<span class="str">$"Peggiore: {studenti[idxMin]} ({minV})"</span>);
<span class="kw">foreach</span> (<span class="ty">int</span> v <span class="kw">in</span> voti2) <span class="kw">if</span> (v &lt; <span class="num">6</span>) Console.<span class="fn">WriteLine</span>(<span class="str">$"{studenti[Array.IndexOf(voti2,v)]} insufficiente"</span>);</pre>

    <h4>Errori comuni</h4>
    <pre><span class="cm">// 1. IndexOutOfRangeException — indice fuori dai limiti:</span>
<span class="ty">int</span>[] arr = { <span class="num">1</span>, <span class="num">2</span>, <span class="num">3</span> };
<span class="cm">// arr[3];  ← CRASH! Indici validi: 0, 1, 2</span>
<span class="cm">// arr[-1]; ← CRASH! Gli indici non possono essere negativi</span>

<span class="cm">// 2. Array non inizializzato:</span>
<span class="ty">int</span>[] arr2;
<span class="cm">// Console.WriteLine(arr2[0]);  ← ERRORE! arr2 non è stato creato</span>
<span class="ty">int</span>[] arr3 = <span class="kw">new</span> <span class="ty">int</span>[<span class="num">3</span>];  <span class="cm">// OK</span>

<span class="cm">// 3. Confondere Length con l'ultimo indice:</span>
<span class="cm">// arr[arr.Length]     ← CRASH! Length=3, ultimo indice=2</span>
<span class="cm">// arr[arr.Length-1]   ← OK! Ultimo elemento</span>

<span class="cm">// 4. Copia per riferimento (non per valore!):</span>
<span class="ty">int</span>[] orig = { <span class="num">1</span>, <span class="num">2</span>, <span class="num">3</span> };
<span class="ty">int</span>[] copia2 = orig;   <span class="cm">// NON è una copia! Puntano allo stesso array</span>
copia2[<span class="num">0</span>] = <span class="num">99</span>;        <span class="cm">// modifica anche orig!</span>
<span class="ty">int</span>[] copiavera = (<span class="ty">int</span>[])orig.<span class="fn">Clone</span>();  <span class="cm">// copia vera</span></pre>

    <h4>Esercizi</h4>
    <pre><span class="cm">// FACILE:</span>
<span class="cm">// 1. Crea array di 5 numeri inseriti dall'utente, poi stampali</span>
<span class="cm">// 2. Trova il valore massimo in un array</span>
<span class="cm">// 3. Conta quanti elementi sono maggiori di 50</span>
<span class="cm">// MEDIO:</span>
<span class="cm">// 4. Inverti un array senza usare Array.Reverse</span>
<span class="cm">// 5. Verifica se un array è palindromo (uguale letto al contrario)</span>
<span class="cm">// 6. Calcola media e mostra chi è sopra/sotto la media</span>
<span class="cm">// DIFFICILE:</span>
<span class="cm">// 7. Ordina un array con bubble sort</span>
<span class="cm">// 8. Merge di due array ordinati in uno ordinato</span>
<span class="cm">// 9. Gestisci una rubrica con nomi e numeri in due array paralleli</span></pre>

    <h4>Soluzioni</h4>
    <pre><span class="cm">// --- 1. ---</span>
<span class="ty">int</span>[] a1 = <span class="kw">new</span> <span class="ty">int</span>[<span class="num">5</span>];
<span class="kw">for</span>(<span class="ty">int</span> i=<span class="num">0</span>;i&lt;<span class="num">5</span>;i++){Console.<span class="fn">Write</span>(<span class="str">$"Numero {i+1}: "</span>);<span class="ty">int</span>.<span class="fn">TryParse</span>(Console.<span class="fn">ReadLine</span>(),<span class="kw">out</span> a1[i]);}
<span class="kw">foreach</span>(<span class="ty">int</span> n <span class="kw">in</span> a1) Console.<span class="fn">Write</span>(<span class="str">$"{n} "</span>);

<span class="cm">// --- 2. ---</span>
<span class="ty">int</span>[] a2={<span class="num">3</span>,<span class="num">7</span>,<span class="num">1</span>,<span class="num">9</span>,<span class="num">4</span>}; <span class="ty">int</span> max2=a2[<span class="num">0</span>];
<span class="kw">foreach</span>(<span class="ty">int</span> n <span class="kw">in</span> a2) <span class="kw">if</span>(n&gt;max2) max2=n;
Console.<span class="fn">WriteLine</span>(<span class="str">$"Max: {max2}"</span>);

<span class="cm">// --- 3. ---</span>
<span class="ty">int</span>[] a3={<span class="num">10</span>,<span class="num">60</span>,<span class="num">45</span>,<span class="num">80</span>,<span class="num">30</span>,<span class="num">70</span>}; <span class="ty">int</span> cnt3=<span class="num">0</span>;
<span class="kw">foreach</span>(<span class="ty">int</span> n <span class="kw">in</span> a3) <span class="kw">if</span>(n&gt;<span class="num">50</span>) cnt3++;
Console.<span class="fn">WriteLine</span>(<span class="str">$"Maggiori di 50: {cnt3}"</span>);

<span class="cm">// --- 4. Inversione ---</span>
<span class="ty">int</span>[] a4={<span class="num">1</span>,<span class="num">2</span>,<span class="num">3</span>,<span class="num">4</span>,<span class="num">5</span>};
<span class="kw">for</span>(<span class="ty">int</span> i=<span class="num">0</span>;i&lt;a4.Length/<span class="num">2</span>;i++){<span class="ty">int</span> tmp=a4[i];a4[i]=a4[a4.Length-<span class="num">1</span>-i];a4[a4.Length-<span class="num">1</span>-i]=tmp;}
<span class="kw">foreach</span>(<span class="ty">int</span> n <span class="kw">in</span> a4) Console.<span class="fn">Write</span>(<span class="str">$"{n} "</span>);

<span class="cm">// --- 5. Palindromo ---</span>
<span class="ty">int</span>[] a5={<span class="num">1</span>,<span class="num">2</span>,<span class="num">3</span>,<span class="num">2</span>,<span class="num">1</span>}; <span class="ty">bool</span> pali=<span class="kw">true</span>;
<span class="kw">for</span>(<span class="ty">int</span> i=<span class="num">0</span>;i&lt;a5.Length/<span class="num">2</span>;i++) <span class="kw">if</span>(a5[i]!=a5[a5.Length-<span class="num">1</span>-i]){pali=<span class="kw">false</span>;<span class="kw">break</span>;}
Console.<span class="fn">WriteLine</span>(pali?<span class="str">"Palindromo"</span>:<span class="str">"Non palindromo"</span>);

<span class="cm">// --- 6. Media e sopra/sotto ---</span>
<span class="ty">int</span>[] a6={<span class="num">6</span>,<span class="num">8</span>,<span class="num">5</span>,<span class="num">9</span>,<span class="num">7</span>}; <span class="ty">double</span> med6=<span class="num">0</span>;
<span class="kw">foreach</span>(<span class="ty">int</span> n <span class="kw">in</span> a6) med6+=n; med6/=a6.Length;
Console.<span class="fn">WriteLine</span>(<span class="str">$"Media: {med6:F1}"</span>);
<span class="kw">for</span>(<span class="ty">int</span> i=<span class="num">0</span>;i&lt;a6.Length;i++)
    Console.<span class="fn">WriteLine</span>(<span class="str">$"{a6[i]}: {(a6[i]>=med6?"sopra":"sotto")} la media"</span>);

<span class="cm">// --- 7. Bubble sort ---</span>
<span class="ty">int</span>[] a7={<span class="num">5</span>,<span class="num">3</span>,<span class="num">8</span>,<span class="num">1</span>,<span class="num">9</span>};
<span class="kw">for</span>(<span class="ty">int</span> i=<span class="num">0</span>;i&lt;a7.Length-<span class="num">1</span>;i++)
    <span class="kw">for</span>(<span class="ty">int</span> j=<span class="num">0</span>;j&lt;a7.Length-<span class="num">1</span>-i;j++)
        <span class="kw">if</span>(a7[j]&gt;a7[j+<span class="num">1</span>]){<span class="ty">int</span> t=a7[j];a7[j]=a7[j+<span class="num">1</span>];a7[j+<span class="num">1</span>]=t;}
<span class="kw">foreach</span>(<span class="ty">int</span> n <span class="kw">in</span> a7) Console.<span class="fn">Write</span>(<span class="str">$"{n} "</span>);

<span class="cm">// --- 8. Merge ---</span>
<span class="ty">int</span>[] x8={<span class="num">1</span>,<span class="num">3</span>,<span class="num">5</span>}, y8={<span class="num">2</span>,<span class="num">4</span>,<span class="num">6</span>}, m8=<span class="kw">new</span> <span class="ty">int</span>[<span class="num">6</span>];
<span class="ty">int</span> ia=<span class="num">0</span>,ib=<span class="num">0</span>,ic=<span class="num">0</span>;
<span class="kw">while</span>(ia&lt;x8.Length&amp;&amp;ib&lt;y8.Length) m8[ic++]=(x8[ia]&lt;=y8[ib])?x8[ia++]:y8[ib++];
<span class="kw">while</span>(ia&lt;x8.Length) m8[ic++]=x8[ia++];
<span class="kw">while</span>(ib&lt;y8.Length) m8[ic++]=y8[ib++];
<span class="kw">foreach</span>(<span class="ty">int</span> n <span class="kw">in</span> m8) Console.<span class="fn">Write</span>(<span class="str">$"{n} "</span>);

<span class="cm">// --- 9. Rubrica ---</span>
<span class="ty">string</span>[] nRub=<span class="kw">new</span> <span class="ty">string</span>[<span class="num">5</span>]; <span class="ty">string</span>[] tRub=<span class="kw">new</span> <span class="ty">string</span>[<span class="num">5</span>]; <span class="ty">int</span> cnt9=<span class="num">0</span>;
<span class="kw">while</span>(cnt9&lt;<span class="num">5</span>){Console.<span class="fn">Write</span>(<span class="str">"Nome (fine per uscire): "</span>);<span class="ty">string</span> nn=Console.<span class="fn">ReadLine</span>();
    <span class="kw">if</span>(nn.<span class="fn">ToLower</span>()==<span class="str">"fine"</span>)<span class="kw">break</span>;
    Console.<span class="fn">Write</span>(<span class="str">"Tel: "</span>); nRub[cnt9]=nn; tRub[cnt9]=Console.<span class="fn">ReadLine</span>(); cnt9++;}
<span class="kw">for</span>(<span class="ty">int</span> i=<span class="num">0</span>;i&lt;cnt9;i++) Console.<span class="fn">WriteLine</span>(<span class="str">$"{nRub[i],-20} {tRub[i]}"</span>);</pre>

  </div>
</div>
      <!-- 9. List<T> -->
<div class="topic-card">
  <div class="topic-header" onclick="toggle(this.closest('.topic-card'))"><div><h3>9. List&lt;T&gt;</h3><div class="topic-sub">Array dinamico, Add/Remove/Find/Sort/Clear, confronto con Array</div></div><span class="arrow">▼</span></div>
  <div class="topic-body">

    <h4>Cos'è una List?</h4>
    <pre><span class="cm">// Una List è come un array, ma la sua dimensione cambia dinamicamente.</span>
<span class="cm">// Puoi aggiungere e rimuovere elementi in qualsiasi momento.</span>

<span class="kw">using</span> System.Collections.Generic;

<span class="cm">// Creare una lista vuota:</span>
List&lt;<span class="ty">string</span>&gt; nomi = <span class="kw">new</span> List&lt;<span class="ty">string</span>&gt;();
List&lt;<span class="ty">int</span>&gt;    numeri = <span class="kw">new</span> List&lt;<span class="ty">int</span>&gt;();

<span class="cm">// Creare con valori iniziali:</span>
List&lt;<span class="ty">string</span>&gt; frutti = <span class="kw">new</span> List&lt;<span class="ty">string</span>&gt; { <span class="str">"Mela"</span>, <span class="str">"Banana"</span>, <span class="str">"Arancia"</span> };

<span class="cm">// Accesso come array:</span>
Console.<span class="fn">WriteLine</span>(frutti[<span class="num">0</span>]);    <span class="cm">// "Mela"</span>
Console.<span class="fn">WriteLine</span>(frutti.Count);  <span class="cm">// 3 — usa Count, non Length!</span></pre>

    <h4>Aggiungere elementi</h4>
    <pre>List&lt;<span class="ty">string</span>&gt; lista = <span class="kw">new</span> List&lt;<span class="ty">string</span>&gt;();

lista.<span class="fn">Add</span>(<span class="str">"Marco"</span>);         <span class="cm">// aggiunge in fondo → ["Marco"]</span>
lista.<span class="fn">Add</span>(<span class="str">"Giulia"</span>);        <span class="cm">// → ["Marco", "Giulia"]</span>
lista.<span class="fn">Add</span>(<span class="str">"Luca"</span>);          <span class="cm">// → ["Marco", "Giulia", "Luca"]</span>

lista.<span class="fn">Insert</span>(<span class="num">1</span>, <span class="str">"Anna"</span>);   <span class="cm">// inserisce in posizione 1</span>
<span class="cm">// → ["Marco", "Anna", "Giulia", "Luca"]</span>

<span class="cm">// Aggiungere più elementi da array o altra lista:</span>
<span class="ty">string</span>[] nuovi = { <span class="str">"Sara"</span>, <span class="str">"Paolo"</span> };
lista.<span class="fn">AddRange</span>(nuovi);
<span class="cm">// → ["Marco", "Anna", "Giulia", "Luca", "Sara", "Paolo"]</span></pre>

    <h4>Rimuovere elementi</h4>
    <pre>lista.<span class="fn">Remove</span>(<span class="str">"Marco"</span>);    <span class="cm">// rimuove la prima occorrenza del valore</span>
lista.<span class="fn">RemoveAt</span>(<span class="num">0</span>);        <span class="cm">// rimuove l'elemento all'indice 0</span>
lista.<span class="fn">RemoveRange</span>(<span class="num">0</span>, <span class="num">2</span>); <span class="cm">// rimuove 2 elementi a partire dall'indice 0</span>
lista.<span class="fn">Clear</span>();             <span class="cm">// svuota completamente</span></pre>

    <h4>Cercare e verificare</h4>
    <pre>List&lt;<span class="ty">int</span>&gt; numeri2 = <span class="kw">new</span>() { <span class="num">10</span>, <span class="num">25</span>, <span class="num">8</span>, <span class="num">42</span>, <span class="num">15</span>, <span class="num">3</span> };

<span class="ty">bool</span> c1 = numeri2.<span class="fn">Contains</span>(<span class="num">42</span>);           <span class="cm">// true</span>
<span class="ty">int</span>  c2 = numeri2.<span class="fn">IndexOf</span>(<span class="num">25</span>);            <span class="cm">// 1 — posizione</span>

<span class="cm">// Find — cerca con una condizione (lambda):</span>
<span class="ty">int</span> trovato = numeri2.<span class="fn">Find</span>(n =&gt; n &gt; <span class="num">20</span>);              <span class="cm">// 25 — primo che supera 20</span>
List&lt;<span class="ty">int</span>&gt; tutti = numeri2.<span class="fn">FindAll</span>(n =&gt; n &gt; <span class="num">10</span>);      <span class="cm">// [25, 42, 15]</span>

<span class="cm">// Trovare nell'indice:</span>
<span class="ty">int</span> idx = numeri2.<span class="fn">FindIndex</span>(n =&gt; n &gt; <span class="num">40</span>);            <span class="cm">// 3</span>

<span class="cm">// Verificare con Any/All (LINQ):</span>
<span class="ty">bool</span> qualcuno = numeri2.<span class="fn">Any</span>(n =&gt; n &gt; <span class="num">40</span>);   <span class="cm">// true</span>
<span class="ty">bool</span> tutti2   = numeri2.<span class="fn">All</span>(n =&gt; n &gt; <span class="num">0</span>);    <span class="cm">// true</span></pre>

    <h4>Ordinare e trasformare</h4>
    <pre>List&lt;<span class="ty">string</span>&gt; nomi2 = <span class="kw">new</span>() { <span class="str">"Zara"</span>, <span class="str">"Marco"</span>, <span class="str">"Anna"</span>, <span class="str">"Luca"</span> };

nomi2.<span class="fn">Sort</span>();             <span class="cm">// ordine alfabetico</span>
nomi2.<span class="fn">Reverse</span>();          <span class="cm">// inverte l'ordine</span>

<span class="cm">// Ordine personalizzato (con lambda):</span>
nomi2.<span class="fn">Sort</span>((a, b) =&gt; a.Length.<span class="fn">CompareTo</span>(b.Length));  <span class="cm">// per lunghezza</span>

<span class="cm">// Convertire in array:</span>
<span class="ty">string</span>[] arr = nomi2.<span class="fn">ToArray</span>();

<span class="cm">// ForEach — esegui azione su ogni elemento:</span>
nomi2.<span class="fn">ForEach</span>(n =&gt; Console.<span class="fn">WriteLine</span>(n));</pre>
    <table>
      <tr><th>Operazione</th><th>Array</th><th>List&lt;T&gt;</th></tr>
      <tr><td>Dimensione</td><td>Fissa</td><td>Dinamica</td></tr>
      <tr><td>Lunghezza</td><td>.Length</td><td>.Count</td></tr>
      <tr><td>Aggiungere</td><td>Non possibile</td><td>.Add()</td></tr>
      <tr><td>Rimuovere</td><td>Non possibile</td><td>.Remove()</td></tr>
      <tr><td>Ricerca</td><td>Array.IndexOf</td><td>.Find(), .Contains()</td></tr>
      <tr><td>Usalo per</td><td>Dimensione nota e fissa</td><td>Dimensione variabile</td></tr>
    </table>

    <h4>Progetto — Lista della spesa</h4>
    <pre>List&lt;<span class="ty">string</span>&gt; spesa = <span class="kw">new</span> List&lt;<span class="ty">string</span>&gt;();
<span class="ty">bool</span> esci = <span class="kw">false</span>;

<span class="kw">while</span> (!esci) {
    Console.<span class="fn">WriteLine</span>(<span class="str">$"\nLista spesa ({spesa.Count} elementi):"</span>);
    <span class="kw">if</span> (spesa.Count == <span class="num">0</span>) Console.<span class="fn">WriteLine</span>(<span class="str">"  (vuota)"</span>);
    <span class="kw">else</span> <span class="kw">for</span> (<span class="ty">int</span> i = <span class="num">0</span>; i &lt; spesa.Count; i++)
        Console.<span class="fn">WriteLine</span>(<span class="str">$"  {i+1}. {spesa[i]}"</span>);

    Console.<span class="fn">WriteLine</span>(<span class="str">"1.Aggiungi 2.Rimuovi 3.Cerca 4.Ordina 0.Esci"</span>);
    Console.<span class="fn">Write</span>(<span class="str">"Scelta: "</span>);
    <span class="kw">switch</span> (Console.<span class="fn">ReadLine</span>()) {
        <span class="kw">case</span> <span class="str">"1"</span>:
            Console.<span class="fn">Write</span>(<span class="str">"Articolo: "</span>); <span class="ty">string</span> art = Console.<span class="fn">ReadLine</span>();
            <span class="kw">if</span> (!<span class="ty">string</span>.<span class="fn">IsNullOrWhiteSpace</span>(art)) { spesa.<span class="fn">Add</span>(art); Console.<span class="fn">WriteLine</span>(<span class="str">"Aggiunto!"</span>); }
            <span class="kw">break</span>;
        <span class="kw">case</span> <span class="str">"2"</span>:
            Console.<span class="fn">Write</span>(<span class="str">"Articolo da rimuovere: "</span>);
            <span class="ty">string</span> rm = Console.<span class="fn">ReadLine</span>();
            Console.<span class="fn">WriteLine</span>(spesa.<span class="fn">Remove</span>(rm) ? <span class="str">"Rimosso!"</span> : <span class="str">"Non trovato!"</span>);
            <span class="kw">break</span>;
        <span class="kw">case</span> <span class="str">"3"</span>:
            Console.<span class="fn">Write</span>(<span class="str">"Cerca: "</span>); <span class="ty">string</span> cerca = Console.<span class="fn">ReadLine</span>();
            Console.<span class="fn">WriteLine</span>(spesa.<span class="fn">Contains</span>(cerca) ? <span class="str">"Presente!"</span> : <span class="str">"Non presente"</span>);
            <span class="kw">break</span>;
        <span class="kw">case</span> <span class="str">"4"</span>: spesa.<span class="fn">Sort</span>(); Console.<span class="fn">WriteLine</span>(<span class="str">"Ordinata!"</span>); <span class="kw">break</span>;
        <span class="kw">case</span> <span class="str">"0"</span>: esci = <span class="kw">true</span>; <span class="kw">break</span>;
    }
}</pre>

    <h4>Errori comuni</h4>
    <pre><span class="cm">// 1. Usare Length invece di Count:</span>
<span class="cm">// lista.Length  ← ERRORE! Le List usano .Count</span>
<span class="cm">// lista.Count   ← OK</span>

<span class="cm">// 2. Modificare la lista mentre la si scorre con foreach:</span>
<span class="kw">foreach</span> (<span class="ty">string</span> s <span class="kw">in</span> lista) {
    <span class="cm">// lista.Remove(s);  ← CRASH! InvalidOperationException</span>
}
<span class="cm">// Soluzione: crea una lista da rimuovere poi rimuovi dopo:</span>
List&lt;<span class="ty">string</span>&gt; daRimuovere = lista.<span class="fn">FindAll</span>(s =&gt; s.Length &lt; <span class="num">4</span>);
<span class="kw">foreach</span> (<span class="ty">string</span> s <span class="kw">in</span> daRimuovere) lista.<span class="fn">Remove</span>(s);

<span class="cm">// 3. Accedere a indice fuori range:</span>
<span class="cm">// lista[lista.Count]   ← CRASH! Ultimo indice = Count-1</span>
<span class="cm">// lista[lista.Count-1] ← OK</span>

<span class="cm">// 4. Find restituisce il default se non trova nulla:</span>
<span class="ty">int</span> trovato2 = numeri2.<span class="fn">Find</span>(n =&gt; n &gt; <span class="num">1000</span>);  <span class="cm">// 0 (default di int) se non trovato!</span>
<span class="cm">// Usa FirstOrDefault e controlla il risultato.</span></pre>

    <h4>Esercizi</h4>
    <pre><span class="cm">// FACILE:</span>
<span class="cm">// 1. Crea una lista di nomi, aggiungine 5, poi stampa in ordine alfabetico</span>
<span class="cm">// 2. Chiedi numeri all'utente finché non scrive "fine", poi mostra la somma</span>
<span class="cm">// 3. Rimuovi tutti i duplicati da una lista di interi</span>
<span class="cm">// MEDIO:</span>
<span class="cm">// 4. Gestisci una lista di studenti con aggiunta e rimozione</span>
<span class="cm">// 5. Trova tutti i numeri pari in una lista e mettili in un'altra lista</span>
<span class="cm">// 6. Conta quante volte appare ogni lettera in una lista di stringhe</span>
<span class="cm">// DIFFICILE:</span>
<span class="cm">// 7. Implementa uno stack (pila) usando List (Push, Pop, Peek)</span>
<span class="cm">// 8. Gestisci una lista di prodotti con nome e prezzo, ordina per prezzo</span>
<span class="cm">// 9. Simula una coda (queue): aggiungi in fondo, rimuovi dalla testa</span></pre>

    <h4>Soluzioni</h4>
    <pre><span class="cm">// --- 1. ---</span>
List&lt;<span class="ty">string</span>&gt; l1=<span class="kw">new</span>(){<span class="str">"Zara"</span>,<span class="str">"Marco"</span>,<span class="str">"Anna"</span>,<span class="str">"Luca"</span>,<span class="str">"Bea"</span>};
l1.<span class="fn">Sort</span>(); l1.<span class="fn">ForEach</span>(n=&gt;Console.<span class="fn">WriteLine</span>(n));

<span class="cm">// --- 2. ---</span>
List&lt;<span class="ty">int</span>&gt; l2=<span class="kw">new</span>(); <span class="ty">string</span> inp;
<span class="kw">while</span>((inp=Console.<span class="fn">ReadLine</span>()).<span class="fn">ToLower</span>()!=<span class="str">"fine"</span>)
    <span class="kw">if</span>(<span class="ty">int</span>.<span class="fn">TryParse</span>(inp,<span class="kw">out int</span> n2)) l2.<span class="fn">Add</span>(n2);
<span class="ty">int</span> sum2=<span class="num">0</span>; l2.<span class="fn">ForEach</span>(n=&gt;{sum2+=n;});Console.<span class="fn">WriteLine</span>(<span class="str">$"Somma: {sum2}"</span>);

<span class="cm">// --- 3. Rimuovi duplicati ---</span>
List&lt;<span class="ty">int</span>&gt; l3=<span class="kw">new</span>(){<span class="num">1</span>,<span class="num">2</span>,<span class="num">2</span>,<span class="num">3</span>,<span class="num">1</span>,<span class="num">4</span>};
List&lt;<span class="ty">int</span>&gt; uniq=<span class="kw">new</span>();
<span class="kw">foreach</span>(<span class="ty">int</span> n <span class="kw">in</span> l3) <span class="kw">if</span>(!uniq.<span class="fn">Contains</span>(n)) uniq.<span class="fn">Add</span>(n);
uniq.<span class="fn">ForEach</span>(n=&gt;Console.<span class="fn">Write</span>(<span class="str">$"{n} "</span>));

<span class="cm">// --- 4. Studenti ---</span>
List&lt;<span class="ty">string</span>&gt; l4=<span class="kw">new</span>(); <span class="ty">string</span> cmd4;
<span class="kw">while</span>((cmd4=Console.<span class="fn">ReadLine</span>().<span class="fn">ToLower</span>())!=<span class="str">"fine"</span>){
    <span class="kw">if</span>(cmd4.<span class="fn">StartsWith</span>(<span class="str">"+"</span>)) l4.<span class="fn">Add</span>(cmd4[<span class="num">1</span>..]);
    <span class="kw">else if</span>(cmd4.<span class="fn">StartsWith</span>(<span class="str">"-"</span>)) l4.<span class="fn">Remove</span>(cmd4[<span class="num">1</span>..]);
    l4.<span class="fn">ForEach</span>(s=&gt;Console.<span class="fn">Write</span>(<span class="str">$"{s} "</span>));Console.<span class="fn">WriteLine</span>();}

<span class="cm">// --- 5. Numeri pari ---</span>
List&lt;<span class="ty">int</span>&gt; l5=<span class="kw">new</span>(){<span class="num">1</span>,<span class="num">2</span>,<span class="num">3</span>,<span class="num">4</span>,<span class="num">5</span>,<span class="num">6</span>};
List&lt;<span class="ty">int</span>&gt; pari5=l5.<span class="fn">FindAll</span>(n=&gt;n%<span class="num">2</span>==<span class="num">0</span>);
pari5.<span class="fn">ForEach</span>(n=&gt;Console.<span class="fn">Write</span>(<span class="str">$"{n} "</span>));

<span class="cm">// --- 7. Stack con List ---</span>
List&lt;<span class="ty">int</span>&gt; stack=<span class="kw">new</span>();
stack.<span class="fn">Add</span>(<span class="num">1</span>); stack.<span class="fn">Add</span>(<span class="num">2</span>); stack.<span class="fn">Add</span>(<span class="num">3</span>);
<span class="kw">void</span> <span class="fn">Push</span>(<span class="ty">int</span> v){stack.<span class="fn">Add</span>(v);}
<span class="ty">int</span> <span class="fn">Pop</span>(){<span class="ty">int</span> v=stack[stack.Count-<span class="num">1</span>];stack.<span class="fn">RemoveAt</span>(stack.Count-<span class="num">1</span>);<span class="kw">return</span> v;}
<span class="ty">int</span> <span class="fn">Peek</span>()=&gt;stack[stack.Count-<span class="num">1</span>];
Console.<span class="fn">WriteLine</span>(<span class="str">$"Peek: {Peek()}  Pop: {Pop()}  Count: {stack.Count}"</span>);

<span class="cm">// --- 8. Prodotti per prezzo ---</span>
List&lt;(<span class="ty">string</span> nome, <span class="ty">decimal</span> prezzo)&gt; prods=<span class="kw">new</span>(){
    (<span class="str">"Pane"</span>,<span class="num">1.50m</span>),(<span class="str">"Latte"</span>,<span class="num">0.99m</span>),(<span class="str">"Pasta"</span>,<span class="num">1.20m</span>)};
prods.<span class="fn">Sort</span>((a,b)=&gt;a.prezzo.<span class="fn">CompareTo</span>(b.prezzo));
prods.<span class="fn">ForEach</span>(p=&gt;Console.<span class="fn">WriteLine</span>(<span class="str">$"{p.nome,-15} {p.prezzo:C}"</span>));

<span class="cm">// --- 9. Queue con List ---</span>
List&lt;<span class="ty">string</span>&gt; queue=<span class="kw">new</span>();
queue.<span class="fn">Add</span>(<span class="str">"primo"</span>); queue.<span class="fn">Add</span>(<span class="str">"secondo"</span>); queue.<span class="fn">Add</span>(<span class="str">"terzo"</span>);
<span class="ty">string</span> prossimo=queue[<span class="num">0</span>]; queue.<span class="fn">RemoveAt</span>(<span class="num">0</span>);
Console.<span class="fn">WriteLine</span>(<span class="str">$"Servito: {prossimo}  Rimasti: {queue.Count}"</span>);</pre>

  </div>
</div>
      <!-- 10. String — Metodi -->
<div class="topic-card">
  <div class="topic-header" onclick="toggle(this.closest('.topic-card'))"><div><h3>10. String — Metodi Completi</h3><div class="topic-sub">Length, ToUpper, Trim, Replace, Split, Contains, Substring, Join, IsNullOrEmpty</div></div><span class="arrow">▼</span></div>
  <div class="topic-body">

    <h4>Le stringhe sono immutabili</h4>
    <pre><span class="cm">// In C# le stringhe NON possono essere modificate dopo la creazione.</span>
<span class="cm">// Ogni metodo restituisce una NUOVA stringa, non modifica quella originale!</span>

<span class="ty">string</span> s = <span class="str">"ciao mondo"</span>;
<span class="ty">string</span> upper = s.<span class="fn">ToUpper</span>();  <span class="cm">// "CIAO MONDO" — s rimane "ciao mondo"</span>
Console.<span class="fn">WriteLine</span>(s);         <span class="cm">// "ciao mondo" — INVARIATO!</span>
Console.<span class="fn">WriteLine</span>(upper);     <span class="cm">// "CIAO MONDO"</span>

<span class="cm">// Devi assegnare il risultato per usarlo:</span>
s = s.<span class="fn">ToUpper</span>();  <span class="cm">// ora s = "CIAO MONDO"</span></pre>

    <h4>Proprietà e metodi base</h4>
    <pre><span class="ty">string</span> testo = <span class="str">" Ciao Mondo! "</span>;

<span class="cm">// Lunghezza:</span>
Console.<span class="fn">WriteLine</span>(testo.Length);   <span class="cm">// 14 (spazi inclusi)</span>

<span class="cm">// Maiuscolo / minuscolo:</span>
Console.<span class="fn">WriteLine</span>(testo.<span class="fn">ToUpper</span>()); <span class="cm">// " CIAO MONDO! "</span>
Console.<span class="fn">WriteLine</span>(testo.<span class="fn">ToLower</span>()); <span class="cm">// " ciao mondo! "</span>

<span class="cm">// Rimuovere spazi:</span>
Console.<span class="fn">WriteLine</span>(testo.<span class="fn">Trim</span>());      <span class="cm">// "Ciao Mondo!" — rimuove da entrambi i lati</span>
Console.<span class="fn">WriteLine</span>(testo.<span class="fn">TrimStart</span>()); <span class="cm">// "Ciao Mondo! " — solo a sinistra</span>
Console.<span class="fn">WriteLine</span>(testo.<span class="fn">TrimEnd</span>());   <span class="cm">// " Ciao Mondo!" — solo a destra</span>

<span class="cm">// Accedere a singoli caratteri:</span>
Console.<span class="fn">WriteLine</span>(testo[<span class="num">1</span>]);          <span class="cm">// 'C'</span>
<span class="kw">foreach</span> (<span class="ty">char</span> c <span class="kw">in</span> testo) Console.<span class="fn">Write</span>(c);</pre>

    <h4>Cercare all'interno di una stringa</h4>
    <pre><span class="ty">string</span> frase = <span class="str">"Il cielo è blu, il mare è blu"</span>;

<span class="cm">// Verificare se contiene:</span>
Console.<span class="fn">WriteLine</span>(frase.<span class="fn">Contains</span>(<span class="str">"blu"</span>));       <span class="cm">// true</span>
Console.<span class="fn">WriteLine</span>(frase.<span class="fn">Contains</span>(<span class="str">"verde"</span>));     <span class="cm">// false</span>

<span class="cm">// Verificare inizio e fine:</span>
Console.<span class="fn">WriteLine</span>(frase.<span class="fn">StartsWith</span>(<span class="str">"Il"</span>));      <span class="cm">// true</span>
Console.<span class="fn">WriteLine</span>(frase.<span class="fn">EndsWith</span>(<span class="str">"blu"</span>));       <span class="cm">// true</span>

<span class="cm">// Trovare la posizione:</span>
Console.<span class="fn">WriteLine</span>(frase.<span class="fn">IndexOf</span>(<span class="str">"blu"</span>));        <span class="cm">// 13 — prima occorrenza</span>
Console.<span class="fn">WriteLine</span>(frase.<span class="fn">LastIndexOf</span>(<span class="str">"blu"</span>));    <span class="cm">// 29 — ultima occorrenza</span>
Console.<span class="fn">WriteLine</span>(frase.<span class="fn">IndexOf</span>(<span class="str">"verde"</span>));      <span class="cm">// -1 se non trovato</span>

<span class="cm">// Confronto case-insensitive:</span>
Console.<span class="fn">WriteLine</span>(frase.<span class="fn">Contains</span>(<span class="str">"BLU"</span>, StringComparison.OrdinalIgnoreCase));  <span class="cm">// true</span></pre>

    <h4>Estrarre parti di stringa</h4>
    <pre><span class="ty">string</span> s2 = <span class="str">"Programmazione C#"</span>;

<span class="cm">// Substring — estrae una parte:</span>
Console.<span class="fn">WriteLine</span>(s2.<span class="fn">Substring</span>(<span class="num">0</span>, <span class="num">14</span>));  <span class="cm">// "Programmazione"</span>
Console.<span class="fn">WriteLine</span>(s2.<span class="fn">Substring</span>(<span class="num">15</span>));     <span class="cm">// "C#" — dalla pos 15 alla fine</span>

<span class="cm">// Range (C# 8+) — sintassi più moderna:</span>
Console.<span class="fn">WriteLine</span>(s2[<span class="num">0</span>..<span class="num">14</span>]);   <span class="cm">// "Programmazione"</span>
Console.<span class="fn">WriteLine</span>(s2[<span class="num">15</span>..]);   <span class="cm">// "C#"</span>
Console.<span class="fn">WriteLine</span>(s2[^<span class="num">2</span>..]);   <span class="cm">// "C#" — ultimi 2 caratteri</span>

<span class="cm">// Primo e ultimo carattere:</span>
Console.<span class="fn">WriteLine</span>(s2[<span class="num">0</span>]);       <span class="cm">// 'P'</span>
Console.<span class="fn">WriteLine</span>(s2[^<span class="num">1</span>]);      <span class="cm">// '#' — ultimo</span></pre>

    <h4>Modificare stringhe</h4>
    <pre><span class="ty">string</span> s3 = <span class="str">"Ciao Mondo Ciao"</span>;

<span class="cm">// Replace — sostituisce tutte le occorrenze:</span>
Console.<span class="fn">WriteLine</span>(s3.<span class="fn">Replace</span>(<span class="str">"Ciao"</span>, <span class="str">"Addio"</span>));  <span class="cm">// "Addio Mondo Addio"</span>
Console.<span class="fn">WriteLine</span>(s3.<span class="fn">Replace</span>(<span class="str">" "</span>, <span class="str">"_"</span>));          <span class="cm">// "Ciao_Mondo_Ciao"</span>

<span class="cm">// PadLeft / PadRight — aggiunge caratteri per raggiungere una lunghezza:</span>
Console.<span class="fn">WriteLine</span>(<span class="str">"42"</span>.<span class="fn">PadLeft</span>(<span class="num">6</span>));           <span class="cm">// "    42" — riempie con spazi a sinistra</span>
Console.<span class="fn">WriteLine</span>(<span class="str">"42"</span>.<span class="fn">PadLeft</span>(<span class="num">6</span>, <span class="str">'0'</span>));      <span class="cm">// "000042" — riempie con 0</span>
Console.<span class="fn">WriteLine</span>(<span class="str">"Ciao"</span>.<span class="fn">PadRight</span>(<span class="num">10</span>, <span class="str">'.'</span>));  <span class="cm">// "Ciao......" </span></pre>

    <h4>Split e Join</h4>
    <pre><span class="cm">// Split — divide una stringa in un array di parti:</span>
<span class="ty">string</span> csv = <span class="str">"Marco,Giulia,Luca,Anna"</span>;
<span class="ty">string</span>[] parti = csv.<span class="fn">Split</span>(<span class="str">','</span>);
<span class="cm">// ["Marco", "Giulia", "Luca", "Anna"]</span>
<span class="kw">foreach</span> (<span class="ty">string</span> p <span class="kw">in</span> parti) Console.<span class="fn">WriteLine</span>(p);

<span class="cm">// Split su più separatori:</span>
<span class="ty">string</span> frase2 = <span class="str">"uno; due, tre. quattro"</span>;
<span class="ty">string</span>[] parole = frase2.<span class="fn">Split</span>(<span class="kw">new</span> <span class="ty">char</span>[] { <span class="str">';'</span>, <span class="str">','</span>, <span class="str">'.'</span>, <span class="str">' '</span> },
    StringSplitOptions.RemoveEmptyEntries);

<span class="cm">// Join — unisce un array in una stringa:</span>
<span class="ty">string</span>[] nomi3 = { <span class="str">"Marco"</span>, <span class="str">"Giulia"</span>, <span class="str">"Luca"</span> };
Console.<span class="fn">WriteLine</span>(<span class="ty">string</span>.<span class="fn">Join</span>(<span class="str">", "</span>, nomi3));   <span class="cm">// "Marco, Giulia, Luca"</span>
Console.<span class="fn">WriteLine</span>(<span class="ty">string</span>.<span class="fn">Join</span>(<span class="str">" | "</span>, nomi3)); <span class="cm">// "Marco | Giulia | Luca"</span>
Console.<span class="fn">WriteLine</span>(<span class="ty">string</span>.<span class="fn">Join</span>(<span class="str">""</span>, nomi3));     <span class="cm">// "MarcoGiuliaLuca"</span></pre>

    <h4>Metodi utili vari</h4>
    <pre><span class="cm">// Verificare null o vuoto:</span>
<span class="ty">string</span>.<span class="fn">IsNullOrEmpty</span>(<span class="str">""</span>);        <span class="cm">// true</span>
<span class="ty">string</span>.<span class="fn">IsNullOrEmpty</span>(<span class="kw">null</span>);      <span class="cm">// true</span>
<span class="ty">string</span>.<span class="fn">IsNullOrEmpty</span>(<span class="str">"ciao"</span>);   <span class="cm">// false</span>
<span class="ty">string</span>.<span class="fn">IsNullOrWhiteSpace</span>(<span class="str">"   "</span>); <span class="cm">// true — solo spazi conta come vuoto</span>

<span class="cm">// Ripetere una stringa:</span>
<span class="ty">string</span> linea = <span class="kw">new</span> <span class="ty">string</span>(<span class="str">'-'</span>, <span class="num">20</span>);  <span class="cm">// "--------------------"</span>
<span class="ty">string</span> stelle = <span class="kw">new</span> <span class="ty">string</span>(<span class="str">'*'</span>, <span class="num">5</span>);   <span class="cm">// "*****"</span>

<span class="cm">// Capitalizzare prima lettera:</span>
<span class="ty">string</span> nome4 = <span class="str">"marco"</span>;
<span class="ty">string</span> cap = <span class="ty">char</span>.<span class="fn">ToUpper</span>(nome4[<span class="num">0</span>]) + nome4[<span class="num">1</span>..].ToLower();  <span class="cm">// "Marco"</span>

<span class="cm">// Confronto stringhe:</span>
<span class="ty">string</span>.<span class="fn">Compare</span>(<span class="str">"abc"</span>, <span class="str">"ABC"</span>, ignoreCase: <span class="kw">true</span>);  <span class="cm">// 0 (uguale)</span>
<span class="str">"abc"</span>.<span class="fn">Equals</span>(<span class="str">"ABC"</span>, StringComparison.OrdinalIgnoreCase);  <span class="cm">// true</span></pre>
    <table>
      <tr><th>Metodo</th><th>Cosa fa</th><th>Esempio</th></tr>
      <tr><td>.Length</td><td>Numero di caratteri</td><td>"Ciao".Length → 4</td></tr>
      <tr><td>.ToUpper()</td><td>Tutto maiuscolo</td><td>"ciao" → "CIAO"</td></tr>
      <tr><td>.Trim()</td><td>Rimuove spazi bordi</td><td>" ciao " → "ciao"</td></tr>
      <tr><td>.Replace()</td><td>Sostituisce testo</td><td>"a b".Replace(" ","_") → "a_b"</td></tr>
      <tr><td>.Contains()</td><td>Verifica presenza</td><td>"ciao".Contains("ia") → true</td></tr>
      <tr><td>.Split()</td><td>Divide in array</td><td>"a,b".Split(',') → ["a","b"]</td></tr>
      <tr><td>.Substring()</td><td>Estrae parte</td><td>"ciao".Substring(1,2) → "ia"</td></tr>
      <tr><td>string.Join()</td><td>Unisce array</td><td>Join(",",["a","b"]) → "a,b"</td></tr>
      <tr><td>IsNullOrWhiteSpace()</td><td>Controlla se vuoto</td><td>"  " → true</td></tr>
    </table>
    <div class="tip">Le stringhe sono immutabili — ogni metodo crea una nuova stringa. Per molte concatenazioni in un ciclo usa StringBuilder (topic avanzato).</div>

    <h4>Progetto — Analizzatore di testo</h4>
    <pre>Console.<span class="fn">WriteLine</span>(<span class="str">"Inserisci una frase:"</span>);
<span class="ty">string</span> input = Console.<span class="fn">ReadLine</span>() ?? <span class="str">""</span>;

<span class="ty">string</span>[] parole4 = input.<span class="fn">Trim</span>().<span class="fn">Split</span>(<span class="str">' '</span>, StringSplitOptions.RemoveEmptyEntries);
<span class="ty">int</span> vocali = <span class="num">0</span>, consonanti = <span class="num">0</span>;
<span class="kw">foreach</span> (<span class="ty">char</span> c <span class="kw">in</span> input.<span class="fn">ToLower</span>())
    <span class="kw">if</span> (<span class="str">"aeiou"</span>.<span class="fn">Contains</span>(c)) vocali++;
    <span class="kw">else if</span> (<span class="ty">char</span>.<span class="fn">IsLetter</span>(c)) consonanti++;

Console.<span class="fn">WriteLine</span>(<span class="str">$"Caratteri: {input.Length}"</span>);
Console.<span class="fn">WriteLine</span>(<span class="str">$"Parole:    {parole4.Length}"</span>);
Console.<span class="fn">WriteLine</span>(<span class="str">$"Vocali:    {vocali}"</span>);
Console.<span class="fn">WriteLine</span>(<span class="str">$"Consonanti:{consonanti}"</span>);
Console.<span class="fn">WriteLine</span>(<span class="str">$"Maiuscolo: {input.ToUpper()}"</span>);
Console.<span class="fn">WriteLine</span>(<span class="str">$"Invertita: {new string(input.Reverse().ToArray())}"</span>);
Console.<span class="fn">WriteLine</span>(<span class="str">$"Parole ordinate: {string.Join(", ", parole4.OrderBy(p => p))}"</span>);</pre>

    <h4>Errori comuni</h4>
    <pre><span class="cm">// 1. Non assegnare il risultato dei metodi stringa:</span>
<span class="ty">string</span> nome5 = <span class="str">"marco"</span>;
nome5.<span class="fn">ToUpper</span>();  <span class="cm">// ← non fa nulla! il risultato viene scartato</span>
nome5 = nome5.<span class="fn">ToUpper</span>();  <span class="cm">// OK</span>

<span class="cm">// 2. Confronto con == è case-sensitive:</span>
<span class="ty">string</span> input2 = <span class="str">"Marco"</span>;
<span class="kw">if</span> (input2 == <span class="str">"marco"</span>)  <span class="cm">// false!</span>
<span class="kw">if</span> (input2.<span class="fn">ToLower</span>() == <span class="str">"marco"</span>)  <span class="cm">// true — soluzione</span>

<span class="cm">// 3. NullReferenceException su stringa null:</span>
<span class="ty">string</span> s4 = <span class="kw">null</span>;
<span class="cm">// s4.ToUpper();  ← CRASH!</span>
<span class="kw">if</span> (!<span class="ty">string</span>.<span class="fn">IsNullOrEmpty</span>(s4)) s4.<span class="fn">ToUpper</span>();  <span class="cm">// sicuro</span>

<span class="cm">// 4. IndexOf restituisce -1 se non trovato:</span>
<span class="ty">int</span> pos4 = <span class="str">"ciao"</span>.<span class="fn">IndexOf</span>(<span class="str">"xyz"</span>);  <span class="cm">// -1</span>
<span class="cm">// Non usare il risultato come indice senza controllare!</span>
<span class="kw">if</span> (pos4 >= <span class="num">0</span>) Console.<span class="fn">WriteLine</span>(<span class="str">"Trovato"</span>);</pre>

    <h4>Esercizi</h4>
    <pre><span class="cm">// FACILE:</span>
<span class="cm">// 1. Chiedi una frase e stampa quante parole contiene</span>
<span class="cm">// 2. Inverti una stringa inserita dall'utente</span>
<span class="cm">// 3. Verifica se una parola è palindroma (es. "kayak")</span>
<span class="cm">// MEDIO:</span>
<span class="cm">// 4. Conta le vocali e le consonanti in una frase</span>
<span class="cm">// 5. Converti snake_case in CamelCase (es. "ciao_mondo" → "CiaoMondo")</span>
<span class="cm">// 6. Trova la parola più lunga in una frase</span>
<span class="cm">// DIFFICILE:</span>
<span class="cm">// 7. Verifica se una frase è un anagramma di un'altra</span>
<span class="cm">// 8. Censurata: sostituisce le parolacce con ***</span>
<span class="cm">// 9. Formatta un nome completo: "marco rossi" → "Rossi, Marco"</span></pre>

    <h4>Soluzioni</h4>
    <pre><span class="cm">// --- 1. ---</span>
Console.<span class="fn">Write</span>(<span class="str">"Frase: "</span>); <span class="ty">string</span> f1=Console.<span class="fn">ReadLine</span>();
Console.<span class="fn">WriteLine</span>(<span class="str">$"Parole: {f1.Trim().Split(' ',StringSplitOptions.RemoveEmptyEntries).Length}"</span>);

<span class="cm">// --- 2. ---</span>
Console.<span class="fn">Write</span>(<span class="str">"Testo: "</span>); <span class="ty">string</span> f2=Console.<span class="fn">ReadLine</span>();
Console.<span class="fn">WriteLine</span>(<span class="kw">new</span> <span class="ty">string</span>(f2.<span class="fn">Reverse</span>().<span class="fn">ToArray</span>()));

<span class="cm">// --- 3. Palindromo ---</span>
Console.<span class="fn">Write</span>(<span class="str">"Parola: "</span>); <span class="ty">string</span> f3=Console.<span class="fn">ReadLine</span>().<span class="fn">ToLower</span>();
<span class="ty">string</span> rev3=<span class="kw">new</span> <span class="ty">string</span>(f3.<span class="fn">Reverse</span>().<span class="fn">ToArray</span>());
Console.<span class="fn">WriteLine</span>(f3==rev3?<span class="str">"Palindromo!"</span>:<span class="str">"Non palindromo"</span>);

<span class="cm">// --- 4. Vocali e consonanti ---</span>
Console.<span class="fn">Write</span>(<span class="str">"Frase: "</span>); <span class="ty">string</span> f4=Console.<span class="fn">ReadLine</span>().<span class="fn">ToLower</span>();
<span class="ty">int</span> v4=<span class="num">0</span>,c4=<span class="num">0</span>;
<span class="kw">foreach</span>(<span class="ty">char</span> ch <span class="kw">in</span> f4)
    <span class="kw">if</span>(<span class="str">"aeiou"</span>.<span class="fn">Contains</span>(ch)) v4++; <span class="kw">else if</span>(<span class="ty">char</span>.<span class="fn">IsLetter</span>(ch)) c4++;
Console.<span class="fn">WriteLine</span>(<span class="str">$"Vocali: {v4}  Consonanti: {c4}"</span>);

<span class="cm">// --- 5. snake_case → CamelCase ---</span>
Console.<span class="fn">Write</span>(<span class="str">"snake_case: "</span>); <span class="ty">string</span> f5=Console.<span class="fn">ReadLine</span>();
<span class="ty">string</span>[] parti5=f5.<span class="fn">Split</span>(<span class="str">'_'</span>);
<span class="ty">string</span> camel=<span class="ty">string</span>.<span class="fn">Join</span>(<span class="str">""</span>, parti5.<span class="fn">Select</span>(p=&gt;<span class="ty">char</span>.<span class="fn">ToUpper</span>(p[<span class="num">0</span>])+p[<span class="num">1</span>..]));
Console.<span class="fn">WriteLine</span>(camel);

<span class="cm">// --- 6. Parola più lunga ---</span>
Console.<span class="fn">Write</span>(<span class="str">"Frase: "</span>); <span class="ty">string</span> f6=Console.<span class="fn">ReadLine</span>();
<span class="ty">string</span>[] pw=f6.<span class="fn">Split</span>(<span class="str">' '</span>,StringSplitOptions.RemoveEmptyEntries);
<span class="ty">string</span> piu=pw[<span class="num">0</span>]; <span class="kw">foreach</span>(<span class="ty">string</span> p <span class="kw">in</span> pw) <span class="kw">if</span>(p.Length&gt;piu.Length) piu=p;
Console.<span class="fn">WriteLine</span>(<span class="str">$"Parola più lunga: {piu} ({piu.Length} lettere)"</span>);

<span class="cm">// --- 7. Anagramma ---</span>
Console.<span class="fn">Write</span>(<span class="str">"Parola 1: "</span>); <span class="ty">char</span>[] a7s=Console.<span class="fn">ReadLine</span>().<span class="fn">ToLower</span>().<span class="fn">ToCharArray</span>();
Console.<span class="fn">Write</span>(<span class="str">"Parola 2: "</span>); <span class="ty">char</span>[] b7s=Console.<span class="fn">ReadLine</span>().<span class="fn">ToLower</span>().<span class="fn">ToCharArray</span>();
Array.<span class="fn">Sort</span>(a7s); Array.<span class="fn">Sort</span>(b7s);
Console.<span class="fn">WriteLine</span>(<span class="kw">new</span> <span class="ty">string</span>(a7s)==<span class="kw">new</span> <span class="ty">string</span>(b7s)?<span class="str">"Anagramma!"</span>:<span class="str">"Non anagramma"</span>);

<span class="cm">// --- 8. Censura ---</span>
<span class="ty">string</span>[] bad={<span class="str">"stupido"</span>,<span class="str">"cattivo"</span>};
Console.<span class="fn">Write</span>(<span class="str">"Frase: "</span>); <span class="ty">string</span> f8=Console.<span class="fn">ReadLine</span>();
<span class="kw">foreach</span>(<span class="ty">string</span> b <span class="kw">in</span> bad)
    f8=f8.<span class="fn">Replace</span>(b,<span class="kw">new</span> <span class="ty">string</span>(<span class="str">'*'</span>,b.Length),StringComparison.OrdinalIgnoreCase);
Console.<span class="fn">WriteLine</span>(f8);

<span class="cm">// --- 9. Formatta nome ---</span>
Console.<span class="fn">Write</span>(<span class="str">"Nome completo: "</span>); <span class="ty">string</span>[] parts=Console.<span class="fn">ReadLine</span>().<span class="fn">Trim</span>().<span class="fn">Split</span>(<span class="str">' '</span>);
<span class="kw">if</span>(parts.Length&gt;=<span class="num">2</span>){
    <span class="ty">string</span> nome9=<span class="ty">char</span>.<span class="fn">ToUpper</span>(parts[<span class="num">0</span>][<span class="num">0</span>])+parts[<span class="num">0</span>][<span class="num">1</span>..].<span class="fn">ToLower</span>();
    <span class="ty">string</span> cog9=<span class="ty">char</span>.<span class="fn">ToUpper</span>(parts[<span class="num">1</span>][<span class="num">0</span>])+parts[<span class="num">1</span>][<span class="num">1</span>..].<span class="fn">ToLower</span>();
    Console.<span class="fn">WriteLine</span>(<span class="str">$"{cog9}, {nome9}"</span>);
}</pre>

  </div>
</div>
      <!-- 11. Enum -->
<div class="topic-card">
  <div class="topic-header" onclick="toggle(this.closest('.topic-card'))"><div><h3>11. Enum</h3><div class="topic-sub">Enumerazioni, valori personalizzati, casting, switch, Flags</div></div><span class="arrow">▼</span></div>
  <div class="topic-body">

    <h4>Cos'è un Enum?</h4>
    <pre><span class="cm">// Un enum è un tipo speciale che rappresenta un insieme di costanti con nome.</span>
<span class="cm">// Rende il codice più leggibile: usa "Giorno.Lunedi" invece del numero 0!</span>

<span class="cm">// Definizione (fuori dalla classe o dentro):</span>
<span class="kw">enum</span> Giorno { Lunedi, Martedi, Mercoledi, Giovedi, Venerdi, Sabato, Domenica }
<span class="cm">//            0       1        2           3        4         5       6</span>
<span class="cm">// Per default i valori partono da 0 e aumentano di 1</span></pre>

    <h4>Uso base</h4>
    <pre>Giorno oggi = Giorno.Lunedi;
Console.<span class="fn">WriteLine</span>(oggi);          <span class="cm">// "Lunedi" — stampa il nome!</span>
Console.<span class="fn">WriteLine</span>((<span class="ty">int</span>)oggi);    <span class="cm">// 0 — cast a intero</span>

<span class="cm">// Confronto:</span>
<span class="kw">if</span> (oggi == Giorno.Lunedi)
    Console.<span class="fn">WriteLine</span>(<span class="str">"Inizio settimana!"</span>);

<span class="cm">// Tutti i valori di un enum:</span>
<span class="kw">foreach</span> (Giorno g <span class="kw">in</span> Enum.<span class="fn">GetValues</span>(<span class="kw">typeof</span>(Giorno)))
    Console.<span class="fn">WriteLine</span>(<span class="str">$"{(int)g}: {g}"</span>);
<span class="cm">// 0: Lunedi  1: Martedi  2: Mercoledi ...</span></pre>

    <h4>Valori personalizzati</h4>
    <pre><span class="cm">// Puoi assegnare qualsiasi valore intero:</span>
<span class="kw">enum</span> Stato { Inattivo = <span class="num">0</span>, Attivo = <span class="num">1</span>, Sospeso = <span class="num">2</span>, Eliminato = <span class="num">99</span> }

<span class="cm">// Utile per codici HTTP, codici errore ecc.:</span>
<span class="kw">enum</span> HttpStatus { OK = <span class="num">200</span>, NotFound = <span class="num">404</span>, ServerError = <span class="num">500</span> }

<span class="cm">// Casting tra int e enum:</span>
Stato s1 = (Stato)<span class="num">1</span>;         <span class="cm">// int → enum: Stato.Attivo</span>
<span class="ty">int</span>   n1 = (<span class="ty">int</span>)Stato.Sospeso; <span class="cm">// enum → int: 2</span>

HttpStatus risposta = HttpStatus.OK;
Console.<span class="fn">WriteLine</span>(<span class="str">$"Codice: {(int)risposta}"</span>);  <span class="cm">// "Codice: 200"</span></pre>

    <h4>Switch su enum</h4>
    <pre><span class="cm">// Il caso d'uso più comune degli enum è con switch:</span>
Giorno oggi2 = Giorno.Sabato;

<span class="kw">switch</span> (oggi2) {
    <span class="kw">case</span> Giorno.Sabato:
    <span class="kw">case</span> Giorno.Domenica:
        Console.<span class="fn">WriteLine</span>(<span class="str">"Weekend! Riposo 🎉"</span>);
        <span class="kw">break</span>;
    <span class="kw">case</span> Giorno.Venerdi:
        Console.<span class="fn">WriteLine</span>(<span class="str">"Quasi weekend!"</span>);
        <span class="kw">break</span>;
    <span class="kw">default</span>:
        Console.<span class="fn">WriteLine</span>(<span class="str">"Settimana lavorativa"</span>);
        <span class="kw">break</span>;
}

<span class="cm">// Switch expression (C# 8+) — più compatto:</span>
<span class="ty">string</span> tipo = oggi2 <span class="kw">switch</span> {
    Giorno.Sabato   => <span class="str">"Weekend"</span>,
    Giorno.Domenica => <span class="str">"Weekend"</span>,
    Giorno.Venerdi  => <span class="str">"Quasi weekend"</span>,
    _               => <span class="str">"Lavorativo"</span>
};
Console.<span class="fn">WriteLine</span>(tipo);</pre>

    <h4>Parse e TryParse</h4>
    <pre><span class="cm">// Convertire una stringa in enum:</span>
Giorno g1 = Enum.<span class="fn">Parse</span>&lt;Giorno&gt;(<span class="str">"Martedi"</span>);       <span class="cm">// Giorno.Martedi</span>
<span class="cm">// ATTENZIONE: lancia eccezione se la stringa non è valida!</span>

<span class="cm">// Versione sicura con TryParse:</span>
<span class="ty">bool</span> ok = Enum.<span class="fn">TryParse</span>(<span class="str">"Lunedi"</span>, <span class="kw">out</span> Giorno g2);
<span class="kw">if</span> (ok) Console.<span class="fn">WriteLine</span>(<span class="str">$"Convertito: {g2}"</span>);

<span class="ty">bool</span> fallito = Enum.<span class="fn">TryParse</span>(<span class="str">"Festivo"</span>, <span class="kw">out</span> Giorno g3);  <span class="cm">// false</span>

<span class="cm">// Case insensitive:</span>
Enum.<span class="fn">TryParse</span>(<span class="str">"lunedi"</span>, ignoreCase: <span class="kw">true</span>, <span class="kw">out</span> Giorno g4);  <span class="cm">// OK</span>

<span class="cm">// Verificare se un valore è definito nell'enum:</span>
Console.<span class="fn">WriteLine</span>(Enum.<span class="fn">IsDefined</span>(<span class="kw">typeof</span>(Giorno), <span class="str">"Lunedi"</span>));  <span class="cm">// true</span>
Console.<span class="fn">WriteLine</span>(Enum.<span class="fn">IsDefined</span>(<span class="kw">typeof</span>(Giorno), <span class="num">10</span>));        <span class="cm">// false</span></pre>

    <h4>Confronto con stringhe — perché gli enum sono migliori</h4>
    <pre><span class="cm">// ❌ Senza enum — errori facili, non leggibile:</span>
<span class="ty">string</span> statoUtente = <span class="str">"attivo"</span>;
<span class="kw">if</span> (statoUtente == <span class="str">"Attivo"</span>)  <span class="cm">// case sensitive! Errore silenzioso</span>
    Console.<span class="fn">WriteLine</span>(<span class="str">"OK"</span>);

<span class="cm">// ✅ Con enum — sicuro, leggibile, il compilatore verifica:</span>
Stato statoUtente2 = Stato.Attivo;
<span class="kw">if</span> (statoUtente2 == Stato.Attivo)  <span class="cm">// il compilatore verifica!</span>
    Console.<span class="fn">WriteLine</span>(<span class="str">"OK"</span>);</pre>
    <table>
      <tr><th>Uso</th><th>Esempio pratico</th></tr>
      <tr><td>Giorni della settimana</td><td>enum Giorno { Lunedi, ..., Domenica }</td></tr>
      <tr><td>Stato di un oggetto</td><td>enum Stato { Attivo, Inattivo, Sospeso }</td></tr>
      <tr><td>Direzioni</td><td>enum Direzione { Nord, Sud, Est, Ovest }</td></tr>
      <tr><td>Codici HTTP</td><td>enum HttpStatus { OK=200, NotFound=404 }</td></tr>
      <tr><td>Livelli di log</td><td>enum LogLevel { Debug, Info, Warning, Error }</td></tr>
    </table>

    <h4>Progetto — Semaforo</h4>
    <pre><span class="kw">enum</span> Colore { Rosso, Giallo, Verde }

<span class="kw">static</span> <span class="ty">string</span> <span class="fn">IstruzioniSemaforo</span>(Colore c) => c <span class="kw">switch</span> {
    Colore.Rosso  => <span class="str">"STOP — fermati!"</span>,
    Colore.Giallo => <span class="str">"ATTENZIONE — rallenta!"</span>,
    Colore.Verde  => <span class="str">"VIA — puoi passare!"</span>,
    _             => <span class="str">"Segnale sconosciuto"</span>
};

<span class="cm">// Simulazione semaforo:</span>
Colore[] sequenza = { Colore.Rosso, Colore.Verde, Colore.Giallo, Colore.Rosso };
<span class="kw">foreach</span> (Colore c <span class="kw">in</span> sequenza) {
    Console.<span class="fn">WriteLine</span>(<span class="str">$"[{c}] {IstruzioniSemaforo(c)}"</span>);
    System.Threading.Thread.<span class="fn">Sleep</span>(<span class="num">1000</span>);
}</pre>

    <h4>Errori comuni</h4>
    <pre><span class="cm">// 1. Cast non valido — valore non definito nell'enum:</span>
Giorno g5 = (Giorno)<span class="num">99</span>;  <span class="cm">// NON lancia eccezione, ma il valore è "strano"!</span>
Console.<span class="fn">WriteLine</span>(g5);   <span class="cm">// stampa "99" — non è un nome valido</span>
<span class="cm">// Verifica sempre con Enum.IsDefined prima di fare cast!</span>

<span class="cm">// 2. Parse case-sensitive:</span>
<span class="cm">// Enum.Parse&lt;Giorno&gt;("lunedi")  ← ECCEZIONE! La L deve essere maiuscola</span>
<span class="cm">// Usa sempre TryParse con ignoreCase: true per input utente</span>

<span class="cm">// 3. Confronto sbagliato:</span>
<span class="cm">// if (oggi == 0)  ← ERRORE di compilazione! Non si confronta con int</span>
<span class="cm">// if (oggi == Giorno.Lunedi)  ← OK</span>
<span class="cm">// if ((int)oggi == 0)         ← OK se serve il numero</span></pre>

    <h4>Esercizi</h4>
    <pre><span class="cm">// FACILE:</span>
<span class="cm">// 1. Crea un enum Stagione (Primavera/Estate/Autunno/Inverno) e stampa la stagione corrente</span>
<span class="cm">// 2. Crea un enum Pianeta con i pianeti del sistema solare e stampa tutti i valori</span>
<span class="cm">// 3. Chiedi all'utente un numero (1-7) e stampa il giorno corrispondente</span>
<span class="cm">// MEDIO:</span>
<span class="cm">// 4. Crea enum Priorita (Bassa=1, Media=5, Alta=10, Critica=100) e ordina una lista di task</span>
<span class="cm">// 5. Simula una macchina a stati: enum Stato { Spento, Acceso, InPausa } con transizioni</span>
<span class="cm">// 6. Crea un convertitore di direzioni bussola (N/S/E/O) usando enum e switch</span>
<span class="cm">// DIFFICILE:</span>
<span class="cm">// 7. Implementa un gioco Carta-Sasso-Forbice con enum</span>
<span class="cm">// 8. Crea un sistema di permessi utente con enum Ruolo (Guest/User/Admin/SuperAdmin)</span>
<span class="cm">// 9. Simula un semaforo automatico con timer usando enum e ciclo</span></pre>

    <h4>Soluzioni</h4>
    <pre><span class="cm">// --- 1. Stagione ---</span>
<span class="kw">enum</span> Stagione { Primavera, Estate, Autunno, Inverno }
Stagione ora = Stagione.Estate;
Console.<span class="fn">WriteLine</span>(<span class="str">$"Stagione corrente: {ora}"</span>);

<span class="cm">// --- 2. Pianeti ---</span>
<span class="kw">enum</span> Pianeta { Mercurio, Venere, Terra, Marte, Giove, Saturno, Urano, Nettuno }
<span class="kw">foreach</span> (Pianeta p <span class="kw">in</span> Enum.<span class="fn">GetValues</span>(<span class="kw">typeof</span>(Pianeta)))
    Console.<span class="fn">WriteLine</span>(<span class="str">$"{(int)p+1}. {p}"</span>);

<span class="cm">// --- 3. Numero → Giorno ---</span>
Console.<span class="fn">Write</span>(<span class="str">"Numero (1-7): "</span>);
<span class="ty">int</span>.<span class="fn">TryParse</span>(Console.<span class="fn">ReadLine</span>(), <span class="kw">out int</span> num3);
<span class="kw">if</span> (num3 &gt;= <span class="num">1</span> &amp;&amp; num3 &lt;= <span class="num">7</span>)
    Console.<span class="fn">WriteLine</span>((Giorno)(num3 - <span class="num">1</span>));
<span class="kw">else</span> Console.<span class="fn">WriteLine</span>(<span class="str">"Numero non valido"</span>);

<span class="cm">// --- 4. Priorità task ---</span>
<span class="kw">enum</span> Priorita { Bassa=<span class="num">1</span>, Media=<span class="num">5</span>, Alta=<span class="num">10</span>, Critica=<span class="num">100</span> }
<span class="kw">var</span> task4 = <span class="kw">new</span> List&lt;(string nome, Priorita p)&gt; {
    (<span class="str">"Riunione"</span>, Priorita.Media), (<span class="str">"Bug critico"</span>, Priorita.Critica),
    (<span class="str">"Email"</span>, Priorita.Bassa), (<span class="str">"Deploy"</span>, Priorita.Alta) };
task4.<span class="fn">Sort</span>((a,b) =&gt; b.p.<span class="fn">CompareTo</span>(a.p));
task4.<span class="fn">ForEach</span>(t =&gt; Console.<span class="fn">WriteLine</span>(<span class="str">$"[{t.p}] {t.nome}"</span>));

<span class="cm">// --- 5. Macchina a stati ---</span>
<span class="kw">enum</span> StatoM { Spento, Acceso, InPausa }
StatoM stato5 = StatoM.Spento;
Console.<span class="fn">WriteLine</span>(<span class="str">$"Stato: {stato5}"</span>);
stato5 = StatoM.Acceso;   Console.<span class="fn">WriteLine</span>(<span class="str">$"Stato: {stato5}"</span>);
stato5 = StatoM.InPausa;  Console.<span class="fn">WriteLine</span>(<span class="str">$"Stato: {stato5}"</span>);
stato5 = StatoM.Spento;   Console.<span class="fn">WriteLine</span>(<span class="str">$"Stato: {stato5}"</span>);

<span class="cm">// --- 6. Bussola ---</span>
<span class="kw">enum</span> Direzione { Nord, Sud, Est, Ovest }
Console.<span class="fn">Write</span>(<span class="str">"Direzione (N/S/E/O): "</span>);
<span class="ty">string</span> input6 = Console.<span class="fn">ReadLine</span>().<span class="fn">ToUpper</span>();
Direzione dir6 = input6 <span class="kw">switch</span> {
    <span class="str">"N"</span> => Direzione.Nord, <span class="str">"S"</span> => Direzione.Sud,
    <span class="str">"E"</span> => Direzione.Est,  <span class="str">"O"</span> => Direzione.Ovest,
    _ => <span class="kw">throw new</span> ArgumentException(<span class="str">"Direzione non valida"</span>)
};
Console.<span class="fn">WriteLine</span>(<span class="str">$"Vai verso: {dir6}"</span>);

<span class="cm">// --- 7. Carta-Sasso-Forbice ---</span>
<span class="kw">enum</span> Mossa { Sasso, Carta, Forbice }
Random r7 = <span class="kw">new</span> Random();
Mossa cpu = (Mossa)r7.<span class="fn">Next</span>(<span class="num">0</span>, <span class="num">3</span>);
Console.<span class="fn">Write</span>(<span class="str">"Sasso(0) Carta(1) Forbice(2): "</span>);
<span class="ty">int</span>.<span class="fn">TryParse</span>(Console.<span class="fn">ReadLine</span>(), <span class="kw">out int</span> scelta7);
Mossa giocatore7 = (Mossa)scelta7;
Console.<span class="fn">WriteLine</span>(<span class="str">$"Tu: {giocatore7}  CPU: {cpu}"</span>);
<span class="ty">bool</span> vinci = (giocatore7 == Mossa.Sasso &amp;&amp; cpu == Mossa.Forbice) ||
             (giocatore7 == Mossa.Carta &amp;&amp; cpu == Mossa.Sasso) ||
             (giocatore7 == Mossa.Forbice &amp;&amp; cpu == Mossa.Carta);
Console.<span class="fn">WriteLine</span>(giocatore7 == cpu ? <span class="str">"Pareggio!"</span> : vinci ? <span class="str">"Hai vinto!"</span> : <span class="str">"Hai perso!"</span>);

<span class="cm">// --- 8. Ruoli ---</span>
<span class="kw">enum</span> Ruolo { Guest=<span class="num">0</span>, User=<span class="num">1</span>, Admin=<span class="num">2</span>, SuperAdmin=<span class="num">3</span> }
Ruolo ruolo8 = Ruolo.User;
<span class="ty">bool</span> puoScrivere = ruolo8 &gt;= Ruolo.User;
<span class="ty">bool</span> puoAmministrare = ruolo8 &gt;= Ruolo.Admin;
Console.<span class="fn">WriteLine</span>(<span class="str">$"Scrivere: {puoScrivere}  Amministrare: {puoAmministrare}"</span>);

<span class="cm">// --- 9. Semaforo automatico ---</span>
<span class="kw">enum</span> Luce { Rosso, Verde, Giallo }
Luce luce9 = Luce.Rosso;
<span class="kw">for</span> (<span class="ty">int</span> i = <span class="num">0</span>; i &lt; <span class="num">6</span>; i++) {
    Console.<span class="fn">WriteLine</span>(<span class="str">$"Semaforo: {luce9}"</span>);
    luce9 = luce9 <span class="kw">switch</span> {
        Luce.Rosso  => Luce.Verde,
        Luce.Verde  => Luce.Giallo,
        Luce.Giallo => Luce.Rosso,
        _ => Luce.Rosso
    };
}</pre>

  </div>
</div>
      <!-- 12. Metodi -->
<div class="topic-card">
  <div class="topic-header" onclick="toggle(this.closest('.topic-card'))"><div><h3>12. I Metodi</h3><div class="topic-sub">Parametri, return, overload, ref/out, params, ricorsione, expression-bodied</div></div><span class="arrow">▼</span></div>
  <div class="topic-body">

    <h4>Cos'è un metodo?</h4>
    <pre><span class="cm">// Un metodo è un blocco di codice riutilizzabile con un nome.</span>
<span class="cm">// Invece di ripetere lo stesso codice, lo metti in un metodo e lo chiami.</span>

<span class="cm">// Struttura:</span>
<span class="cm">// [modificatore] [tipo_ritorno] NomeMetodo([parametri]) { ... }</span>

<span class="cm">// void = non restituisce niente:</span>
<span class="kw">static</span> <span class="ty">void</span> <span class="fn">Saluta</span>() {
    Console.<span class="fn">WriteLine</span>(<span class="str">"Ciao!"</span>);
}
<span class="fn">Saluta</span>();  <span class="cm">// chiamata</span>

<span class="cm">// Con parametri:</span>
<span class="kw">static</span> <span class="ty">void</span> <span class="fn">Saluta</span>(<span class="ty">string</span> nome) {
    Console.<span class="fn">WriteLine</span>(<span class="str">$"Ciao, {nome}!"</span>);
}
<span class="fn">Saluta</span>(<span class="str">"Marco"</span>);  <span class="cm">// "Ciao, Marco!"</span>
<span class="fn">Saluta</span>(<span class="str">"Giulia"</span>); <span class="cm">// "Ciao, Giulia!"</span></pre>

    <h4>return — restituire un valore</h4>
    <pre><span class="cm">// Il tipo di ritorno indica che tipo di valore il metodo restituisce:</span>
<span class="kw">static</span> <span class="ty">int</span> <span class="fn">Somma</span>(<span class="ty">int</span> a, <span class="ty">int</span> b) {
    <span class="kw">return</span> a + b;
}

<span class="kw">static</span> <span class="ty">double</span> <span class="fn">Media</span>(<span class="ty">double</span> x, <span class="ty">double</span> y) {
    <span class="kw">return</span> (x + y) / <span class="num">2</span>;
}

<span class="kw">static</span> <span class="ty">bool</span> <span class="fn">EPari</span>(<span class="ty">int</span> n) {
    <span class="kw">return</span> n % <span class="num">2</span> == <span class="num">0</span>;
}

<span class="kw">static</span> <span class="ty">string</span> <span class="fn">Classifica</span>(<span class="ty">int</span> voto) {
    <span class="kw">if</span> (voto &gt;= <span class="num">9</span>) <span class="kw">return</span> <span class="str">"Ottimo"</span>;
    <span class="kw">if</span> (voto &gt;= <span class="num">7</span>) <span class="kw">return</span> <span class="str">"Buono"</span>;
    <span class="kw">if</span> (voto &gt;= <span class="num">6</span>) <span class="kw">return</span> <span class="str">"Sufficiente"</span>;
    <span class="kw">return</span> <span class="str">"Insufficiente"</span>;
}

<span class="cm">// Uso:</span>
<span class="ty">int</span> risultato = <span class="fn">Somma</span>(<span class="num">3</span>, <span class="num">4</span>);          <span class="cm">// 7</span>
Console.<span class="fn">WriteLine</span>(<span class="fn">EPari</span>(<span class="num">10</span>));         <span class="cm">// True</span>
Console.<span class="fn">WriteLine</span>(<span class="fn">Classifica</span>(<span class="num">8</span>));     <span class="cm">// "Buono"</span></pre>

    <h4>Expression-bodied — sintassi compatta con =></h4>
    <pre><span class="cm">// Se il metodo ha una sola espressione, puoi usare =>:</span>
<span class="kw">static</span> <span class="ty">int</span>    <span class="fn">Somma2</span>(<span class="ty">int</span> a, <span class="ty">int</span> b)  => a + b;
<span class="kw">static</span> <span class="ty">bool</span>   <span class="fn">EPari2</span>(<span class="ty">int</span> n)        => n % <span class="num">2</span> == <span class="num">0</span>;
<span class="kw">static</span> <span class="ty">string</span> <span class="fn">Maiuscolo</span>(<span class="ty">string</span> s)  => s.<span class="fn">ToUpper</span>();
<span class="kw">static</span> <span class="ty">void</span>   <span class="fn">Stampa</span>(<span class="ty">string</span> s)     => Console.<span class="fn">WriteLine</span>(s);

<span class="cm">// Identico alla versione con { return ... }, solo più corta.</span></pre>

    <h4>Parametri opzionali e named</h4>
    <pre><span class="cm">// Parametri opzionali — hanno un valore di default:</span>
<span class="cm">// ATTENZIONE: i parametri opzionali devono essere ULTIMI!</span>
<span class="kw">static</span> <span class="ty">void</span> <span class="fn">Messaggio</span>(<span class="ty">string</span> testo, <span class="ty">string</span> prefisso = <span class="str">"INFO"</span>, <span class="ty">bool</span> maiusc = <span class="kw">false</span>) {
    <span class="kw">if</span> (maiusc) testo = testo.<span class="fn">ToUpper</span>();
    Console.<span class="fn">WriteLine</span>(<span class="str">$"[{prefisso}] {testo}"</span>);
}

<span class="fn">Messaggio</span>(<span class="str">"Ciao"</span>);                          <span class="cm">// [INFO] Ciao</span>
<span class="fn">Messaggio</span>(<span class="str">"Attenzione"</span>, <span class="str">"WARN"</span>);           <span class="cm">// [WARN] Attenzione</span>
<span class="fn">Messaggio</span>(<span class="str">"Errore"</span>, <span class="str">"ERR"</span>, <span class="kw">true</span>);          <span class="cm">// [ERR] ERRORE</span>

<span class="cm">// Named parameters — specifica il nome del parametro:</span>
<span class="fn">Messaggio</span>(<span class="str">"Test"</span>, maiusc: <span class="kw">true</span>);            <span class="cm">// [INFO] TEST (salti prefisso)</span></pre>

    <h4>Overloading — stesso nome, tipi diversi</h4>
    <pre><span class="cm">// Puoi avere più metodi con lo stesso nome se i parametri sono diversi:</span>
<span class="kw">static</span> <span class="ty">void</span> <span class="fn">Stampa</span>(<span class="ty">int</span> n)     => Console.<span class="fn">WriteLine</span>(<span class="str">$"Intero: {n}"</span>);
<span class="kw">static</span> <span class="ty">void</span> <span class="fn">Stampa</span>(<span class="ty">double</span> d)  => Console.<span class="fn">WriteLine</span>(<span class="str">$"Decimale: {d}"</span>);
<span class="kw">static</span> <span class="ty">void</span> <span class="fn">Stampa</span>(<span class="ty">string</span> s)  => Console.<span class="fn">WriteLine</span>(<span class="str">$"Testo: {s}"</span>);
<span class="kw">static</span> <span class="ty">void</span> <span class="fn">Stampa</span>(<span class="ty">int</span> a, <span class="ty">int</span> b) => Console.<span class="fn">WriteLine</span>(<span class="str">$"Due interi: {a}, {b}"</span>);

<span class="fn">Stampa</span>(<span class="num">42</span>);        <span class="cm">// "Intero: 42"</span>
<span class="fn">Stampa</span>(<span class="num">3.14</span>);      <span class="cm">// "Decimale: 3.14"</span>
<span class="fn">Stampa</span>(<span class="str">"Ciao"</span>);   <span class="cm">// "Testo: Ciao"</span>
<span class="fn">Stampa</span>(<span class="num">1</span>, <span class="num">2</span>);      <span class="cm">// "Due interi: 1, 2"</span>
<span class="cm">// Il compilatore sceglie il metodo giusto in base ai tipi degli argomenti</span></pre>

    <h4>ref e out — passare per riferimento</h4>
    <pre><span class="cm">// Per default, i tipi valore (int, double...) vengono COPIATI nel metodo.</span>
<span class="cm">// Con ref puoi modificare la variabile originale:</span>
<span class="kw">static</span> <span class="ty">void</span> <span class="fn">Raddoppia</span>(<span class="kw">ref</span> <span class="ty">int</span> n) { n *= <span class="num">2</span>; }

<span class="ty">int</span> x = <span class="num">5</span>;
<span class="fn">Raddoppia</span>(<span class="kw">ref</span> x);  <span class="cm">// x è 10 ora!</span>
Console.<span class="fn">WriteLine</span>(x);  <span class="cm">// 10</span>

<span class="cm">// out — restituisce più valori (la variabile non deve essere inizializzata):</span>
<span class="kw">static</span> <span class="ty">void</span> <span class="fn">MinMax</span>(<span class="ty">int</span>[] arr, <span class="kw">out</span> <span class="ty">int</span> min, <span class="kw">out</span> <span class="ty">int</span> max) {
    min = arr[<span class="num">0</span>]; max = arr[<span class="num">0</span>];
    <span class="kw">foreach</span> (<span class="ty">int</span> n <span class="kw">in</span> arr) {
        <span class="kw">if</span> (n &lt; min) min = n;
        <span class="kw">if</span> (n &gt; max) max = n;
    }
}

<span class="ty">int</span>[] numeri = { <span class="num">3</span>, <span class="num">1</span>, <span class="num">7</span>, <span class="num">2</span>, <span class="num">9</span> };
<span class="fn">MinMax</span>(numeri, <span class="kw">out int</span> minimo, <span class="kw">out int</span> massimo);
Console.<span class="fn">WriteLine</span>(<span class="str">$"Min: {minimo}  Max: {massimo}"</span>);  <span class="cm">// Min: 1  Max: 9</span></pre>
    <table>
      <tr><th></th><th>Normale</th><th>ref</th><th>out</th></tr>
      <tr><td>Copia o riferimento</td><td>Copia</td><td>Riferimento</td><td>Riferimento</td></tr>
      <tr><td>Deve essere inizializzato</td><td>Sì</td><td>Sì</td><td>No</td></tr>
      <tr><td>Può leggere il valore dentro</td><td>Sì</td><td>Sì</td><td>No (deve assegnare)</td></tr>
      <tr><td>Uso tipico</td><td>Sempre</td><td>Modifica variabile</td><td>Più valori di ritorno</td></tr>
    </table>

    <h4>params — numero variabile di argomenti</h4>
    <pre><span class="cm">// params permette di passare quanti argomenti vuoi:</span>
<span class="kw">static</span> <span class="ty">int</span> <span class="fn">Somma</span>(<span class="kw">params</span> <span class="ty">int</span>[] numeri) {
    <span class="ty">int</span> tot = <span class="num">0</span>;
    <span class="kw">foreach</span> (<span class="ty">int</span> n <span class="kw">in</span> numeri) tot += n;
    <span class="kw">return</span> tot;
}

Console.<span class="fn">WriteLine</span>(<span class="fn">Somma</span>(<span class="num">1</span>, <span class="num">2</span>));              <span class="cm">// 3</span>
Console.<span class="fn">WriteLine</span>(<span class="fn">Somma</span>(<span class="num">1</span>, <span class="num">2</span>, <span class="num">3</span>));           <span class="cm">// 6</span>
Console.<span class="fn">WriteLine</span>(<span class="fn">Somma</span>(<span class="num">1</span>, <span class="num">2</span>, <span class="num">3</span>, <span class="num">4</span>, <span class="num">5</span>));    <span class="cm">// 15</span>

<span class="cm">// Può anche ricevere un array:</span>
<span class="ty">int</span>[] arr = { <span class="num">10</span>, <span class="num">20</span>, <span class="num">30</span> };
Console.<span class="fn">WriteLine</span>(<span class="fn">Somma</span>(arr));              <span class="cm">// 60</span>

<span class="cm">// params deve essere l'ultimo parametro!</span>
<span class="kw">static</span> <span class="ty">void</span> <span class="fn">Log</span>(<span class="ty">string</span> prefisso, <span class="kw">params</span> <span class="ty">string</span>[] messaggi) {
    <span class="kw">foreach</span> (<span class="ty">string</span> m <span class="kw">in</span> messaggi)
        Console.<span class="fn">WriteLine</span>(<span class="str">$"[{prefisso}] {m}"</span>);
}
<span class="fn">Log</span>(<span class="str">"INFO"</span>, <span class="str">"Avvio"</span>, <span class="str">"Connessione"</span>, <span class="str">"Pronto"</span>);</pre>

    <h4>Ricorsione</h4>
    <pre><span class="cm">// Un metodo ricorsivo si chiama da solo.</span>
<span class="cm">// OBBLIGATORIO: un caso base che ferma la ricorsione, altrimenti ciclo infinito!</span>

<span class="cm">// Fattoriale: 5! = 5×4×3×2×1 = 120</span>
<span class="kw">static</span> <span class="ty">long</span> <span class="fn">Fattoriale</span>(<span class="ty">int</span> n) {
    <span class="kw">if</span> (n &lt;= <span class="num">1</span>) <span class="kw">return</span> <span class="num">1</span>;          <span class="cm">// caso base</span>
    <span class="kw">return</span> n * <span class="fn">Fattoriale</span>(n - <span class="num">1</span>);  <span class="cm">// chiamata ricorsiva</span>
}
<span class="cm">// Fattoriale(5) → 5 × Fattoriale(4)</span>
<span class="cm">//                     → 4 × Fattoriale(3)</span>
<span class="cm">//                           → 3 × Fattoriale(2)</span>
<span class="cm">//                                 → 2 × Fattoriale(1)</span>
<span class="cm">//                                       → 1  (caso base)</span>

<span class="cm">// Fibonacci: 0, 1, 1, 2, 3, 5, 8, 13, ...</span>
<span class="kw">static</span> <span class="ty">int</span> <span class="fn">Fibonacci</span>(<span class="ty">int</span> n) {
    <span class="kw">if</span> (n &lt;= <span class="num">1</span>) <span class="kw">return</span> n;
    <span class="kw">return</span> <span class="fn">Fibonacci</span>(n - <span class="num">1</span>) + <span class="fn">Fibonacci</span>(n - <span class="num">2</span>);
}

<span class="cm">// Potenza:</span>
<span class="kw">static</span> <span class="ty">long</span> <span class="fn">Potenza</span>(<span class="ty">long</span> base_, <span class="ty">int</span> exp) {
    <span class="kw">if</span> (exp == <span class="num">0</span>) <span class="kw">return</span> <span class="num">1</span>;
    <span class="kw">return</span> base_ * <span class="fn">Potenza</span>(base_, exp - <span class="num">1</span>);
}</pre>

    <h4>Progetto — Calcolatrice con metodi</h4>
    <pre><span class="kw">static</span> <span class="ty">double</span> <span class="fn">Somma</span>(<span class="ty">double</span> a, <span class="ty">double</span> b)    => a + b;
<span class="kw">static</span> <span class="ty">double</span> <span class="fn">Sottrai</span>(<span class="ty">double</span> a, <span class="ty">double</span> b)  => a - b;
<span class="kw">static</span> <span class="ty">double</span> <span class="fn">Moltiplica</span>(<span class="ty">double</span> a, <span class="ty">double</span> b) => a * b;
<span class="kw">static</span> <span class="ty">double</span> <span class="fn">Dividi</span>(<span class="ty">double</span> a, <span class="ty">double</span> b) {
    <span class="kw">if</span> (b == <span class="num">0</span>) { Console.<span class="fn">WriteLine</span>(<span class="str">"Errore: divisione per zero!"</span>); <span class="kw">return</span> <span class="ty">double</span>.NaN; }
    <span class="kw">return</span> a / b;
}
<span class="kw">static</span> <span class="ty">void</span> <span class="fn">MostraRisultato</span>(<span class="ty">double</span> a, <span class="ty">string</span> op, <span class="ty">double</span> b, <span class="ty">double</span> ris) =>
    Console.<span class="fn">WriteLine</span>(<span class="str">$"{a} {op} {b} = {ris}"</span>);

<span class="kw">while</span> (<span class="kw">true</span>) {
    Console.<span class="fn">Write</span>(<span class="str">"Primo numero: "</span>);
    <span class="kw">if</span> (!<span class="ty">double</span>.<span class="fn">TryParse</span>(Console.<span class="fn">ReadLine</span>(), <span class="kw">out double</span> a)) <span class="kw">break</span>;
    Console.<span class="fn">Write</span>(<span class="str">"Operazione (+,-,*,/): "</span>);
    <span class="ty">string</span> op = Console.<span class="fn">ReadLine</span>();
    Console.<span class="fn">Write</span>(<span class="str">"Secondo numero: "</span>);
    <span class="kw">if</span> (!<span class="ty">double</span>.<span class="fn">TryParse</span>(Console.<span class="fn">ReadLine</span>(), <span class="kw">out double</span> b)) <span class="kw">break</span>;
    <span class="ty">double</span> ris = op <span class="kw">switch</span> {
        <span class="str">"+"</span> => <span class="fn">Somma</span>(a, b), <span class="str">"-"</span> => <span class="fn">Sottrai</span>(a, b),
        <span class="str">"*"</span> => <span class="fn">Moltiplica</span>(a, b), <span class="str">"/"</span> => <span class="fn">Dividi</span>(a, b),
        _ => <span class="ty">double</span>.NaN
    };
    <span class="fn">MostraRisultato</span>(a, op, b, ris);
}</pre>

    <h4>Errori comuni</h4>
    <pre><span class="cm">// 1. Dimenticare return:</span>
<span class="kw">static</span> <span class="ty">int</span> <span class="fn">Somma</span>(<span class="ty">int</span> a, <span class="ty">int</span> b) {
    <span class="ty">int</span> ris = a + b;
    <span class="cm">// return ris;  ← dimenticato! Errore di compilazione</span>
}

<span class="cm">// 2. Ricorsione senza caso base:</span>
<span class="kw">static</span> <span class="ty">int</span> <span class="fn">Infinito</span>(<span class="ty">int</span> n) {
    <span class="kw">return</span> n * <span class="fn">Infinito</span>(n - <span class="num">1</span>);  <span class="cm">// ← StackOverflowException!</span>
    <span class="cm">// manca il caso base!</span>
}

<span class="cm">// 3. Parametri opzionali non ultimi:</span>
<span class="cm">// static void Test(string a = "x", int b)  ← ERRORE!</span>
<span class="cm">// static void Test(int b, string a = "x")  ← OK</span>

<span class="cm">// 4. ref senza la keyword alla chiamata:</span>
<span class="kw">static</span> <span class="ty">void</span> <span class="fn">Raddoppia</span>(<span class="kw">ref</span> <span class="ty">int</span> n) { n *= <span class="num">2</span>; }
<span class="ty">int</span> x = <span class="num">5</span>;
<span class="cm">// Raddoppia(x);       ← ERRORE! Manca ref</span>
<span class="cm">// Raddoppia(ref x);   ← OK</span></pre>

    <h4>Esercizi</h4>
    <pre><span class="cm">// FACILE:</span>
<span class="cm">// 1. Scrivi un metodo che riceve nome e cognome e restituisce "Cognome, Nome"</span>
<span class="cm">// 2. Scrivi un metodo che verifica se un numero è primo</span>
<span class="cm">// 3. Scrivi un metodo che calcola l'area di un cerchio dato il raggio</span>
<span class="cm">// MEDIO:</span>
<span class="cm">// 4. Scrivi un metodo che conta le vocali in una stringa</span>
<span class="cm">// 5. Scrivi un metodo che inverte un array di interi</span>
<span class="cm">// 6. Usa out per restituire sia la somma che la media di un array</span>
<span class="cm">// DIFFICILE:</span>
<span class="cm">// 7. Scrivi un metodo ricorsivo per la somma delle cifre di un numero</span>
<span class="cm">// 8. Scrivi un metodo con params che calcola il massimo tra N numeri</span>
<span class="cm">// 9. Scrivi un metodo che controlla se una stringa è palindroma (ricorsivo)</span></pre>

    <h4>Soluzioni</h4>
    <pre><span class="cm">// --- 1. ---</span>
<span class="kw">static</span> <span class="ty">string</span> <span class="fn">FormatNome</span>(<span class="ty">string</span> nome, <span class="ty">string</span> cognome) => <span class="str">$"{cognome}, {nome}"</span>;
Console.<span class="fn">WriteLine</span>(<span class="fn">FormatNome</span>(<span class="str">"Marco"</span>, <span class="str">"Rossi"</span>)); <span class="cm">// "Rossi, Marco"</span>

<span class="cm">// --- 2. ---</span>
<span class="kw">static</span> <span class="ty">bool</span> <span class="fn">EPrimo</span>(<span class="ty">int</span> n) {
    <span class="kw">if</span> (n &lt; <span class="num">2</span>) <span class="kw">return</span> <span class="kw">false</span>;
    <span class="kw">for</span> (<span class="ty">int</span> i = <span class="num">2</span>; i &lt;= Math.<span class="fn">Sqrt</span>(n); i++)
        <span class="kw">if</span> (n % i == <span class="num">0</span>) <span class="kw">return</span> <span class="kw">false</span>;
    <span class="kw">return</span> <span class="kw">true</span>;
}

<span class="cm">// --- 3. ---</span>
<span class="kw">static</span> <span class="ty">double</span> <span class="fn">AreaCerchio</span>(<span class="ty">double</span> r) => Math.PI * r * r;

<span class="cm">// --- 4. ---</span>
<span class="kw">static</span> <span class="ty">int</span> <span class="fn">ContaVocali</span>(<span class="ty">string</span> s) {
    <span class="ty">int</span> cnt = <span class="num">0</span>;
    <span class="kw">foreach</span> (<span class="ty">char</span> c <span class="kw">in</span> s.<span class="fn">ToLower</span>()) <span class="kw">if</span> (<span class="str">"aeiou"</span>.<span class="fn">Contains</span>(c)) cnt++;
    <span class="kw">return</span> cnt;
}

<span class="cm">// --- 5. ---</span>
<span class="kw">static</span> <span class="ty">void</span> <span class="fn">InvertiArray</span>(<span class="ty">int</span>[] arr) {
    <span class="kw">for</span> (<span class="ty">int</span> i = <span class="num">0</span>; i &lt; arr.Length / <span class="num">2</span>; i++) {
        (<span class="ty">int</span> tmp) = arr[i]; arr[i] = arr[arr.Length-<span class="num">1</span>-i]; arr[arr.Length-<span class="num">1</span>-i] = tmp;
    }
}

<span class="cm">// --- 6. ---</span>
<span class="kw">static</span> <span class="ty">void</span> <span class="fn">SommaMedia</span>(<span class="ty">int</span>[] arr, <span class="kw">out int</span> somma, <span class="kw">out double</span> media) {
    somma = <span class="num">0</span>;
    <span class="kw">foreach</span> (<span class="ty">int</span> n <span class="kw">in</span> arr) somma += n;
    media = (<span class="ty">double</span>)somma / arr.Length;
}

<span class="cm">// --- 7. Somma cifre ricorsiva ---</span>
<span class="kw">static</span> <span class="ty">int</span> <span class="fn">SommaCifre</span>(<span class="ty">int</span> n) {
    <span class="kw">if</span> (n &lt; <span class="num">10</span>) <span class="kw">return</span> n;
    <span class="kw">return</span> n % <span class="num">10</span> + <span class="fn">SommaCifre</span>(n / <span class="num">10</span>);
}
Console.<span class="fn">WriteLine</span>(<span class="fn">SommaCifre</span>(<span class="num">1234</span>)); <span class="cm">// 10</span>

<span class="cm">// --- 8. Massimo con params ---</span>
<span class="kw">static</span> <span class="ty">int</span> <span class="fn">Massimo</span>(<span class="kw">params</span> <span class="ty">int</span>[] nums) {
    <span class="ty">int</span> max = nums[<span class="num">0</span>];
    <span class="kw">foreach</span> (<span class="ty">int</span> n <span class="kw">in</span> nums) <span class="kw">if</span> (n &gt; max) max = n;
    <span class="kw">return</span> max;
}
Console.<span class="fn">WriteLine</span>(<span class="fn">Massimo</span>(<span class="num">3</span>, <span class="num">7</span>, <span class="num">1</span>, <span class="num">9</span>, <span class="num">4</span>)); <span class="cm">// 9</span>

<span class="cm">// --- 9. Palindromo ricorsivo ---</span>
<span class="kw">static</span> <span class="ty">bool</span> <span class="fn">Palindromo</span>(<span class="ty">string</span> s) {
    <span class="kw">if</span> (s.Length &lt;= <span class="num">1</span>) <span class="kw">return</span> <span class="kw">true</span>;
    <span class="kw">if</span> (s[<span class="num">0</span>] != s[^<span class="num">1</span>]) <span class="kw">return</span> <span class="kw">false</span>;
    <span class="kw">return</span> <span class="fn">Palindromo</span>(s[<span class="num">1</span>..^<span class="num">1</span>]);
}
Console.<span class="fn">WriteLine</span>(<span class="fn">Palindromo</span>(<span class="str">"kayak"</span>)); <span class="cm">// true</span></pre>

  </div>
</div>
      <!-- 13. Struct -->
<div class="topic-card">
  <div class="topic-header" onclick="toggle(this.closest('.topic-card'))"><div><h3>13. Struct</h3><div class="topic-sub">Tipo valore, campi, costruttori, metodi, struct vs class</div></div><span class="arrow">▼</span></div>
  <div class="topic-body">

    <h4>Cos'è una struct?</h4>
    <pre><span class="cm">// Una struct è un tipo che raggruppa dati correlati.</span>
<span class="cm">// Simile a una classe, ma è un TIPO VALORE (copiata, non riferita).</span>
<span class="cm">// Ideale per dati semplici: coordinate, colori, punti, intervalli...</span>

<span class="kw">struct</span> Punto {
    <span class="kw">public</span> <span class="ty">double</span> X;
    <span class="kw">public</span> <span class="ty">double</span> Y;
}

Punto p1 = <span class="kw">new</span> Punto();  <span class="cm">// X=0, Y=0</span>
p1.X = <span class="num">3.0</span>;
p1.Y = <span class="num">4.0</span>;
Console.<span class="fn">WriteLine</span>(<span class="str">$"Punto: ({p1.X}, {p1.Y})"</span>);</pre>

    <h4>Costruttori e metodi</h4>
    <pre><span class="kw">struct</span> Prodotto {
    <span class="kw">public</span> <span class="ty">string</span> Nome;
    <span class="kw">public</span> <span class="ty">double</span> Prezzo;
    <span class="kw">public</span> <span class="ty">int</span>    Quantita;

    <span class="cm">// Costruttore — inizializza i campi:</span>
    <span class="kw">public</span> <span class="fn">Prodotto</span>(<span class="ty">string</span> nome, <span class="ty">double</span> prezzo, <span class="ty">int</span> qty) {
        Nome = nome;
        Prezzo = prezzo;
        Quantita = qty;
    }

    <span class="cm">// Metodi — funzionano come nelle classi:</span>
    <span class="kw">public</span> <span class="ty">double</span> <span class="fn">ValoreTotale</span>() => Prezzo * Quantita;

    <span class="kw">public</span> <span class="ty">string</span> <span class="fn">Descrivi</span>() =>
        <span class="str">$"{Nome}: €{Prezzo:F2} × {Quantita} = €{ValoreTotale():F2}"</span>;

    <span class="cm">// Override di ToString:</span>
    <span class="kw">public</span> <span class="kw">override</span> <span class="ty">string</span> <span class="fn">ToString</span>() => <span class="fn">Descrivi</span>();
}

Prodotto pizza = <span class="kw">new</span> <span class="fn">Prodotto</span>(<span class="str">"Pizza"</span>,  <span class="num">8.50</span>, <span class="num">10</span>);
Prodotto pasta = <span class="kw">new</span> <span class="fn">Prodotto</span>(<span class="str">"Pasta"</span>,  <span class="num">1.20</span>,  <span class="num">5</span>);
Console.<span class="fn">WriteLine</span>(pizza.<span class="fn">Descrivi</span>());    <span class="cm">// Pizza: €8.50 × 10 = €85.00</span>
Console.<span class="fn">WriteLine</span>(pasta.<span class="fn">ValoreTotale</span>()); <span class="cm">// 6.0</span></pre>

    <h4>La differenza chiave: copia vs riferimento</h4>
    <pre><span class="cm">// STRUCT — copia indipendente:</span>
Prodotto orig = <span class="kw">new</span> <span class="fn">Prodotto</span>(<span class="str">"Mela"</span>, <span class="num">0.50</span>, <span class="num">3</span>);
Prodotto copia = orig;           <span class="cm">// copia INDIPENDENTE</span>
copia.Prezzo = <span class="num">1.00</span>;            <span class="cm">// modifica solo la copia!</span>
Console.<span class="fn">WriteLine</span>(orig.Prezzo);  <span class="cm">// 0.50 — orig NON cambia</span>
Console.<span class="fn">WriteLine</span>(copia.Prezzo); <span class="cm">// 1.00</span>

<span class="cm">// CLASS — riferimento condiviso (per confronto):</span>
<span class="cm">// Se Prodotto fosse una classe:</span>
<span class="cm">// Prodotto ref2 = orig;    // puntano allo STESSO oggetto</span>
<span class="cm">// ref2.Prezzo = 1.00;      // modifica anche orig!</span></pre>

    <table>
      <tr><th>Caratteristica</th><th>struct</th><th>class</th></tr>
      <tr><td>Tipo</td><td>Valore (Stack)</td><td>Riferimento (Heap)</td></tr>
      <tr><td>Copia</td><td>Indipendente</td><td>Condivisa (stesso oggetto)</td></tr>
      <tr><td>Ereditarietà</td><td>No (solo interfacce)</td><td>Sì</td></tr>
      <tr><td>null</td><td>Non può essere null</td><td>Può essere null</td></tr>
      <tr><td>Performance</td><td>Meglio per dati piccoli</td><td>Meglio per dati grandi</td></tr>
      <tr><td>Usalo per</td><td>Punti, colori, coordinate</td><td>Oggetti complessi con logica</td></tr>
    </table>

    <h4>Struct predefinite in C#</h4>
    <pre><span class="cm">// Molti tipi base di C# sono struct:</span>
<span class="cm">// int, double, bool, char, DateTime, TimeSpan, decimal...</span>

DateTime oggi = DateTime.Today;
Console.<span class="fn">WriteLine</span>(oggi);              <span class="cm">// data odierna</span>

<span class="cm">// Anche il tipo int è una struct (alias di System.Int32):</span>
<span class="ty">int</span> n = <span class="num">42</span>;
Console.<span class="fn">WriteLine</span>(n.<span class="fn">GetType</span>());       <span class="cm">// System.Int32</span>
Console.<span class="fn">WriteLine</span>(<span class="ty">int</span>.MaxValue);      <span class="cm">// 2147483647</span>
Console.<span class="fn">WriteLine</span>(<span class="ty">int</span>.MinValue);      <span class="cm">// -2147483648</span></pre>

    <h4>Progetto — Gestione magazzino</h4>
    <pre><span class="kw">struct</span> Articolo {
    <span class="kw">public</span> <span class="ty">string</span> Codice;
    <span class="kw">public</span> <span class="ty">string</span> Nome;
    <span class="kw">public</span> <span class="ty">double</span> Prezzo;
    <span class="kw">public</span> <span class="ty">int</span>    Scorta;

    <span class="kw">public</span> <span class="fn">Articolo</span>(<span class="ty">string</span> cod, <span class="ty">string</span> nome, <span class="ty">double</span> prezzo, <span class="ty">int</span> scorta) {
        Codice = cod; Nome = nome; Prezzo = prezzo; Scorta = scorta;
    }
    <span class="kw">public</span> <span class="ty">bool</span>   <span class="fn">Disponibile</span>()    => Scorta &gt; <span class="num">0</span>;
    <span class="kw">public</span> <span class="ty">double</span> <span class="fn">ValoreMagazzino</span>() => Prezzo * Scorta;
    <span class="kw">public</span> <span class="kw">override</span> <span class="ty">string</span> <span class="fn">ToString</span>() =>
        <span class="str">$"[{Codice}] {Nome,-20} €{Prezzo,6:F2}  Scorta: {Scorta,4}  Valore: €{ValoreMagazzino():F2}"</span>;
}

Articolo[] magazzino = {
    <span class="kw">new</span> <span class="fn">Articolo</span>(<span class="str">"A001"</span>, <span class="str">"Pizza Margherita"</span>,  <span class="num">8.50</span>, <span class="num">50</span>),
    <span class="kw">new</span> <span class="fn">Articolo</span>(<span class="str">"A002"</span>, <span class="str">"Pasta al Pomodoro"</span>, <span class="num">6.00</span>,  <span class="num">0</span>),
    <span class="kw">new</span> <span class="fn">Articolo</span>(<span class="str">"A003"</span>, <span class="str">"Tiramisu"</span>,          <span class="num">4.50</span>, <span class="num">20</span>),
};

Console.<span class="fn">WriteLine</span>(<span class="str">"=== MAGAZZINO ==="</span>);
<span class="ty">double</span> totale = <span class="num">0</span>;
<span class="kw">foreach</span> (<span class="kw">var</span> a <span class="kw">in</span> magazzino) {
    Console.<span class="fn">WriteLine</span>(<span class="str">$"{a}  {(a.Disponibile() ? "OK" : "ESAURITO")}"</span>);
    totale += a.<span class="fn">ValoreMagazzino</span>();
}
Console.<span class="fn">WriteLine</span>(<span class="str">$"\nValore totale magazzino: €{totale:F2}"</span>);</pre>

    <h4>Errori comuni</h4>
    <pre><span class="cm">// 1. La struct è copiata — modifiche nel metodo non si propagano:</span>
<span class="kw">static</span> <span class="ty">void</span> <span class="fn">AumentaPrezzo</span>(Prodotto p) {
    p.Prezzo *= <span class="num">1.1</span>;  <span class="cm">// modifica solo la COPIA locale!</span>
}
Prodotto prod = <span class="kw">new</span> <span class="fn">Prodotto</span>(<span class="str">"Pizza"</span>, <span class="num">8.50</span>, <span class="num">5</span>);
<span class="fn">AumentaPrezzo</span>(prod);
Console.<span class="fn">WriteLine</span>(prod.Prezzo);  <span class="cm">// ancora 8.50! Non è cambiato</span>
<span class="cm">// Soluzione: usa ref</span>
<span class="kw">static</span> <span class="ty">void</span> <span class="fn">AumentaPrezzoRef</span>(<span class="kw">ref</span> Prodotto p) { p.Prezzo *= <span class="num">1.1</span>; }
<span class="fn">AumentaPrezzoRef</span>(<span class="kw">ref</span> prod);
Console.<span class="fn">WriteLine</span>(prod.Prezzo);  <span class="cm">// 9.35 — modificato!</span>

<span class="cm">// 2. Struct troppo grande — meglio usare una class:</span>
<span class="cm">// Una struct con 20 campi viene copiata tutta ogni volta — inefficiente!</span>
<span class="cm">// Regola: struct per 4-5 campi piccoli al massimo, altrimenti usa class</span>

<span class="cm">// 3. Struct non può essere null (a meno di usare ?):</span>
<span class="cm">// Prodotto p2 = null;   ← ERRORE!</span>
<span class="cm">// Prodotto? p2 = null;  ← OK con nullable</span></pre>

    <h4>Esercizi</h4>
    <pre><span class="cm">// FACILE:</span>
<span class="cm">// 1. Crea struct Punto2D (X, Y) con metodo DistanzaDallOrigine()</span>
<span class="cm">// 2. Crea struct Colore (R, G, B) con ToString() che stampa "rgb(R,G,B)"</span>
<span class="cm">// 3. Crea struct Studente (Nome, Voto) e un array di 5 studenti</span>
<span class="cm">// MEDIO:</span>
<span class="cm">// 4. Crea struct Rettangolo con Area(), Perimetro(), e IsQuadrato()</span>
<span class="cm">// 5. Crea struct Frazione (Numeratore, Denominatore) con metodo Descrivi()</span>
<span class="cm">// 6. Gestisci un array di Prodotto e calcola il valore totale del carrello</span>
<span class="cm">// DIFFICILE:</span>
<span class="cm">// 7. Crea struct Vettore2D con Somma(), Lunghezza(), Normalizza()</span>
<span class="cm">// 8. Crea struct Data (Giorno, Mese, Anno) con validazione nel costruttore</span>
<span class="cm">// 9. Gestisci un inventario di Articoli con ricerca per codice e stampa report</span></pre>

    <h4>Soluzioni</h4>
    <pre><span class="cm">// --- 1. Punto2D ---</span>
<span class="kw">struct</span> Punto2D {
    <span class="kw">public</span> <span class="ty">double</span> X, Y;
    <span class="kw">public</span> <span class="fn">Punto2D</span>(<span class="ty">double</span> x, <span class="ty">double</span> y) { X = x; Y = y; }
    <span class="kw">public</span> <span class="ty">double</span> <span class="fn">DistanzaDallOrigine</span>() => Math.<span class="fn">Sqrt</span>(X*X + Y*Y);
    <span class="kw">public</span> <span class="kw">override</span> <span class="ty">string</span> <span class="fn">ToString</span>() => <span class="str">$"({X}, {Y})"</span>;
}
Punto2D pt = <span class="kw">new</span>(<span class="num">3</span>, <span class="num">4</span>);
Console.<span class="fn">WriteLine</span>(<span class="str">$"{pt} distanza: {pt.DistanzaDallOrigine()}"</span>); <span class="cm">// 5</span>

<span class="cm">// --- 2. Colore ---</span>
<span class="kw">struct</span> Colore {
    <span class="kw">public</span> <span class="ty">byte</span> R, G, B;
    <span class="kw">public</span> <span class="fn">Colore</span>(<span class="ty">byte</span> r, <span class="ty">byte</span> g, <span class="ty">byte</span> b) { R = r; G = g; B = b; }
    <span class="kw">public</span> <span class="kw">override</span> <span class="ty">string</span> <span class="fn">ToString</span>() => <span class="str">$"rgb({R},{G},{B})"</span>;
    <span class="kw">public</span> <span class="ty">string</span> <span class="fn">ToHex</span>() => <span class="str">$"#{R:X2}{G:X2}{B:X2}"</span>;
}
Colore rosso = <span class="kw">new</span>(<span class="num">255</span>, <span class="num">0</span>, <span class="num">0</span>);
Console.<span class="fn">WriteLine</span>(<span class="str">$"{rosso}  {rosso.ToHex()}"</span>); <span class="cm">// rgb(255,0,0)  #FF0000</span>

<span class="cm">// --- 3. Studenti ---</span>
<span class="kw">struct</span> Studente3 { <span class="kw">public</span> <span class="ty">string</span> Nome; <span class="kw">public</span> <span class="ty">int</span> Voto; }
Studente3[] s3 = {
    <span class="kw">new</span>() { Nome=<span class="str">"Marco"</span>,  Voto=<span class="num">8</span>  },
    <span class="kw">new</span>() { Nome=<span class="str">"Giulia"</span>, Voto=<span class="num">9</span>  },
    <span class="kw">new</span>() { Nome=<span class="str">"Luca"</span>,   Voto=<span class="num">7</span>  },
    <span class="kw">new</span>() { Nome=<span class="str">"Anna"</span>,   Voto=<span class="num">10</span> },
    <span class="kw">new</span>() { Nome=<span class="str">"Paolo"</span>,  Voto=<span class="num">6</span>  }
};
<span class="kw">foreach</span> (<span class="kw">var</span> s <span class="kw">in</span> s3) Console.<span class="fn">WriteLine</span>(<span class="str">$"{s.Nome,-10} {s.Voto}"</span>);

<span class="cm">// --- 4. Rettangolo ---</span>
<span class="kw">struct</span> Rettangolo {
    <span class="kw">public</span> <span class="ty">double</span> Base, Altezza;
    <span class="kw">public</span> <span class="fn">Rettangolo</span>(<span class="ty">double</span> b, <span class="ty">double</span> a) { Base = b; Altezza = a; }
    <span class="kw">public</span> <span class="ty">double</span> <span class="fn">Area</span>()       => Base * Altezza;
    <span class="kw">public</span> <span class="ty">double</span> <span class="fn">Perimetro</span>()  => <span class="num">2</span> * (Base + Altezza);
    <span class="kw">public</span> <span class="ty">bool</span>   <span class="fn">IsQuadrato</span>() => Base == Altezza;
}
Rettangolo r4 = <span class="kw">new</span>(<span class="num">5</span>, <span class="num">3</span>);
Console.<span class="fn">WriteLine</span>(<span class="str">$"Area:{r4.Area()}  Perim:{r4.Perimetro()}  Quadrato:{r4.IsQuadrato()}"</span>);

<span class="cm">// --- 5. Frazione ---</span>
<span class="kw">struct</span> Frazione {
    <span class="kw">public</span> <span class="ty">int</span> Numeratore, Denominatore;
    <span class="kw">public</span> <span class="fn">Frazione</span>(<span class="ty">int</span> n, <span class="ty">int</span> d) {
        <span class="kw">if</span> (d == <span class="num">0</span>) <span class="kw">throw new</span> ArgumentException(<span class="str">"Denominatore non può essere 0!"</span>);
        Numeratore = n; Denominatore = d;
    }
    <span class="kw">public</span> <span class="ty">double</span> <span class="fn">Valore</span>()   => (<span class="ty">double</span>)Numeratore / Denominatore;
    <span class="kw">public</span> <span class="kw">override</span> <span class="ty">string</span> <span class="fn">ToString</span>() => <span class="str">$"{Numeratore}/{Denominatore} = {Valore():F3}"</span>;
}
Frazione f5 = <span class="kw">new</span>(<span class="num">3</span>, <span class="num">4</span>);
Console.<span class="fn">WriteLine</span>(f5); <span class="cm">// 3/4 = 0.750</span>

<span class="cm">// --- 6. Carrello ---</span>
Prodotto[] carrello = {
    <span class="kw">new</span> <span class="fn">Prodotto</span>(<span class="str">"Pizza"</span>, <span class="num">8.50</span>, <span class="num">2</span>),
    <span class="kw">new</span> <span class="fn">Prodotto</span>(<span class="str">"Birra"</span>, <span class="num">2.00</span>, <span class="num">4</span>),
    <span class="kw">new</span> <span class="fn">Prodotto</span>(<span class="str">"Dolce"</span>, <span class="num">3.50</span>, <span class="num">1</span>)
};
<span class="ty">double</span> tot6 = <span class="num">0</span>;
<span class="kw">foreach</span> (<span class="kw">var</span> p <span class="kw">in</span> carrello) {
    Console.<span class="fn">WriteLine</span>(p);
    tot6 += p.<span class="fn">ValoreTotale</span>();
}
Console.<span class="fn">WriteLine</span>(<span class="str">$"TOTALE: €{tot6:F2}"</span>);

<span class="cm">// --- 7. Vettore2D ---</span>
<span class="kw">struct</span> Vettore2D {
    <span class="kw">public</span> <span class="ty">double</span> X, Y;
    <span class="kw">public</span> <span class="fn">Vettore2D</span>(<span class="ty">double</span> x, <span class="ty">double</span> y) { X = x; Y = y; }
    <span class="kw">public</span> <span class="ty">double</span>    <span class="fn">Lunghezza</span>()           => Math.<span class="fn">Sqrt</span>(X*X + Y*Y);
    <span class="kw">public</span> Vettore2D  <span class="fn">Somma</span>(Vettore2D v)    => <span class="kw">new</span>(X+v.X, Y+v.Y);
    <span class="kw">public</span> Vettore2D  <span class="fn">Normalizza</span>() {
        <span class="ty">double</span> len = <span class="fn">Lunghezza</span>();
        <span class="kw">return</span> len &gt; <span class="num">0</span> ? <span class="kw">new</span>(X/len, Y/len) : <span class="kw">new</span>(<span class="num">0</span>, <span class="num">0</span>);
    }
    <span class="kw">public</span> <span class="kw">override</span> <span class="ty">string</span> <span class="fn">ToString</span>() => <span class="str">$"({X:F2}, {Y:F2})"</span>;
}
Vettore2D v1 = <span class="kw">new</span>(<span class="num">3</span>, <span class="num">4</span>);
Console.<span class="fn">WriteLine</span>(<span class="str">$"Lunghezza: {v1.Lunghezza()}"</span>);      <span class="cm">// 5</span>
Console.<span class="fn">WriteLine</span>(<span class="str">$"Normalizzato: {v1.Normalizza()}"</span>);  <span class="cm">// (0.60, 0.80)</span>
Console.<span class="fn">WriteLine</span>(<span class="str">$"Somma: {v1.Somma(new(1,1))}"</span>);      <span class="cm">// (4.00, 5.00)</span>

<span class="cm">// --- 8. Data con validazione ---</span>
<span class="kw">struct</span> Data {
    <span class="kw">public</span> <span class="ty">int</span> Giorno, Mese, Anno;
    <span class="kw">public</span> <span class="fn">Data</span>(<span class="ty">int</span> g, <span class="ty">int</span> m, <span class="ty">int</span> a) {
        <span class="kw">if</span> (m &lt; <span class="num">1</span> || m &gt; <span class="num">12</span>) <span class="kw">throw new</span> ArgumentException(<span class="str">"Mese non valido!"</span>);
        <span class="kw">if</span> (g &lt; <span class="num">1</span> || g &gt; <span class="num">31</span>) <span class="kw">throw new</span> ArgumentException(<span class="str">"Giorno non valido!"</span>);
        Giorno = g; Mese = m; Anno = a;
    }
    <span class="kw">public</span> <span class="kw">override</span> <span class="ty">string</span> <span class="fn">ToString</span>() => <span class="str">$"{Giorno:D2}/{Mese:D2}/{Anno}"</span>;
}
Data d8 = <span class="kw">new</span>(<span class="num">25</span>, <span class="num">12</span>, <span class="num">2025</span>);
Console.<span class="fn">WriteLine</span>(d8); <span class="cm">// 25/12/2025</span>

<span class="cm">// --- 9. Inventario con ricerca ---</span>
Articolo[] inv9 = {
    <span class="kw">new</span> <span class="fn">Articolo</span>(<span class="str">"B001"</span>, <span class="str">"Laptop"</span>,  <span class="num">999.00</span>, <span class="num">5</span>),
    <span class="kw">new</span> <span class="fn">Articolo</span>(<span class="str">"B002"</span>, <span class="str">"Mouse"</span>,   <span class="num">29.90</span>, <span class="num">20</span>),
    <span class="kw">new</span> <span class="fn">Articolo</span>(<span class="str">"B003"</span>, <span class="str">"Tastiera"</span>,<span class="num">49.90</span>,  <span class="num">0</span>)
};
Console.<span class="fn">Write</span>(<span class="str">"Cerca codice: "</span>); <span class="ty">string</span> cerca9 = Console.<span class="fn">ReadLine</span>();
<span class="ty">bool</span> trovato9 = <span class="kw">false</span>;
<span class="kw">foreach</span> (<span class="kw">var</span> art <span class="kw">in</span> inv9) {
    <span class="kw">if</span> (art.Codice.<span class="fn">ToUpper</span>() == cerca9.<span class="fn">ToUpper</span>()) {
        Console.<span class="fn">WriteLine</span>(<span class="str">$"Trovato: {art}"</span>);
        trovato9 = <span class="kw">true</span>; <span class="kw">break</span>;
    }
}
<span class="kw">if</span> (!trovato9) Console.<span class="fn">WriteLine</span>(<span class="str">"Articolo non trovato"</span>);</pre>

  </div>
</div>
      <!-- 14. Nullable & Null Operators -->
<div class="topic-card">
  <div class="topic-header" onclick="toggle(this.closest('.topic-card'))"><div><h3>14. Nullable &amp; Null Operators</h3><div class="topic-sub">int?, string?, ??, ?., ??=, HasValue, null-forgiving</div></div><span class="arrow">▼</span></div>
  <div class="topic-body">

    <h4>Cos'è null?</h4>
    <pre><span class="cm">// null significa "nessun valore" o "non inizializzato".</span>
<span class="cm">// I tipi riferimento (string, class) possono essere null.</span>
<span class="cm">// I tipi valore (int, double, bool) NON possono essere null... a meno che:</span>

<span class="ty">string</span> nome = <span class="kw">null</span>;   <span class="cm">// OK — string è un tipo riferimento</span>
<span class="ty">int</span>    eta  = <span class="kw">null</span>;   <span class="cm">// ERRORE! int non può essere null</span>
<span class="ty">int</span>?   eta2 = <span class="kw">null</span>;   <span class="cm">// OK — int? è un nullable int</span></pre>

    <h4>Tipi nullable — il ? dopo il tipo</h4>
    <pre><span class="cm">// Aggiungi ? per rendere un tipo valore nullable:</span>
<span class="ty">int</span>?    eta     = <span class="kw">null</span>;
<span class="ty">double</span>? altezza = <span class="kw">null</span>;
<span class="ty">bool</span>?   attivo  = <span class="kw">null</span>;  <span class="cm">// true, false, o null (sconosciuto)</span>

<span class="cm">// Assegnare un valore:</span>
eta = <span class="num">25</span>;
Console.<span class="fn">WriteLine</span>(eta);  <span class="cm">// 25</span>

<span class="cm">// Verificare se ha valore:</span>
<span class="kw">if</span> (eta.HasValue)
    Console.<span class="fn">WriteLine</span>(<span class="str">$"Eta: {eta.Value}"</span>);
<span class="kw">else</span>
    Console.<span class="fn">WriteLine</span>(<span class="str">"Eta non inserita"</span>);

<span class="cm">// Scorciatoia equivalente:</span>
<span class="kw">if</span> (eta != <span class="kw">null</span>)
    Console.<span class="fn">WriteLine</span>(<span class="str">$"Eta: {eta}"</span>);</pre>

    <h4>?? — operatore null coalescing (valore di default)</h4>
    <pre><span class="cm">// Se il valore è null, usa quello a destra del ??</span>
<span class="ty">int</span>?   eta3  = <span class="kw">null</span>;
<span class="ty">string</span> nome2 = <span class="kw">null</span>;

<span class="ty">int</span>    etaReale = eta3  ?? <span class="num">0</span>;              <span class="cm">// 0 se null</span>
<span class="ty">string</span> nomeVero = nome2 ?? <span class="str">"Sconosciuto"</span>; <span class="cm">// "Sconosciuto" se null</span>

Console.<span class="fn">WriteLine</span>(etaReale);  <span class="cm">// 0</span>
Console.<span class="fn">WriteLine</span>(nomeVero);  <span class="cm">// "Sconosciuto"</span>

<span class="cm">// Concatenazione ??:</span>
<span class="ty">string</span> a = <span class="kw">null</span>, b = <span class="kw">null</span>, c = <span class="str">"trovato"</span>;
<span class="ty">string</span> ris = a ?? b ?? c;  <span class="cm">// "trovato" — prende il primo non-null</span>

<span class="cm">// Uso pratico — input utente:</span>
Console.<span class="fn">Write</span>(<span class="str">"Nome (invio per default): "</span>);
<span class="ty">string</span> input = Console.<span class="fn">ReadLine</span>();
<span class="ty">string</span> nomeFin = input ?? <span class="str">"Ospite"</span>;
<span class="cm">// Se l'utente preme solo invio, ReadLine restituisce ""</span>
<span class="ty">string</span> nomeFin2 = <span class="ty">string</span>.<span class="fn">IsNullOrWhiteSpace</span>(input) ? <span class="str">"Ospite"</span> : input;</pre>

    <h4>??= — assegnazione null coalescing</h4>
    <pre><span class="cm">// Assegna solo se la variabile è null:</span>
<span class="ty">string</span>? config = <span class="kw">null</span>;
config ??= <span class="str">"valore_default"</span>;  <span class="cm">// assegna perché è null</span>
Console.<span class="fn">WriteLine</span>(config);      <span class="cm">// "valore_default"</span>

config ??= <span class="str">"altro"</span>;  <span class="cm">// NON assegna, config è già "valore_default"</span>
Console.<span class="fn">WriteLine</span>(config);  <span class="cm">// "valore_default"</span>

<span class="cm">// Equivalente a:</span>
<span class="cm">// if (config == null) config = "valore_default";</span>

<span class="cm">// Uso pratico — inizializzazione pigra:</span>
List&lt;<span class="ty">string</span>&gt;? cache = <span class="kw">null</span>;
cache ??= <span class="kw">new</span> List&lt;<span class="ty">string</span>&gt;();  <span class="cm">// crea la lista solo se serve</span>
cache.<span class="fn">Add</span>(<span class="str">"elemento"</span>);</pre>

    <h4>?. — operatore null condizionale</h4>
    <pre><span class="cm">// Accede a proprietà/metodi SOLO se l'oggetto non è null.</span>
<span class="cm">// Evita il NullReferenceException!</span>

<span class="ty">string</span>? testo = <span class="kw">null</span>;

<span class="cm">// CRASH — NullReferenceException:</span>
<span class="cm">// int lungh = testo.Length;   ← CRASH se testo è null!</span>

<span class="cm">// SICURO con ?. :</span>
<span class="ty">int</span>?   lungh  = testo?.Length;    <span class="cm">// null se testo è null</span>
<span class="ty">string</span>? upper = testo?.ToUpper(); <span class="cm">// null se testo è null</span>

Console.<span class="fn">WriteLine</span>(lungh ?? <span class="num">0</span>);  <span class="cm">// 0 (lungh è null)</span>

<span class="cm">// Catena di ?. :</span>
<span class="ty">string</span>? prima = testo?.<span class="fn">Split</span>(<span class="str">' '</span>)?[<span class="num">0</span>];  <span class="cm">// null se testo è null</span>

<span class="cm">// Con oggetti:</span>
<span class="kw">class</span> <span class="ty">Utente</span> { <span class="kw">public</span> <span class="ty">string</span>? Email; }
Utente? utente = <span class="kw">null</span>;
<span class="ty">string</span>? email = utente?.Email;         <span class="cm">// null — non crasha</span>
<span class="ty">int</span>?    len   = utente?.Email?.Length; <span class="cm">// null — doppio ?.</span></pre>

    <h4>Combinare ?? e ?.</h4>
    <pre><span class="cm">// Il pattern più comune in C#:</span>
<span class="ty">string</span>? nome3 = <span class="kw">null</span>;

<span class="cm">// Ottieni la lunghezza, o 0 se nome è null:</span>
<span class="ty">int</span> len2 = nome3?.Length ?? <span class="num">0</span>;

<span class="cm">// Ottieni le prime 3 lettere, o stringa vuota se null:</span>
<span class="ty">string</span> inizio = nome3?.<span class="fn">Substring</span>(<span class="num">0</span>, Math.<span class="fn">Min</span>(<span class="num">3</span>, nome3.Length)) ?? <span class="str">""</span>;

<span class="cm">// Esempio pratico con classe:</span>
<span class="kw">class</span> <span class="ty">Ordine</span> {
    <span class="kw">public</span> <span class="ty">string</span>? Nota;
    <span class="kw">public</span> Utente?  Cliente;
}
Ordine? ordine = <span class="kw">null</span>;
<span class="ty">string</span> emailCliente = ordine?.Cliente?.Email ?? <span class="str">"email non disponibile"</span>;
Console.<span class="fn">WriteLine</span>(emailCliente);  <span class="cm">// "email non disponibile"</span></pre>
    <table>
      <tr><th>Operatore</th><th>Nome</th><th>Cosa fa</th><th>Esempio</th></tr>
      <tr><td>T?</td><td>Nullable type</td><td>Permette null a tipi valore</td><td>int? x = null;</td></tr>
      <tr><td>??</td><td>Null coalescing</td><td>Valore di default se null</td><td>x ?? 0</td></tr>
      <tr><td>??=</td><td>Null coalescing assign</td><td>Assegna solo se null</td><td>x ??= 5;</td></tr>
      <tr><td>?.</td><td>Null conditional</td><td>Accede solo se non null</td><td>obj?.Nome</td></tr>
      <tr><td>!</td><td>Null forgiving</td><td>Dice al compilatore "non è null"</td><td>nome!</td></tr>
    </table>

    <h4>Progetto — Profilo utente opzionale</h4>
    <pre><span class="kw">class</span> <span class="ty">Profilo</span> {
    <span class="kw">public</span> <span class="ty">string</span>  Username;
    <span class="kw">public</span> <span class="ty">string</span>? NomeCompleto;
    <span class="kw">public</span> <span class="ty">int</span>?    Eta;
    <span class="kw">public</span> <span class="ty">string</span>? Email;
    <span class="kw">public</span> <span class="ty">string</span>? Citta;

    <span class="kw">public</span> <span class="fn">Profilo</span>(<span class="ty">string</span> username) { Username = username; }

    <span class="kw">public</span> <span class="ty">void</span> <span class="fn">Stampa</span>() {
        Console.<span class="fn">WriteLine</span>(<span class="str">$"=== Profilo: {Username} ==="</span>);
        Console.<span class="fn">WriteLine</span>(<span class="str">$"Nome:  {NomeCompleto ?? "(non inserito)"}"</span>);
        Console.<span class="fn">WriteLine</span>(<span class="str">$"Eta:   {(Eta.HasValue ? Eta.Value.ToString() : "sconosciuta")}"</span>);
        Console.<span class="fn">WriteLine</span>(<span class="str">$"Email: {Email ?? "(non inserita)"}"</span>);
        Console.<span class="fn">WriteLine</span>(<span class="str">$"Citta: {Citta ?? "(non inserita)"}"</span>);
    }
}

Profilo p = <span class="kw">new</span> Profilo(<span class="str">"marco99"</span>);
p.NomeCompleto = <span class="str">"Marco Rossi"</span>;
p.Eta = <span class="num">25</span>;
<span class="cm">// Email e Citta rimangono null</span>
p.<span class="fn">Stampa</span>();

<span class="cm">// Aggiornamento con ??=:</span>
p.Email ??= <span class="str">"marco@email.it"</span>;  <span class="cm">// assegna perché è null</span>
p.Email ??= <span class="str">"altro@email.it"</span>;  <span class="cm">// NON cambia, già impostata</span></pre>

    <h4>Errori comuni</h4>
    <pre><span class="cm">// 1. Dimenticare ? e avere NullReferenceException:</span>
<span class="ty">string</span> s = <span class="kw">null</span>;
<span class="cm">// Console.WriteLine(s.Length);  ← CRASH!</span>
Console.<span class="fn">WriteLine</span>(s?.Length ?? <span class="num">0</span>);  <span class="cm">// sicuro: 0</span>

<span class="cm">// 2. Usare .Value senza verificare HasValue:</span>
<span class="ty">int</span>? n = <span class="kw">null</span>;
<span class="cm">// Console.WriteLine(n.Value);  ← CRASH! InvalidOperationException</span>
Console.<span class="fn">WriteLine</span>(n ?? <span class="num">0</span>);           <span class="cm">// sicuro: 0</span>

<span class="cm">// 3. Confondere null con stringa vuota:</span>
<span class="ty">string</span> vuota = <span class="str">""</span>;
<span class="ty">string</span> nulla = <span class="kw">null</span>;
Console.<span class="fn">WriteLine</span>(vuota == <span class="kw">null</span>);              <span class="cm">// false! "" non è null</span>
Console.<span class="fn">WriteLine</span>(<span class="ty">string</span>.<span class="fn">IsNullOrEmpty</span>(vuota)); <span class="cm">// true</span>
Console.<span class="fn">WriteLine</span>(<span class="ty">string</span>.<span class="fn">IsNullOrEmpty</span>(nulla)); <span class="cm">// true</span>

<span class="cm">// 4. Il null-forgiving ! non protegge a runtime:</span>
<span class="ty">string</span> nome4 = <span class="kw">null</span>!;  <span class="cm">// dici al compilatore "fidati", ma...</span>
<span class="cm">// Console.WriteLine(nome4.Length);  ← CRASH lo stesso a runtime!</span></pre>

    <h4>Esercizi</h4>
    <pre><span class="cm">// FACILE:</span>
<span class="cm">// 1. Chiedi nome all'utente, usa ?? per mettere "Anonimo" se non inserisce nulla</span>
<span class="cm">// 2. Crea int? voto = null, poi assegna un valore e stampa con HasValue</span>
<span class="cm">// 3. Usa ??= per inizializzare una lista solo se è null</span>
<span class="cm">// MEDIO:</span>
<span class="cm">// 4. Crea classe Persona con nome e eta nullable, stampa con valori di default</span>
<span class="cm">// 5. Usa ?. per accedere in sicurezza a proprietà di un oggetto che può essere null</span>
<span class="cm">// 6. Catena ?. e ?? per navigare oggetti annidati in sicurezza</span>
<span class="cm">// DIFFICILE:</span>
<span class="cm">// 7. Gestisci un array di int? con valori misti null e non-null, calcola la media</span>
<span class="cm">// 8. Implementa un sistema di configurazione con valori nullable e fallback</span>
<span class="cm">// 9. Crea un parser che legge dati opzionali da stringhe CSV con campi mancanti</span></pre>

    <h4>Soluzioni</h4>
    <pre><span class="cm">// --- 1. ---</span>
Console.<span class="fn">Write</span>(<span class="str">"Nome: "</span>);
<span class="ty">string</span>? inp1 = Console.<span class="fn">ReadLine</span>();
Console.<span class="fn">WriteLine</span>(<span class="str">$"Ciao, {(string.IsNullOrWhiteSpace(inp1) ? "Anonimo" : inp1)}!"</span>);

<span class="cm">// --- 2. ---</span>
<span class="ty">int</span>? voto2 = <span class="kw">null</span>;
Console.<span class="fn">WriteLine</span>(voto2.HasValue ? <span class="str">$"Voto: {voto2.Value}"</span> : <span class="str">"Nessun voto"</span>);
voto2 = <span class="num">8</span>;
Console.<span class="fn">WriteLine</span>(voto2.HasValue ? <span class="str">$"Voto: {voto2.Value}"</span> : <span class="str">"Nessun voto"</span>);

<span class="cm">// --- 3. ---</span>
List&lt;<span class="ty">string</span>&gt;? lista3 = <span class="kw">null</span>;
lista3 ??= <span class="kw">new</span> List&lt;<span class="ty">string</span>&gt;();
lista3.<span class="fn">Add</span>(<span class="str">"elemento"</span>);
Console.<span class="fn">WriteLine</span>(<span class="str">$"Lista con {lista3.Count} elementi"</span>);

<span class="cm">// --- 4. ---</span>
<span class="kw">class</span> <span class="ty">Persona4</span> { <span class="kw">public</span> <span class="ty">string</span>? Nome; <span class="kw">public</span> <span class="ty">int</span>? Eta; }
Persona4 p4 = <span class="kw">new</span>() { Nome = <span class="str">"Marco"</span> };
Console.<span class="fn">WriteLine</span>(<span class="str">$"{p4.Nome ?? "Sconosciuto"}, {p4.Eta?.ToString() ?? "eta ignota"}"</span>);

<span class="cm">// --- 5. ---</span>
<span class="kw">class</span> <span class="ty">Oggetto5</span> { <span class="kw">public</span> <span class="ty">string</span> Nome = <span class="str">"Test"</span>; }
Oggetto5? obj5 = <span class="kw">null</span>;
Console.<span class="fn">WriteLine</span>(obj5?.Nome ?? <span class="str">"oggetto null"</span>);
obj5 = <span class="kw">new</span>();
Console.<span class="fn">WriteLine</span>(obj5?.Nome ?? <span class="str">"oggetto null"</span>);

<span class="cm">// --- 7. Media di int? ---</span>
<span class="ty">int</span>?[] arr7 = { <span class="num">5</span>, <span class="kw">null</span>, <span class="num">8</span>, <span class="kw">null</span>, <span class="num">3</span>, <span class="num">10</span>, <span class="kw">null</span> };
<span class="ty">int</span> sum7=<span class="num">0</span>, cnt7=<span class="num">0</span>;
<span class="kw">foreach</span>(<span class="ty">int</span>? n7 <span class="kw">in</span> arr7) <span class="kw">if</span>(n7.HasValue){sum7+=n7.Value;cnt7++;}
Console.<span class="fn">WriteLine</span>(cnt7&gt;<span class="num">0</span>?<span class="str">$"Media: {(double)sum7/cnt7:F2}"</span>:<span class="str">"Nessun valore"</span>);

<span class="cm">// --- 8. Configurazione ---</span>
<span class="ty">string</span>? host=<span class="kw">null</span>, porta=<span class="kw">null</span>, db=<span class="str">"mioDB"</span>;
<span class="ty">string</span> connStr = <span class="str">$"Server={host??"localhost"};Port={porta??"5432"};DB={db??"default"}"</span>;
Console.<span class="fn">WriteLine</span>(connStr);

<span class="cm">// --- 9. CSV con campi mancanti ---</span>
<span class="ty">string</span>[] righe9 = { <span class="str">"Marco,25,Roma"</span>, <span class="str">"Giulia,,Milano"</span>, <span class="str">"Luca,30,"</span> };
<span class="kw">foreach</span>(<span class="ty">string</span> riga <span class="kw">in</span> righe9) {
    <span class="ty">string</span>[] campi = riga.<span class="fn">Split</span>(<span class="str">','</span>);
    <span class="ty">string</span>  nome9  = campi[<span class="num">0</span>];
    <span class="ty">int</span>?    eta9   = <span class="ty">int</span>.<span class="fn">TryParse</span>(campi[<span class="num">1</span>], <span class="kw">out int</span> e9) ? e9 : (<span class="ty">int</span>?)<span class="kw">null</span>;
    <span class="ty">string</span>? citta9 = <span class="ty">string</span>.<span class="fn">IsNullOrEmpty</span>(campi[<span class="num">2</span>]) ? <span class="kw">null</span> : campi[<span class="num">2</span>];
    Console.<span class="fn">WriteLine</span>(<span class="str">$"{nome9}, {eta9?.ToString()??"eta?"}, {citta9??"citta?"}"</span>);
}</pre>

  </div>
</div>
      <!-- 15. Scope & Visibilità -->
<div class="topic-card">
  <div class="topic-header" onclick="toggle(this.closest('.topic-card'))"><div><h3>15. Scope &amp; Visibilità delle Variabili</h3><div class="topic-sub">Scope locale, blocco, metodo, classe, shadowing, buone pratiche</div></div><span class="arrow">▼</span></div>
  <div class="topic-body">

    <h4>Cos'è lo scope?</h4>
    <pre><span class="cm">// Lo scope (ambito) definisce DOVE una variabile esiste ed è utilizzabile.</span>
<span class="cm">// Una variabile esiste solo nel blocco {} in cui è dichiarata.</span>

<span class="ty">int</span> x = <span class="num">10</span>;  <span class="cm">// scope: tutto il metodo</span>

<span class="kw">if</span> (<span class="kw">true</span>) {
    <span class="ty">int</span> y = <span class="num">5</span>;       <span class="cm">// scope: solo questo blocco if</span>
    Console.<span class="fn">WriteLine</span>(x);  <span class="cm">// OK — x è visibile (blocco esterno)</span>
    Console.<span class="fn">WriteLine</span>(y);  <span class="cm">// OK — y è visibile (stesso blocco)</span>
}
<span class="cm">// Console.WriteLine(y);  ← ERRORE! y non esiste più</span>
Console.<span class="fn">WriteLine</span>(x);      <span class="cm">// OK — x esiste ancora</span></pre>

    <h4>Scope nei cicli</h4>
    <pre><span class="cm">// La variabile del for esiste solo dentro il for:</span>
<span class="kw">for</span> (<span class="ty">int</span> i = <span class="num">0</span>; i &lt; <span class="num">5</span>; i++) {
    <span class="ty">int</span> doppio = i * <span class="num">2</span>;  <span class="cm">// esiste solo in questa iterazione</span>
    Console.<span class="fn">WriteLine</span>(doppio);
}
<span class="cm">// Console.WriteLine(i);      ← ERRORE! i non esiste fuori dal for</span>
<span class="cm">// Console.WriteLine(doppio); ← ERRORE! doppio non esiste fuori dal for</span>

<span class="cm">// Se hai bisogno di i dopo il ciclo, dichiarala fuori:</span>
<span class="ty">int</span> contatore = <span class="num">0</span>;
<span class="kw">for</span> (contatore = <span class="num">0</span>; contatore &lt; <span class="num">10</span>; contatore++) {
    <span class="cm">// ...</span>
}
Console.<span class="fn">WriteLine</span>(<span class="str">$"Finito a: {contatore}"</span>);  <span class="cm">// OK — dichiarata fuori</span>

<span class="cm">// Stesso per while e foreach:</span>
<span class="kw">foreach</span> (<span class="ty">string</span> nome <span class="kw">in</span> <span class="kw">new</span>[] { <span class="str">"A"</span>, <span class="str">"B"</span> }) {
    Console.<span class="fn">WriteLine</span>(nome);
}
<span class="cm">// Console.WriteLine(nome);  ← ERRORE!</span></pre>

    <h4>Scope annidati — i blocchi interni vedono quelli esterni</h4>
    <pre><span class="ty">int</span> a = <span class="num">1</span>;           <span class="cm">// livello 0</span>

<span class="kw">if</span> (<span class="kw">true</span>) {
    <span class="ty">int</span> b = <span class="num">2</span>;         <span class="cm">// livello 1</span>
    Console.<span class="fn">WriteLine</span>(a);  <span class="cm">// OK — vede livello 0</span>

    <span class="kw">if</span> (<span class="kw">true</span>) {
        <span class="ty">int</span> c = <span class="num">3</span>;       <span class="cm">// livello 2</span>
        Console.<span class="fn">WriteLine</span>(a);  <span class="cm">// OK — vede livello 0</span>
        Console.<span class="fn">WriteLine</span>(b);  <span class="cm">// OK — vede livello 1</span>
        Console.<span class="fn">WriteLine</span>(c);  <span class="cm">// OK — vede livello 2</span>
    }
    <span class="cm">// Console.WriteLine(c);  ← ERRORE! c esiste solo dentro il secondo if</span>
}
<span class="cm">// Console.WriteLine(b);  ← ERRORE!</span>
<span class="cm">// Console.WriteLine(c);  ← ERRORE!</span></pre>

    <h4>Scope dei metodi</h4>
    <pre><span class="cm">// Le variabili di un metodo non sono visibili in altri metodi!</span>
<span class="kw">static</span> <span class="ty">void</span> <span class="fn">MetodoA</span>() {
    <span class="ty">int</span> x = <span class="num">100</span>;
    Console.<span class="fn">WriteLine</span>(x);  <span class="cm">// OK</span>
}

<span class="kw">static</span> <span class="ty">void</span> <span class="fn">MetodoB</span>() {
    <span class="cm">// Console.WriteLine(x);  ← ERRORE! x di MetodoA non è visibile qui</span>
    <span class="ty">int</span> x = <span class="num">200</span>;  <span class="cm">// questa è una x diversa, locale a MetodoB</span>
    Console.<span class="fn">WriteLine</span>(x);  <span class="cm">// 200</span>
}

<span class="cm">// Per condividere dati tra metodi: usa parametri e return!</span>
<span class="kw">static</span> <span class="ty">int</span> <span class="fn">CalcolaValore</span>() => <span class="num">42</span>;
<span class="kw">static</span> <span class="ty">void</span> <span class="fn">UsaValore</span>(<span class="ty">int</span> valore) => Console.<span class="fn">WriteLine</span>(valore);
<span class="fn">UsaValore</span>(<span class="fn">CalcolaValore</span>());  <span class="cm">// passa il valore esplicitamente</span></pre>

    <h4>Variabili di classe (campi statici)</h4>
    <pre><span class="kw">class</span> <span class="ty">Esempio</span> {
    <span class="cm">// Campo statico — visibile in tutti i metodi della classe:</span>
    <span class="kw">static</span> <span class="ty">int</span> contatore = <span class="num">0</span>;
    <span class="kw">static</span> <span class="ty">string</span> messaggio = <span class="str">"Ciao"</span>;

    <span class="kw">static</span> <span class="ty">void</span> <span class="fn">Incrementa</span>() {
        contatore++;  <span class="cm">// accede al campo della classe</span>
    }

    <span class="kw">static</span> <span class="ty">void</span> <span class="fn">Stampa</span>() {
        Console.<span class="fn">WriteLine</span>(<span class="str">$"{messaggio}: {contatore}"</span>);  <span class="cm">// visibile!</span>
    }
}
<span class="cm">// Usalo con moderazione — rende il codice più difficile da seguire</span></pre>

    <h4>Shadowing — variabile locale nasconde quella esterna</h4>
    <pre><span class="cm">// In C# NON puoi ridichiarare una variabile dello scope esterno nello scope interno:</span>
<span class="ty">int</span> x2 = <span class="num">10</span>;
<span class="kw">if</span> (<span class="kw">true</span>) {
    <span class="cm">// int x2 = 20;  ← ERRORE DI COMPILAZIONE in C#!</span>
    <span class="cm">// (In altri linguaggi come Java/JavaScript è permesso — attento!)</span>
    x2 = <span class="num">20</span>;  <span class="cm">// puoi modificare quella esterna</    }
Console.<span class="fn">WriteLine</span>(x2);  <span class="cm">// 20</span>

<span class="cm">// MA in metodi diversi puoi avere lo stesso nome:</span>
<span class="kw">static</span> <span class="ty">void</span> <span class="fn">Test1</span>() { <span class="ty">int</span> n = <span class="num">1</span>; Console.<span class="fn">WriteLine</span>(n); }
<span class="kw">static</span> <span class="ty">void</span> <span class="fn">Test2</span>() { <span class="ty">int</span> n = <span class="num">2</span>; Console.<span class="fn">WriteLine</span>(n); }  <span class="cm">// n diversa!</span></pre>
    <div class="note">Una variabile esiste solo nel blocco {} in cui è dichiarata. I blocchi interni possono vedere le variabili dei blocchi esterni, ma non viceversa.</div>

    <h4>Buone pratiche sullo scope</h4>
    <pre><span class="cm">// 1. Dichiara le variabili il più vicino possibile al loro uso:</span>
<span class="cm">//Male — dichiarata troppo presto:</span>
<span class="ty">string</span> risultato = <span class="str">""</span>;  <span class="cm">// dichiarata qui...</span>
<span class="ty">int</span> a2 = <span class="num">5</span>, b2 = <span class="num">3</span>;
<span class="ty">int</span> somma2 = a2 + b2;
risultato = <span class="str">$"Somma: {somma2}"</span>;  <span class="cm">// ...usata solo qui</span>

<span class="cm">//Bene — dichiarata dove serve:</span>
<span class="ty">int</span> a3 = <span class="num">5</span>, b3 = <span class="num">3</span>;
<span class="ty">int</span> somma3 = a3 + b3;
<span class="ty">string</span> risultato2 = <span class="str">$"Somma: {somma3}"</span>;

<span class="cm">// 2. Evita variabili con scope troppo ampio:</span>
<span class="cm">//Male — i usata come variabile generica ovunque:</span>
<span class="ty">int</span> i = <span class="num">0</span>;
<span class="cm">// ... 50 righe di codice ...</span>
<span class="kw">for</span> (i = <span class="num">0</span>; i &lt; <span class="num">10</span>; i++) { }  <span class="cm">// riusa i — confuso!</span>

<span class="cm">//Bene — ogni ciclo ha la sua variabile:</span>
<span class="kw">for</span> (<span class="ty">int</span> j = <span class="num">0</span>; j &lt; <span class="num">10</span>; j++) { }  <span class="cm">// j locale al for</span>

<span class="cm">// 3. Usa nomi descrittivi per evitare confusione:</span>
<span class="cm">//Male:</span>
<span class="ty">int</span> x3 = <span class="num">0</span>, y3 = <span class="num">0</span>, z3 = <span class="num">0</span>;
<span class="cm">//Bene:</span>
<span class="ty">int</span> totaleVendite = <span class="num">0</span>, mediaVoti = <span class="num">0</span>, maxPunteggio = <span class="num">0</span>;</pre>

    <h4>Errori comuni</h4>
    <pre><span class="cm">// 1. Usare variabile fuori dal suo scope:</span>
<span class="kw">for</span> (<span class="ty">int</span> k = <span class="num">0</span>; k &lt; <span class="num">5</span>; k++) { }
<span class="cm">// Console.WriteLine(k);  ← ERRORE! k non esiste</span>

<span class="cm">// 2. Dimenticare che ogni iterazione ha la sua copia:</span>
<span class="kw">for</span> (<span class="ty">int</span> m = <span class="num">0</span>; m &lt; <span class="num">3</span>; m++) {
    <span class="ty">int</span> tmp = m * <span class="num">10</span>;  <span class="cm">// nuova variabile ad ogni iterazione</span>
    Console.<span class="fn">WriteLine</span>(tmp);
}

<span class="cm">// 3. Variabili non inizializzate:</span>
<span class="ty">int</span> risultato3;
<span class="cm">// Console.WriteLine(risultato3);  ← ERRORE! Non inizializzata</span>
<span class="ty">int</span> risultato4 = <span class="num">0</span>;  <span class="cm">// sempre inizializza!</span>

<span class="cm">// 4. Scope nei blocchi try/catch:</span>
<span class="kw">try</span> {
    <span class="ty">int</span> num = <span class="ty">int</span>.<span class="fn">Parse</span>(<span class="str">"abc"</span>);
} <span class="kw">catch</span> (Exception ex) {
    <span class="cm">// Console.WriteLine(num);  ← ERRORE! num non visibile nel catch</span>
    Console.<span class="fn">WriteLine</span>(ex.Message);
}</pre>

    <h4>Esercizi</h4>
    <pre><span class="cm">// FACILE:</span>
<span class="cm">// 1. Scrivi codice che usa una variabile dentro e fuori un if — osserva gli errori</span>
<span class="cm">// 2. Dichiara variabile dentro un for e prova ad usarla fuori</span>
<span class="cm">// 3. Crea due metodi con variabili dallo stesso nome — funzionano indipendentemente?</span>
<span class="cm">// MEDIO:</span>
<span class="cm">// 4. Scrivi un metodo che conta quante volte appare una lettera, senza variabili globali</span>
<span class="cm">// 5. Riscrivi codice con scope troppo ampio usando scope minimale</span>
<span class="cm">// 6. Dimostra la differenza tra modificare una variabile di classe vs locale</span>
<span class="cm">// DIFFICILE:</span>
<span class="cm">// 7. Scrivi un sistema di log dove ogni metodo usa solo variabili locali</span>
<span class="cm">// 8. Implementa un contatore usando campo statico — spiega i rischi</span>
<span class="cm">// 9. Identifica e correggi tutti i problemi di scope in un codice dato</span></pre>

    <h4>Soluzioni</h4>
    <pre><span class="cm">// --- 1. if scope ---</span>
<span class="ty">int</span> fuori = <span class="num">10</span>;
<span class="kw">if</span> (fuori &gt; <span class="num">5</span>) {
    <span class="ty">int</span> dentro = <span class="num">20</span>;
    Console.<span class="fn">WriteLine</span>(<span class="str">$"fuori={fuori} dentro={dentro}"</span>);
}
Console.<span class="fn">WriteLine</span>(<span class="str">$"fuori={fuori}"</span>); <span class="cm">// OK</span>
<span class="cm">// Console.WriteLine(dentro);  ← ERRORE</span>

<span class="cm">// --- 2. for scope ---</span>
<span class="kw">for</span> (<span class="ty">int</span> idx = <span class="num">0</span>; idx &lt; <span class="num">3</span>; idx++) {
    <span class="ty">int</span> quadrato = idx * idx;
    Console.<span class="fn">WriteLine</span>(<span class="str">$"{idx}^2 = {quadrato}"</span>);
}
<span class="cm">// Console.WriteLine(idx);     ← ERRORE</span>
<span class="cm">// Console.WriteLine(quadrato); ← ERRORE</span>

<span class="cm">// --- 3. Stessi nomi in metodi diversi ---</span>
<span class="kw">static</span> <span class="ty">void</span> <span class="fn">MetodoX</span>() { <span class="ty">int</span> n3 = <span class="num">100</span>; Console.<span class="fn">WriteLine</span>(<span class="str">$"X: {n3}"</span>); }
<span class="kw">static</span> <span class="ty">void</span> <span class="fn">MetodoY</span>() { <span class="ty">int</span> n3 = <span class="num">200</span>; Console.<span class="fn">WriteLine</span>(<span class="str">$"Y: {n3}"</span>); }
<span class="fn">MetodoX</span>(); <span class="cm">// X: 100</span>
<span class="fn">MetodoY</span>(); <span class="cm">// Y: 200 — variabili completamente indipendenti</span>

<span class="cm">// --- 4. Conta lettere ---</span>
<span class="kw">static</span> <span class="ty">int</span> <span class="fn">ContaLettera</span>(<span class="ty">string</span> testo, <span class="ty">char</span> lettera) {
    <span class="ty">int</span> cnt4 = <span class="num">0</span>;
    <span class="kw">foreach</span> (<span class="ty">char</span> c <span class="kw">in</span> testo.<span class="fn">ToLower</span>())
        <span class="kw">if</span> (c == <span class="ty">char</span>.<span class="fn">ToLower</span>(lettera)) cnt4++;
    <span class="kw">return</span> cnt4;
}
Console.<span class="fn">WriteLine</span>(<span class="fn">ContaLettera</span>(<span class="str">"Programmazione"</span>, <span class="str">'a'</span>)); <span class="cm">// 2</span>

<span class="cm">// --- 5. Scope minimale ---</span>
<span class="cm">//scope troppo ampio:</span>
<span class="ty">string</span> msg5 = <span class="str">""</span>; <span class="ty">int</span> tot5 = <span class="num">0</span>;
<span class="ty">int</span>[] vals = {<span class="num">1</span>,<span class="num">2</span>,<span class="num">3</span>};
<span class="kw">foreach</span>(<span class="ty">int</span> v <span class="kw">in</span> vals) tot5 += v;
msg5 = <span class="str">$"Tot: {tot5}"</span>; Console.<span class="fn">WriteLine</span>(msg5);
<span class="cm">//scope minimale:</span>
<span class="ty">int</span> tot5b = <span class="num">0</span>;
<span class="kw">foreach</span>(<span class="ty">int</span> v <span class="kw">in</span> <span class="kw">new</span>[]{<span class="num">1</span>,<span class="num">2</span>,<span class="num">3</span>}) tot5b += v;
Console.<span class="fn">WriteLine</span>(<span class="str">$"Tot: {tot5b}"</span>);

<span class="cm">// --- 8. Contatore statico ---</span>
<span class="kw">class</span> <span class="ty">ContaOggetti</span> {
    <span class="kw">public</span> <span class="kw">static</span> <span class="ty">int</span> Totale = <span class="num">0</span>;
    <span class="kw">public</span> <span class="fn">ContaOggetti</span>() { Totale++; }
}
<span class="kw">new</span> ContaOggetti(); <span class="kw">new</span> ContaOggetti(); <span class="kw">new</span> ContaOggetti();
Console.<span class="fn">WriteLine</span>(<span class="str">$"Creati: {ContaOggetti.Totale}"</span>); <span class="cm">// 3</span>
<span class="cm">// Rischio: Totale è condiviso — in multi-threading può causare problemi</span></pre>

  </div>
</div>

    <!-- SECTION INTERMEDIO (17) -->
    <div class="section" id="section-intermediate">
      <div class="section-title">II — Intermedio <span class="tag">INT</span></div>
      <!-- 1. Classi & Oggetti -->
      <div class="topic-card">
        <div class="topic-header" onclick="toggle(this.closest('.topic-card'))"><div><h3>1. Classi &amp; Oggetti</h3><div class="topic-sub">Blueprint, istanza, new, this, campi pubblici</div></div><span class="arrow">▼</span></div>
        <div class="topic-body">
          <pre><span class="kw">class</span> <span class="ty">Persona</span> {
    <span class="kw">public</span> <span class="ty">string</span> Nome;
    <span class="kw">public</span> <span class="ty">int</span>    Eta;

    <span class="kw">public</span> <span class="ty">void</span> <span class="fn">Saluta</span>() {
        Console.<span class="fn">WriteLine</span>(<span class="str">$"Ciao, sono {Nome} e ho {Eta} anni."</span>);
    }
}

<span class="cm">// Creazione di un oggetto (istanza):</span>
Persona p = <span class="kw">new</span> <span class="ty">Persona</span>();
p.Nome = <span class="str">"Marco"</span>;
p.Eta  = <span class="num">25</span>;
p.<span class="fn">Saluta</span>();  <span class="cm">// Ciao, sono Marco e ho 25 anni.</span></pre>
          <div class="note">this si riferisce all'istanza corrente dell'oggetto. Serve quando un parametro ha lo stesso nome di un campo.</div>
        </div>
      </div>
      <!-- 2. Costruttori -->
      <div class="topic-card">
        <div class="topic-header" onclick="toggle(this.closest('.topic-card'))"><div><h3>2. Costruttori &amp; Object Initializer</h3><div class="topic-sub">Costruttore di default, con parametri, overload, object initializer</div></div><span class="arrow">▼</span></div>
        <div class="topic-body">
          <pre><span class="kw">class</span> <span class="ty">Auto</span> {
    <span class="kw">public</span> <span class="ty">string</span> Marca;
    <span class="kw">public</span> <span class="ty">int</span>    Anno;

    <span class="kw">public</span> <span class="fn">Auto</span>() { Marca = <span class="str">"Sconosciuta"</span>; }         <span class="cm">// default</span>
    <span class="kw">public</span> <span class="fn">Auto</span>(<span class="ty">string</span> marca) { Marca = marca; }        <span class="cm">// con parametro</span>
    <span class="kw">public</span> <span class="fn">Auto</span>(<span class="ty">string</span> marca, <span class="ty">int</span> anno) {
        Marca = marca; Anno = anno;
    }
}

Auto a1 = <span class="kw">new</span> <span class="ty">Auto</span>();
Auto a2 = <span class="kw">new</span> <span class="ty">Auto</span>(<span class="str">"Ferrari"</span>);
Auto a3 = <span class="kw">new</span> <span class="ty">Auto</span>(<span class="str">"Lamborghini"</span>, <span class="num">2023</span>);

<span class="cm">// Object Initializer — imposta proprietà alla creazione:</span>
Auto a4 = <span class="kw">new</span> <span class="ty">Auto</span> { Marca = <span class="str">"BMW"</span>, Anno = <span class="num">2022</span> };</pre>
        </div>
      </div>
      <!-- 3. Proprietà -->
      <div class="topic-card">
        <div class="topic-header" onclick="toggle(this.closest('.topic-card'))"><div><h3>3. Proprietà (Properties)</h3><div class="topic-sub">get/set, auto-property, validazione, read-only</div></div><span class="arrow">▼</span></div>
        <div class="topic-body">
          <pre><span class="kw">class</span> <span class="ty">Persona</span> {
    <span class="kw">private</span> <span class="ty">int</span> _eta;

    <span class="cm">// Proprietà con validazione:</span>
    <span class="kw">public</span> <span class="ty">int</span> Eta {
        <span class="kw">get</span> { <span class="kw">return</span> _eta; }
        <span class="kw">set</span> { <span class="kw">if</span> (value >= <span class="num">0</span>) _eta = value; }
    }

    <span class="cm">// Auto-property (sintassi breve):</span>
    <span class="kw">public</span> <span class="ty">string</span> Nome { <span class="kw">get</span>; <span class="kw">set</span>; }

    <span class="cm">// Read-only (imposta solo nel costruttore):</span>
    <span class="kw">public</span> <span class="ty">string</span> CodiceFiscale { <span class="kw">get</span>; <span class="kw">private set</span>; }

    <span class="cm">// Proprietà calcolata:</span>
    <span class="kw">public</span> <span class="ty">bool</span> EMaggiorenne => _eta >= <span class="num">18</span>;
}

Persona p = <span class="kw">new</span> <span class="ty">Persona</span>();
p.Nome = <span class="str">"Marco"</span>;
p.Eta = -<span class="num">5</span>;  <span class="cm">// ignorato dalla validazione</span>
Console.<span class="fn">WriteLine</span>(p.Eta);  <span class="cm">// 0</span></pre>
        </div>
      </div>
      <!-- 4. Incapsulamento -->
      <div class="topic-card">
        <div class="topic-header" onclick="toggle(this.closest('.topic-card'))"><div><h3>4. Incapsulamento</h3><div class="topic-sub">public, private, protected, internal — modificatori di accesso</div></div><span class="arrow">▼</span></div>
        <div class="topic-body">
          <table>
            <tr><th>Modificatore</th><th>Accessibile da</th></tr>
            <tr><td>public</td><td>Ovunque</td></tr>
            <tr><td>private</td><td>Solo dentro la classe</td></tr>
            <tr><td>protected</td><td>Classe + classi derivate</td></tr>
            <tr><td>internal</td><td>Solo nello stesso assembly</td></tr>
            <tr><td>(nessuno)</td><td>private per campi, internal per classi</td></tr>
          </table>
          <pre><span class="kw">class</span> <span class="ty">ContoBancario</span> {
    <span class="kw">private</span> <span class="ty">double</span> _saldo;          <span class="cm">// nascosto</span>
    <span class="kw">public</span>  <span class="ty">double</span> Saldo => _saldo;  <span class="cm">// solo lettura</span>

    <span class="kw">public</span> <span class="ty">void</span> <span class="fn">Deposita</span>(<span class="ty">double</span> importo) {
        <span class="kw">if</span> (importo > <span class="num">0</span>) _saldo += importo;
    }
    <span class="kw">public</span> <span class="ty">bool</span> <span class="fn">Preleva</span>(<span class="ty">double</span> importo) {
        <span class="kw">if</span> (importo > <span class="num">0</span> && importo <= _saldo) { _saldo -= importo; <span class="kw">return</span> <span class="kw">true</span>; }
        <span class="kw">return</span> <span class="kw">false</span>;
    }
}</pre>
        </div>
      </div>
      <!-- 5. Ereditarietà -->
      <div class="topic-card">
        <div class="topic-header" onclick="toggle(this.closest('.topic-card'))"><div><h3>5. Ereditarietà</h3><div class="topic-sub">class Figlia : Padre, base, override, virtual, sealed</div></div><span class="arrow">▼</span></div>
        <div class="topic-body">
          <pre><span class="kw">class</span> <span class="ty">Animale</span> {
    <span class="kw">public</span> <span class="ty">string</span> Nome;
    <span class="kw">public</span> <span class="fn">Animale</span>(<span class="ty">string</span> nome) { Nome = nome; }
    <span class="kw">public</span> <span class="kw">virtual</span> <span class="ty">void</span> <span class="fn">FaiVerso</span>() =>
        Console.<span class="fn">WriteLine</span>(<span class="str">$"{Nome} fa un verso."</span>);
}

<span class="kw">class</span> <span class="ty">Cane</span> : <span class="ty">Animale</span> {
    <span class="kw">public</span> <span class="fn">Cane</span>(<span class="ty">string</span> nome) : <span class="kw">base</span>(nome) { }  <span class="cm">// chiama costruttore padre</span>
    <span class="kw">public</span> <span class="kw">override</span> <span class="ty">void</span> <span class="fn">FaiVerso</span>() =>
        Console.<span class="fn">WriteLine</span>(<span class="str">$"{Nome} dice: Bau!"</span>);
}

Cane c = <span class="kw">new</span> <span class="fn">Cane</span>(<span class="str">"Rex"</span>);
c.<span class="fn">FaiVerso</span>();  <span class="cm">// Rex dice: Bau!</span></pre>
          <div class="note">In C# una classe può ereditare da una sola classe padre (ereditarietà singola), ma può implementare più interfacce.</div>
        </div>
      </div>
      <!-- 6. Interfacce -->
      <div class="topic-card">
        <div class="topic-header" onclick="toggle(this.closest('.topic-card'))"><div><h3>6. Interfacce</h3><div class="topic-sub">interface, implementazione multipla, contratto</div></div><span class="arrow">▼</span></div>
        <div class="topic-body">
          <pre><span class="kw">interface</span> <span class="ty">IVolante</span> {
    <span class="ty">void</span> <span class="fn">Decolla</span>();
    <span class="ty">void</span> <span class="fn">Atterra</span>();
    <span class="ty">double</span> Altitudine { <span class="kw">get</span>; }
}

<span class="kw">interface</span> <span class="ty">INuotante</span> { <span class="ty">void</span> <span class="fn">Nuota</span>(); }

<span class="cm">// Una classe può implementare PIÙ interfacce:</span>
<span class="kw">class</span> <span class="ty">Anatra</span> : <span class="ty">IVolante</span>, <span class="ty">INuotante</span> {
    <span class="kw">public</span> <span class="ty">double</span> Altitudine { <span class="kw">get</span>; <span class="kw">private set</span>; }
    <span class="kw">public</span> <span class="ty">void</span> <span class="fn">Decolla</span>() { Console.<span class="fn">WriteLine</span>(<span class="str">"Vola!"</span>); }
    <span class="kw">public</span> <span class="ty">void</span> <span class="fn">Atterra</span>() { Console.<span class="fn">WriteLine</span>(<span class="str">"Atterra!"</span>); }
    <span class="kw">public</span> <span class="ty">void</span> <span class="fn">Nuota</span>()   { Console.<span class="fn">WriteLine</span>(<span class="str">"Nuota!"</span>); }
}</pre>
          <table>
            <tr><th></th><th>Interfaccia</th><th>Classe Astratta</th></tr>
            <tr><td>Implementazione</td><td>Solo firma</td><td>Può avere codice</td></tr>
            <tr><td>Ereditarietà</td><td>Più interfacce</td><td>Una sola classe</td></tr>
            <tr><td>Campi</td><td>Non ammessi</td><td>Ammessi</td></tr>
          </table>
        </div>
      </div>
      <!-- 7. Polimorfismo -->
      <div class="topic-card">
        <div class="topic-header" onclick="toggle(this.closest('.topic-card'))"><div><h3>7. Polimorfismo, Abstract &amp; Sealed</h3><div class="topic-sub">virtual, override, abstract class, sealed</div></div><span class="arrow">▼</span></div>
        <div class="topic-body">
          <pre><span class="cm">// abstract — non si può istanziare direttamente:</span>
<span class="kw">abstract</span> <span class="kw">class</span> <span class="ty">Forma</span> {
    <span class="kw">public</span> <span class="kw">abstract</span> <span class="ty">double</span> <span class="fn">Area</span>();  <span class="cm">// DEVE essere implementato</span>
    <span class="kw">public</span> <span class="ty">void</span> <span class="fn">StampaArea</span>() => Console.<span class="fn">WriteLine</span>(<span class="str">$"Area: {Area():F2}"</span>);
}

<span class="kw">class</span> <span class="ty">Cerchio</span> : <span class="ty">Forma</span> {
    <span class="kw">public</span> <span class="ty">double</span> Raggio;
    <span class="kw">public</span> <span class="fn">Cerchio</span>(<span class="ty">double</span> r) { Raggio = r; }
    <span class="kw">public</span> <span class="kw">override</span> <span class="ty">double</span> <span class="fn">Area</span>() => Math.PI * Raggio * Raggio;
}

<span class="cm">// Polimorfismo — tratta oggetti diversi in modo uniforme:</span>
Forma[] forme = { <span class="kw">new</span> <span class="fn">Cerchio</span>(<span class="num">5</span>), <span class="kw">new</span> <span class="fn">Cerchio</span>(<span class="num">3</span>) };
<span class="kw">foreach</span> (Forma f <span class="kw">in</span> forme) f.<span class="fn">StampaArea</span>();

<span class="cm">// sealed — blocca ulteriori override:</span>
<span class="kw">class</span> <span class="ty">Figlia</span> : <span class="ty">Base</span> {
    <span class="kw">public</span> <span class="kw">sealed</span> <span class="kw">override</span> <span class="ty">void</span> <span class="fn">Metodo</span>() { <span class="cm">/* nessuna classe può fare override di questo */</span> }
}</pre>
        </div>
      </div>
      <!-- 8. Eccezioni -->
      <div class="topic-card">
        <div class="topic-header" onclick="toggle(this.closest('.topic-card'))"><div><h3>8. Gestione delle Eccezioni</h3><div class="topic-sub">try/catch/finally, throw, eccezioni personalizzate</div></div><span class="arrow">▼</span></div>
        <div class="topic-body">
          <pre><span class="kw">try</span> {
    <span class="ty">int</span> n = <span class="ty">int</span>.<span class="fn">Parse</span>(Console.<span class="fn">ReadLine</span>());
    Console.<span class="fn">WriteLine</span>(<span class="str">$"Numero: {n}"</span>);
}
<span class="kw">catch</span> (FormatException ex) {
    Console.<span class="fn">WriteLine</span>(<span class="str">$"Formato errato: {ex.Message}"</span>);
}
<span class="kw">catch</span> (OverflowException ex) {
    Console.<span class="fn">WriteLine</span>(<span class="str">$"Numero troppo grande: {ex.Message}"</span>);
}
<span class="kw">catch</span> (Exception ex) {
    Console.<span class="fn">WriteLine</span>(<span class="str">$"Errore generico: {ex.Message}"</span>);
}
<span class="kw">finally</span> {
    Console.<span class="fn">WriteLine</span>(<span class="str">"Eseguito SEMPRE, con o senza errore"</span>);
}</pre>
          <h4>throw — lanciare eccezioni</h4>
          <pre><span class="kw">if</span> (importo <= <span class="num">0</span>)
    <span class="kw">throw</span> <span class="kw">new</span> ArgumentException(<span class="str">"Importo deve essere positivo!"</span>);</pre>
          <h4>Eccezione personalizzata</h4>
          <pre><span class="kw">class</span> <span class="ty">SaldoInsufficienteException</span> : Exception {
    <span class="kw">public</span> <span class="ty">double</span> Saldo;
    <span class="kw">public</span> <span class="fn">SaldoInsufficienteException</span>(<span class="ty">double</span> saldo)
        : <span class="kw">base</span>(<span class="str">$"Saldo insufficiente: {saldo}€"</span>) { Saldo = saldo; }
}</pre>
          <table>
            <tr><th>Eccezione</th><th>Causa</th></tr>
            <tr><td>FormatException</td><td>int.Parse("abc")</td></tr>
            <tr><td>NullReferenceException</td><td>Accesso a oggetto null</td></tr>
            <tr><td>IndexOutOfRangeException</td><td>Indice array fuori dai limiti</td></tr>
            <tr><td>DivideByZeroException</td><td>Divisione per zero</td></tr>
            <tr><td>ArgumentException</td><td>Argomento non valido</td></tr>
          </table>
        </div>
      </div>
      <!-- 9. Static & Object Init -->
      <div class="topic-card">
        <div class="topic-header" onclick="toggle(this.closest('.topic-card'))"><div><h3>9. Static &amp; Object Initializer</h3><div class="topic-sub">static class, membri statici, singleton, object initializer</div></div><span class="arrow">▼</span></div>
        <div class="topic-body">
          <pre><span class="cm">// static class — si usa senza new:</span>
<span class="kw">static</span> <span class="kw">class</span> <span class="ty">Matematica</span> {
    <span class="kw">public</span> <span class="kw">static</span> <span class="ty">double</span> PI = <span class="num">3.14159</span>;
    <span class="kw">public</span> <span class="kw">static</span> <span class="ty">int</span> <span class="fn">Quadrato</span>(<span class="ty">int</span> n) => n * n;
}
Console.<span class="fn">WriteLine</span>(Matematica.PI);
Console.<span class="fn">WriteLine</span>(Matematica.<span class="fn">Quadrato</span>(<span class="num">5</span>));  <span class="cm">// 25</span>

<span class="cm">// Membro statico in una classe normale — condiviso tra tutte le istanze:</span>
<span class="kw">class</span> <span class="ty">Contatore</span> {
    <span class="kw">public</span> <span class="kw">static</span> <span class="ty">int</span> Totale = <span class="num">0</span>;
    <span class="kw">public</span> <span class="fn">Contatore</span>() { Totale++; }
}
<span class="kw">new</span> Contatore(); <span class="kw">new</span> Contatore();
Console.<span class="fn">WriteLine</span>(Contatore.Totale);  <span class="cm">// 2</span>

<span class="cm">// Object Initializer:</span>
Persona p = <span class="kw">new</span> Persona { Nome = <span class="str">"Marco"</span>, Eta = <span class="num">25</span> };
<span class="cm">// equivale a: new Persona(); p.Nome = "Marco"; p.Eta = 25;</span></pre>
        </div>
      </div>
      <!-- 10. is, as, typeof -->
      <div class="topic-card">
        <div class="topic-header" onclick="toggle(this.closest('.topic-card'))"><div><h3>10. is, as, typeof — Type Checking</h3><div class="topic-sub">Verificare e convertire tipi a runtime</div></div><span class="arrow">▼</span></div>
        <div class="topic-body">
          <pre><span class="cm">// is — controlla se un oggetto è di un tipo:</span>
<span class="kw">if</span> (animale <span class="kw">is</span> Cane) Console.<span class="fn">WriteLine</span>(<span class="str">"È un cane!"</span>);

<span class="cm">// is con pattern variable (C# 7+):</span>
<span class="kw">if</span> (animale <span class="kw">is</span> Cane cane) {
    cane.<span class="fn">FaiVerso</span>();  <span class="cm">// usa direttamente come Cane</span>
}

<span class="cm">// as — cast sicuro, restituisce null se fallisce:</span>
Cane? cane = animale <span class="kw">as</span> Cane;
<span class="kw">if</span> (cane != <span class="kw">null</span>) cane.<span class="fn">FaiVerso</span>();

<span class="cm">// typeof — tipo in fase di compilazione:</span>
Console.<span class="fn">WriteLine</span>(<span class="kw">typeof</span>(<span class="ty">int</span>));     <span class="cm">// System.Int32</span>
Console.<span class="fn">WriteLine</span>(<span class="kw">typeof</span>(Persona)); <span class="cm">// namespace.Persona</span>

<span class="cm">// GetType() — tipo in fase di esecuzione:</span>
Console.<span class="fn">WriteLine</span>(p.<span class="fn">GetType</span>());     <span class="cm">// tipo reale dell'istanza</span></pre>
        </div>
      </div>
      <!-- 11. File di Testo -->
      <div class="topic-card">
        <div class="topic-header" onclick="toggle(this.closest('.topic-card'))"><div><h3>11. File di Testo</h3><div class="topic-sub">File.ReadAllText, WriteAllText, AppendAllText, ReadAllLines</div></div><span class="arrow">▼</span></div>
        <div class="topic-body">
          <pre><span class="kw">using</span> System.IO;

<span class="cm">// Scrittura (sovrascrive o crea):</span>
File.<span class="fn">WriteAllText</span>(<span class="str">"note.txt"</span>, <span class="str">"Ciao Mondo!"</span>);

<span class="cm">// Scrivere più righe:</span>
<span class="ty">string</span>[] righe = { <span class="str">"Riga 1"</span>, <span class="str">"Riga 2"</span>, <span class="str">"Riga 3"</span> };
File.<span class="fn">WriteAllLines</span>(<span class="str">"note.txt"</span>, righe);

<span class="cm">// Aggiungere in fondo (append):</span>
File.<span class="fn">AppendAllText</span>(<span class="str">"note.txt"</span>, <span class="str">"\nNuova riga"</span>);

<span class="cm">// Lettura:</span>
<span class="ty">string</span> testo = File.<span class="fn">ReadAllText</span>(<span class="str">"note.txt"</span>);
<span class="ty">string</span>[] tutteLeRighe = File.<span class="fn">ReadAllLines</span>(<span class="str">"note.txt"</span>);

<span class="cm">// Utilità:</span>
File.<span class="fn">Exists</span>(<span class="str">"note.txt"</span>);    <span class="cm">// true/false</span>
File.<span class="fn">Delete</span>(<span class="str">"note.txt"</span>);    <span class="cm">// elimina</span>
File.<span class="fn">Copy</span>(<span class="str">"src.txt"</span>, <span class="str">"dst.txt"</span>); <span class="cm">// copia</span>
File.<span class="fn">Move</span>(<span class="str">"old.txt"</span>, <span class="str">"new.txt"</span>); <span class="cm">// sposta/rinomina</span></pre>
        </div>
      </div>
      <!-- 12. StreamReader/Writer -->
      <div class="topic-card">
        <div class="topic-header" onclick="toggle(this.closest('.topic-card'))"><div><h3>12. StreamReader &amp; StreamWriter</h3><div class="topic-sub">Lettura/scrittura riga per riga, encoding, using</div></div><span class="arrow">▼</span></div>
        <div class="topic-body">
          <pre><span class="kw">using</span> System.IO;
<span class="kw">using</span> System.Text;

<span class="cm">// Scrittura con StreamWriter:</span>
<span class="kw">using</span> (StreamWriter sw = <span class="kw">new</span> StreamWriter(<span class="str">"dati.txt"</span>)) {
    sw.<span class="fn">WriteLine</span>(<span class="str">"Prima riga"</span>);
    sw.<span class="fn">WriteLine</span>(<span class="str">"Seconda riga"</span>);
}  <span class="cm">// il using chiude automaticamente lo stream!</span>

<span class="cm">// Append (aggiunta in fondo):</span>
<span class="kw">using</span> (StreamWriter sw = <span class="kw">new</span> StreamWriter(<span class="str">"dati.txt"</span>, append: <span class="kw">true</span>))
    sw.<span class="fn">WriteLine</span>(<span class="str">"Riga aggiunta"</span>);

<span class="cm">// Lettura con StreamReader:</span>
<span class="kw">using</span> (StreamReader sr = <span class="kw">new</span> StreamReader(<span class="str">"dati.txt"</span>)) {
    <span class="ty">string</span> riga;
    <span class="kw">while</span> ((riga = sr.<span class="fn">ReadLine</span>()) != <span class="kw">null</span>)
        Console.<span class="fn">WriteLine</span>(riga);
}

<span class="cm">// Con encoding UTF-8 (per caratteri speciali/accentati):</span>
<span class="kw">using</span> (StreamWriter sw = <span class="kw">new</span> StreamWriter(<span class="str">"file.txt"</span>, <span class="kw">false</span>, Encoding.UTF8))
    sw.<span class="fn">WriteLine</span>(<span class="str">"Testo con accenti: à è ì ò ù"</span>);</pre>
        </div>
      </div>
      <!-- 13. JSON -->
      <div class="topic-card">
        <div class="topic-header" onclick="toggle(this.closest('.topic-card'))"><div><h3>13. JSON</h3><div class="topic-sub">JsonSerializer.Serialize / Deserialize, opzioni, attributi</div></div><span class="arrow">▼</span></div>
        <div class="topic-body">
          <pre><span class="kw">using</span> System.Text.Json;

<span class="kw">class</span> <span class="ty">Studente</span> {
    <span class="kw">public</span> <span class="ty">string</span> Nome { <span class="kw">get</span>; <span class="kw">set</span>; }
    <span class="kw">public</span> <span class="ty">int</span>    Eta  { <span class="kw">get</span>; <span class="kw">set</span>; }
}

<span class="cm">// Oggetto → JSON:</span>
Studente s = <span class="kw">new</span> Studente { Nome = <span class="str">"Marco"</span>, Eta = <span class="num">20</span> };
<span class="ty">string</span> json = JsonSerializer.<span class="fn">Serialize</span>(s);
<span class="cm">// {"Nome":"Marco","Eta":20}</span>

<span class="cm">// Con formattazione leggibile:</span>
<span class="kw">var</span> opzioni = <span class="kw">new</span> JsonSerializerOptions { WriteIndented = <span class="kw">true</span> };
<span class="ty">string</span> jsonBello = JsonSerializer.<span class="fn">Serialize</span>(s, opzioni);

<span class="cm">// JSON → Oggetto:</span>
Studente letto = JsonSerializer.<span class="fn">Deserialize</span>&lt;Studente&gt;(json);

<span class="cm">// Salvare/caricare da file:</span>
File.<span class="fn">WriteAllText</span>(<span class="str">"studente.json"</span>, jsonBello);
<span class="ty">string</span> jsonDaFile = File.<span class="fn">ReadAllText</span>(<span class="str">"studente.json"</span>);
Studente daFile = JsonSerializer.<span class="fn">Deserialize</span>&lt;Studente&gt;(jsonDaFile);</pre>
        </div>
      </div>
      <!-- 14. XML -->
      <div class="topic-card">
        <div class="topic-header" onclick="toggle(this.closest('.topic-card'))"><div><h3>14. XML</h3><div class="topic-sub">XmlSerializer, XDocument, LINQ to XML</div></div><span class="arrow">▼</span></div>
        <div class="topic-body">
          <pre><span class="kw">using</span> System.Xml.Serialization;
<span class="kw">using</span> System.IO;

[Serializable]
<span class="kw">public</span> <span class="kw">class</span> <span class="ty">Prodotto</span> {
    <span class="kw">public</span> <span class="ty">string</span> Nome    { <span class="kw">get</span>; <span class="kw">set</span>; }
    <span class="kw">public</span> <span class="ty">double</span> Prezzo  { <span class="kw">get</span>; <span class="kw">set</span>; }
}

<span class="cm">// Oggetto → XML:</span>
Prodotto p = <span class="kw">new</span> Prodotto { Nome = <span class="str">"Laptop"</span>, Prezzo = <span class="num">999.99</span> };
XmlSerializer ser = <span class="kw">new</span> XmlSerializer(<span class="kw">typeof</span>(Prodotto));
<span class="kw">using</span> (StreamWriter sw = <span class="kw">new</span> StreamWriter(<span class="str">"p.xml"</span>))
    ser.<span class="fn">Serialize</span>(sw, p);

<span class="cm">// XML → Oggetto:</span>
<span class="kw">using</span> (StreamReader sr = <span class="kw">new</span> StreamReader(<span class="str">"p.xml"</span>))
    Prodotto letto = (Prodotto)ser.<span class="fn">Deserialize</span>(sr);</pre>
        </div>
      </div>
      <!-- 15. Eccezioni I/O -->
      <div class="topic-card">
        <div class="topic-header" onclick="toggle(this.closest('.topic-card'))"><div><h3>15. Eccezioni I/O</h3><div class="topic-sub">FileNotFoundException, IOException, pattern using + try/catch</div></div><span class="arrow">▼</span></div>
        <div class="topic-body">
          <table>
            <tr><th>Eccezione</th><th>Causa</th></tr>
            <tr><td>FileNotFoundException</td><td>File non trovato</td></tr>
            <tr><td>DirectoryNotFoundException</td><td>Directory non trovata</td></tr>
            <tr><td>IOException</td><td>Errore generico I/O</td></tr>
            <tr><td>UnauthorizedAccessException</td><td>Permessi insufficienti</td></tr>
          </table>
          <pre><span class="kw">static</span> <span class="ty">string</span> <span class="fn">LeggiFile</span>(<span class="ty">string</span> percorso) {
    <span class="kw">try</span> { <span class="kw">return</span> File.<span class="fn">ReadAllText</span>(percorso); }
    <span class="kw">catch</span> (FileNotFoundException) {
        Console.<span class="fn">WriteLine</span>(<span class="str">"File non trovato!"</span>); <span class="kw">return</span> <span class="kw">null</span>;
    }
    <span class="kw">catch</span> (IOException ex) {
        Console.<span class="fn">WriteLine</span>(<span class="str">$"Errore I/O: {ex.Message}"</span>); <span class="kw">return</span> <span class="kw">null</span>;
    }
}</pre>
        </div>
      </div>
      <!-- 16. Dictionary<K,V> -->
      <div class="topic-card">
        <div class="topic-header" onclick="toggle(this.closest('.topic-card'))"><div><h3>16. Dictionary&lt;K,V&gt;</h3><div class="topic-sub">Chiave-valore, ContainsKey, TryGetValue, iterazione</div></div><span class="arrow">▼</span></div>
        <div class="topic-body">
          <pre><span class="kw">using</span> System.Collections.Generic;

Dictionary&lt;<span class="ty">string</span>, <span class="ty">int</span>&gt; eta = <span class="kw">new</span>() {
    { <span class="str">"Marco"</span>, <span class="num">25</span> },
    { <span class="str">"Giulia"</span>, <span class="num">30</span> }
};

<span class="cm">// Aggiungere / modificare:</span>
eta[<span class="str">"Luca"</span>] = <span class="num">22</span>;    <span class="cm">// aggiunge</span>
eta[<span class="str">"Marco"</span>] = <span class="num">26</span>; <span class="cm">// modifica</span>

<span class="cm">// Leggere:</span>
Console.<span class="fn">WriteLine</span>(eta[<span class="str">"Giulia"</span>]);  <span class="cm">// 30</span>

<span class="cm">// Accesso sicuro (evita KeyNotFoundException):</span>
<span class="kw">if</span> (eta.<span class="fn">ContainsKey</span>(<span class="str">"Sara"</span>)) Console.<span class="fn">WriteLine</span>(eta[<span class="str">"Sara"</span>]);
<span class="kw">if</span> (eta.<span class="fn">TryGetValue</span>(<span class="str">"Marco"</span>, <span class="kw">out int</span> valore)) Console.<span class="fn">WriteLine</span>(valore);

<span class="cm">// Rimuovere:</span>
eta.<span class="fn">Remove</span>(<span class="str">"Luca"</span>);

<span class="cm">// Iterare:</span>
<span class="kw">foreach</span> (<span class="kw">var</span> coppia <span class="kw">in</span> eta)
    Console.<span class="fn">WriteLine</span>(<span class="str">$"{coppia.Key} ha {coppia.Value} anni"</span>);</pre>
          <table>
            <tr><th></th><th>List&lt;T&gt;</th><th>Dictionary&lt;K,V&gt;</th></tr>
            <tr><td>Accesso</td><td>Per indice [0]</td><td>Per chiave ["nome"]</td></tr>
            <tr><td>Duplicati</td><td>Ammessi</td><td>Chiavi uniche</td></tr>
            <tr><td>Usalo per</td><td>Liste ordinate</td><td>Ricerca per chiave</td></tr>
          </table>
        </div>
      </div>
      <!-- 17. Classe Path -->
      <div class="topic-card">
        <div class="topic-header" onclick="toggle(this.closest('.topic-card'))"><div><h3>17. Classe Path</h3><div class="topic-sub">Path.Combine, GetFileName, GetExtension, GetDirectoryName</div></div><span class="arrow">▼</span></div>
        <div class="topic-body">
          <pre><span class="kw">using</span> System.IO;

<span class="ty">string</span> path = Path.<span class="fn">Combine</span>(<span class="str">"C:\\Users"</span>, <span class="str">"Marco"</span>, <span class="str">"doc.txt"</span>);
<span class="cm">// → C:\Users\Marco\doc.txt</span>

Path.<span class="fn">GetFileName</span>(path);                 <span class="cm">// "doc.txt"</span>
Path.<span class="fn">GetFileNameWithoutExtension</span>(path);  <span class="cm">// "doc"</span>
Path.<span class="fn">GetExtension</span>(path);                <span class="cm">// ".txt"</span>
Path.<span class="fn">GetDirectoryName</span>(path);            <span class="cm">// "C:\Users\Marco"</span>
Path.<span class="fn">GetFullPath</span>(<span class="str">"note.txt"</span>);           <span class="cm">// percorso assoluto completo</span>
Path.<span class="fn">GetTempPath</span>();                     <span class="cm">// cartella temp del sistema</span>
Path.<span class="fn">ChangeExtension</span>(path, <span class="str">".pdf"</span>);    <span class="cm">// "C:\Users\Marco\doc.pdf"</span></pre>
          <div class="tip">Usa sempre Path.Combine invece di concatenare con \ — funziona su Windows, Mac e Linux!</div>
        </div>
      </div>
    </div>

    <!-- SECTION AVANZATO (23) -->
    <div class="section" id="section-advanced">
      <div class="section-title">III — Avanzato <span class="tag">ADV</span></div>
      <!-- 1. LINQ -->
      <div class="topic-card">
        <div class="topic-header" onclick="toggle(this.closest('.topic-card'))"><div><h3>1. LINQ</h3><div class="topic-sub">Where, Select, OrderBy, GroupBy, First, Count, Sum, Any, All</div></div><span class="arrow">▼</span></div>
        <div class="topic-body">
          <p>LINQ (Language Integrated Query) permette di interrogare collezioni come se fossero database.</p>
          <pre><span class="kw">using</span> System.Linq;

List&lt;<span class="ty">int</span>&gt; numeri = <span class="kw">new</span>() { <span class="num">1</span>,<span class="num">2</span>,<span class="num">3</span>,<span class="num">4</span>,<span class="num">5</span>,<span class="num">6</span>,<span class="num">7</span>,<span class="num">8</span>,<span class="num">9</span>,<span class="num">10</span> };

<span class="cm">// Where — filtra:</span>
<span class="kw">var</span> pari = numeri.<span class="fn">Where</span>(n => n % <span class="num">2</span> == <span class="num">0</span>);  <span class="cm">// 2,4,6,8,10</span>

<span class="cm">// Select — trasforma:</span>
<span class="kw">var</span> quadrati = numeri.<span class="fn">Select</span>(n => n * n);   <span class="cm">// 1,4,9,16…</span>

<span class="cm">// OrderBy / OrderByDescending:</span>
<span class="kw">var</span> ordinati = numeri.<span class="fn">OrderByDescending</span>(n => n);

<span class="cm">// First / FirstOrDefault:</span>
<span class="ty">int</span> primo = numeri.<span class="fn">First</span>(n => n > <span class="num">5</span>);   <span class="cm">// 6 (lancia eccezione se non trovato)</span>
<span class="ty">int</span> safe  = numeri.<span class="fn">FirstOrDefault</span>(n => n > <span class="num">100</span>);  <span class="cm">// 0 (default)</span>

<span class="cm">// Aggregazioni:</span>
<span class="ty">int</span> somma = numeri.<span class="fn">Sum</span>();
<span class="ty">double</span> media = numeri.<span class="fn">Average</span>();
<span class="ty">int</span> max = numeri.<span class="fn">Max</span>();
<span class="ty">int</span> conteggio = numeri.<span class="fn">Count</span>(n => n > <span class="num">5</span>);

<span class="cm">// Any / All:</span>
<span class="ty">bool</span> haNegativi = numeri.<span class="fn">Any</span>(n => n < <span class="num">0</span>);   <span class="cm">// false</span>
<span class="ty">bool</span> tuttiPos   = numeri.<span class="fn">All</span>(n => n > <span class="num">0</span>);   <span class="cm">// true</span>

<span class="cm">// Concatenazione:</span>
<span class="kw">var</span> risultato = numeri
    .<span class="fn">Where</span>(n => n % <span class="num">2</span> == <span class="num">0</span>)
    .<span class="fn">Select</span>(n => n * <span class="num">10</span>)
    .<span class="fn">OrderBy</span>(n => n)
    .<span class="fn">ToList</span>();

<span class="cm">// GroupBy:</span>
<span class="kw">var</span> gruppi = numeri.<span class="fn">GroupBy</span>(n => n % <span class="num">2</span> == <span class="num">0</span> ? <span class="str">"pari"</span> : <span class="str">"dispari"</span>);
<span class="kw">foreach</span> (<span class="kw">var</span> g <span class="kw">in</span> gruppi)
    Console.<span class="fn">WriteLine</span>(<span class="str">$"{g.Key}: {string.Join(", ", g)}"</span>);

<span class="cm">// Sintassi query (alternativa):</span>
<span class="kw">var</span> query = <span class="kw">from</span> n <span class="kw">in</span> numeri
            <span class="kw">where</span> n > <span class="num">5</span>
            <span class="kw">orderby</span> n
            <span class="kw">select</span> n;</pre>
        </div>
      </div>
      <!-- 2. Generics -->
      <div class="topic-card">
        <div class="topic-header" onclick="toggle(this.closest('.topic-card'))"><div><h3>2. Generics &lt;T&gt;</h3><div class="topic-sub">Classi e metodi generici, constraints where T:</div></div><span class="arrow">▼</span></div>
        <div class="topic-body">
          <pre><span class="cm">// Metodo generico — funziona con qualsiasi tipo:</span>
<span class="kw">static</span> <span class="ty">void</span> <span class="fn">Stampa</span>&lt;T&gt;(T valore) =>
    Console.<span class="fn">WriteLine</span>(<span class="str">$"Valore: {valore} (tipo: {typeof(T).Name})"</span>);

<span class="fn">Stampa</span>(<span class="num">42</span>);        <span class="cm">// int</span>
<span class="fn">Stampa</span>(<span class="str">"Ciao"</span>);   <span class="cm">// string</span>
<span class="fn">Stampa</span>(<span class="num">3.14</span>);     <span class="cm">// double</span>

<span class="cm">// Classe generica:</span>
<span class="kw">class</span> <span class="ty">Scatola</span>&lt;T&gt; {
    <span class="kw">public</span> T Contenuto { <span class="kw">get</span>; <span class="kw">set</span>; }
    <span class="kw">public</span> <span class="fn">Scatola</span>(T contenuto) { Contenuto = contenuto; }
    <span class="kw">public</span> <span class="ty">string</span> <span class="fn">Descrivi</span>() => <span class="str">$"Contiene: {Contenuto}"</span>;
}

Scatola&lt;<span class="ty">int</span>&gt;    s1 = <span class="kw">new</span>(<span class="num">42</span>);
Scatola&lt;<span class="ty">string</span>&gt; s2 = <span class="kw">new</span>(<span class="str">"Ciao"</span>);

<span class="cm">// Constraints — limitare il tipo:</span>
<span class="kw">static</span> T <span class="fn">Massimo</span>&lt;T&gt;(T a, T b) <span class="kw">where</span> T : IComparable&lt;T&gt;
    => a.CompareTo(b) > <span class="num">0</span> ? a : b;

<span class="fn">Massimo</span>(<span class="num">3</span>, <span class="num">7</span>);        <span class="cm">// 7</span>
<span class="fn">Massimo</span>(<span class="str">"abc"</span>, <span class="str">"xyz"</span>); <span class="cm">// "xyz"</span></pre>
        </div>
      </div>
      <!-- 3. Delegates & Events -->
      <div class="topic-card">
        <div class="topic-header" onclick="toggle(this.closest('.topic-card'))"><div><h3>3. Delegates &amp; Events</h3><div class="topic-sub">delegate, Func, Action, Predicate, event</div></div><span class="arrow">▼</span></div>
        <div class="topic-body">
          <pre><span class="cm">// Delegate — puntatore a un metodo:</span>
<span class="kw">delegate</span> <span class="ty">int</span> Operazione(<span class="ty">int</span> a, <span class="ty">int</span> b);

<span class="kw">static</span> <span class="ty">int</span> <span class="fn">Somma</span>(<span class="ty">int</span> a, <span class="ty">int</span> b) => a + b;
<span class="kw">static</span> <span class="ty">int</span> <span class="fn">Prodotto</span>(<span class="ty">int</span> a, <span class="ty">int</span> b) => a * b;

Operazione op = Somma;
Console.<span class="fn">WriteLine</span>(op(<span class="num">3</span>, <span class="num">4</span>));   <span class="cm">// 7</span>
op = Prodotto;
Console.<span class="fn">WriteLine</span>(op(<span class="num">3</span>, <span class="num">4</span>));   <span class="cm">// 12</span>

<span class="cm">// Func&lt;...&gt; — delegate che restituisce un valore:</span>
Func&lt;<span class="ty">int</span>, <span class="ty">int</span>, <span class="ty">int</span>&gt; somma = (a, b) => a + b;
Func&lt;<span class="ty">string</span>, <span class="ty">int</span>&gt;   lunghezza = s => s.Length;

<span class="cm">// Action&lt;...&gt; — delegate void:</span>
Action&lt;<span class="ty">string</span>&gt; stampa = s => Console.<span class="fn">WriteLine</span>(s);
stampa(<span class="str">"Ciao!"</span>);

<span class="cm">// Predicate&lt;T&gt; — delegate che restituisce bool:</span>
Predicate&lt;<span class="ty">int</span>&gt; ePari = n => n % <span class="num">2</span> == <span class="num">0</span>;

<span class="cm">// Event:</span>
<span class="kw">class</span> <span class="ty">Bottone</span> {
    <span class="kw">public</span> <span class="kw">event</span> Action Click;
    <span class="kw">public</span> <span class="ty">void</span> <span class="fn">Premi</span>() => Click?.Invoke();
}
Bottone b = <span class="kw">new</span>();
b.Click += () => Console.<span class="fn">WriteLine</span>(<span class="str">"Cliccato!"</span>);
b.<span class="fn">Premi</span>();</pre>
        </div>
      </div>
      <!-- 4. Lambda & Closures -->
      <div class="topic-card">
        <div class="topic-header" onclick="toggle(this.closest('.topic-card'))"><div><h3>4. Lambda &amp; Closures</h3><div class="topic-sub">Espressioni lambda, variabili catturate, metodi anonimi</div></div><span class="arrow">▼</span></div>
        <div class="topic-body">
          <pre><span class="cm">// Sintassi lambda:</span>
<span class="cm">// (parametri) => espressione</span>
<span class="cm">// (parametri) => { blocco di codice }</span>

Func&lt;<span class="ty">int</span>, <span class="ty">int</span>&gt; quadrato = x => x * x;
Func&lt;<span class="ty">int</span>, <span class="ty">int</span>, <span class="ty">int</span>&gt; somma = (a, b) => a + b;
Action saluta = () => Console.<span class="fn">WriteLine</span>(<span class="str">"Ciao!"</span>);

<span class="cm">// Lambda con corpo:</span>
Func&lt;<span class="ty">int</span>, <span class="ty">string</span>&gt; classifica = n => {
    <span class="kw">if</span> (n >= <span class="num">90</span>) <span class="kw">return</span> <span class="str">"Ottimo"</span>;
    <span class="kw">if</span> (n >= <span class="num">60</span>) <span class="kw">return</span> <span class="str">"Sufficiente"</span>;
    <span class="kw">return</span> <span class="str">"Insufficiente"</span>;
};

<span class="cm">// Closure — cattura variabile esterna:</span>
<span class="ty">int</span> moltiplicatore = <span class="num">3</span>;
Func&lt;<span class="ty">int</span>, <span class="ty">int</span>&gt; moltiplica = n => n * moltiplicatore;
Console.<span class="fn">WriteLine</span>(moltiplica(<span class="num">5</span>));  <span class="cm">// 15</span>
moltiplicatore = <span class="num">10</span>;
Console.<span class="fn">WriteLine</span>(moltiplica(<span class="num">5</span>));  <span class="cm">// 50 ← usa il valore aggiornato!</span></pre>
        </div>
      </div>
      <!-- 5. async / await -->
      <div class="topic-card">
        <div class="topic-header" onclick="toggle(this.closest('.topic-card'))"><div><h3>5. async / await</h3><div class="topic-sub">Task, async, await, Task.WhenAll, Task.WhenAny</div></div><span class="arrow">▼</span></div>
        <div class="topic-body">
          <pre><span class="kw">using</span> System.Threading.Tasks;

<span class="cm">// Metodo asincrono — non blocca il thread:</span>
<span class="kw">static</span> <span class="kw">async</span> Task&lt;<span class="ty">string</span>&gt; <span class="fn">ScaricaDati</span>() {
    <span class="kw">await</span> Task.<span class="fn">Delay</span>(<span class="num">2000</span>);  <span class="cm">// simula attesa 2 secondi</span>
    <span class="kw">return</span> <span class="str">"Dati scaricati!"</span>;
}

<span class="cm">// Chiamata:</span>
<span class="kw">static</span> <span class="kw">async</span> Task <span class="fn">Main</span>(<span class="ty">string</span>[] args) {
    Console.<span class="fn">WriteLine</span>(<span class="str">"Inizio..."</span>);
    <span class="ty">string</span> risultato = <span class="kw">await</span> <span class="fn">ScaricaDati</span>();
    Console.<span class="fn">WriteLine</span>(risultato);
}

<span class="cm">// Task.WhenAll — esegue più task in parallelo:</span>
Task&lt;<span class="ty">string</span>&gt; t1 = <span class="fn">ScaricaDati</span>();
Task&lt;<span class="ty">string</span>&gt; t2 = <span class="fn">ScaricaDati</span>();
<span class="ty">string</span>[] risultati = <span class="kw">await</span> Task.<span class="fn">WhenAll</span>(t1, t2);

<span class="cm">// void async (per event handler):</span>
<span class="kw">async</span> <span class="ty">void</span> <span class="fn">OnClick</span>() {
    <span class="kw">await</span> Task.<span class="fn">Delay</span>(<span class="num">1000</span>);
    Console.<span class="fn">WriteLine</span>(<span class="str">"Fatto!"</span>);
}</pre>
          <table>
            <tr><th>Tipo di ritorno</th><th>Usa quando</th></tr>
            <tr><td>Task</td><td>Metodo async void (operazioni)</td></tr>
            <tr><td>Task&lt;T&gt;</td><td>Metodo async che restituisce T</td></tr>
            <tr><td>async void</td><td>Solo per event handler</td></tr>
          </table>
        </div>
      </div>
      <!-- 6. DateTime & TimeSpan -->
      <div class="topic-card">
        <div class="topic-header" onclick="toggle(this.closest('.topic-card'))"><div><h3>6. DateTime &amp; TimeSpan</h3><div class="topic-sub">Now, Today, Parse, Format, Add, differenza tra date</div></div><span class="arrow">▼</span></div>
        <div class="topic-body">
          <pre><span class="cm">// Ottenere la data/ora corrente:</span>
DateTime ora  = DateTime.Now;    <span class="cm">// data e ora locali</span>
DateTime oggi = DateTime.Today;  <span class="cm">// solo data (ora = 00:00:00)</span>
DateTime utc  = DateTime.UtcNow; <span class="cm">// UTC</span>

<span class="cm">// Creare una data specifica:</span>
DateTime natale = <span class="kw">new</span> DateTime(<span class="num">2025</span>, <span class="num">12</span>, <span class="num">25</span>);
DateTime precisa = <span class="kw">new</span> DateTime(<span class="num">2025</span>, <span class="num">12</span>, <span class="num">25</span>, <span class="num">18</span>, <span class="num">30</span>, <span class="num">0</span>); <span class="cm">// 18:30:00</span>

<span class="cm">// Formattazione:</span>
Console.<span class="fn">WriteLine</span>(ora.<span class="fn">ToString</span>(<span class="str">"dd/MM/yyyy"</span>));        <span class="cm">// 25/12/2025</span>
Console.<span class="fn">WriteLine</span>(ora.<span class="fn">ToString</span>(<span class="str">"HH:mm:ss"</span>));           <span class="cm">// 18:30:00</span>
Console.<span class="fn">WriteLine</span>(ora.<span class="fn">ToString</span>(<span class="str">"dd/MM/yyyy HH:mm"</span>));  <span class="cm">// 25/12/2025 18:30</span>
Console.<span class="fn">WriteLine</span>(<span class="str">$"Oggi è {ora:dddd d MMMM yyyy}"</span>);   <span class="cm">// Giovedì 25 Dicembre 2025</span>

<span class="cm">// Aggiungere/sottrarre tempo:</span>
DateTime domani     = oggi.<span class="fn">AddDays</span>(<span class="num">1</span>);
DateTime settimana  = oggi.<span class="fn">AddDays</span>(<span class="num">7</span>);
DateTime mesePrima  = oggi.<span class="fn">AddMonths</span>(-<span class="num">1</span>);
DateTime tra2ore    = ora.<span class="fn">AddHours</span>(<span class="num">2</span>);

<span class="cm">// Proprietà:</span>
Console.<span class="fn">WriteLine</span>(ora.Year);        <span class="cm">// 2025</span>
Console.<span class="fn">WriteLine</span>(ora.Month);       <span class="cm">// 12</span>
Console.<span class="fn">WriteLine</span>(ora.Day);         <span class="cm">// 25</span>
Console.<span class="fn">WriteLine</span>(ora.DayOfWeek);   <span class="cm">// Thursday</span>

<span class="cm">// TimeSpan — differenza tra date:</span>
TimeSpan diff = natale - oggi;
Console.<span class="fn">WriteLine</span>(<span class="str">$"Giorni a Natale: {diff.Days}"</span>);

<span class="cm">// Parse:</span>
DateTime d = DateTime.<span class="fn">Parse</span>(<span class="str">"25/12/2025"</span>);
<span class="ty">bool</span> ok = DateTime.<span class="fn">TryParse</span>(<span class="str">"abc"</span>, <span class="kw">out</span> DateTime result);</pre>
        </div>
      </div>
      <!-- 7. StringBuilder -->
      <div class="topic-card">
        <div class="topic-header" onclick="toggle(this.closest('.topic-card'))"><div><h3>7. StringBuilder</h3><div class="topic-sub">Append, Insert, Replace, Remove — performance per stringhe lunghe</div></div><span class="arrow">▼</span></div>
        <div class="topic-body">
          <p>Le stringhe normali sono <strong>immutabili</strong> — ogni += crea una nuova stringa. StringBuilder modifica il buffer direttamente, molto più efficiente per molte concatenazioni.</p>
          <pre><span class="kw">using</span> System.Text;

StringBuilder sb = <span class="kw">new</span> StringBuilder();
sb.<span class="fn">Append</span>(<span class="str">"Ciao"</span>);
sb.<span class="fn">Append</span>(<span class="str">" "</span>);
sb.<span class="fn">Append</span>(<span class="str">"Mondo"</span>);
sb.<span class="fn">AppendLine</span>(<span class="str">"!"</span>);         <span class="cm">// aggiunge + \n</span>
sb.<span class="fn">Insert</span>(<span class="num">0</span>, <span class="str">">>> "</span>);       <span class="cm">// inserisce in posizione 0</span>
sb.<span class="fn">Replace</span>(<span class="str">"Mondo"</span>, <span class="str">"Italia"</span>); <span class="cm">// sostituisce</span>
sb.<span class="fn">Remove</span>(<span class="num">0</span>, <span class="num">4</span>);             <span class="cm">// rimuove 4 caratteri da posizione 0</span>
Console.<span class="fn">WriteLine</span>(sb.Length); <span class="cm">// lunghezza buffer</span>
<span class="ty">string</span> risultato = sb.<span class="fn">ToString</span>(); <span class="cm">// converte in stringa</span>
sb.<span class="fn">Clear</span>();                   <span class="cm">// svuota</span></pre>
          <div class="warn">Per meno di ~10 concatenazioni, usa += normale. StringBuilder conviene per loop con molte operazioni.</div>
        </div>
      </div>
      <!-- 8. Random & Utilità -->
      <div class="topic-card">
        <div class="topic-header" onclick="toggle(this.closest('.topic-card'))"><div><h3>8. Random &amp; Utilità</h3><div class="topic-sub">Random, Next, NextDouble, Shuffle, Math completa</div></div><span class="arrow">▼</span></div>
        <div class="topic-body">
          <pre><span class="cm">// Random:</span>
Random rnd = <span class="kw">new</span> Random();
<span class="ty">int</span>    n1 = rnd.<span class="fn">Next</span>();           <span class="cm">// numero casuale qualsiasi</span>
<span class="ty">int</span>    n2 = rnd.<span class="fn">Next</span>(<span class="num">10</span>);         <span class="cm">// 0–9</span>
<span class="ty">int</span>    n3 = rnd.<span class="fn">Next</span>(<span class="num">1</span>, <span class="num">101</span>);     <span class="cm">// 1–100</span>
<span class="ty">double</span> d  = rnd.<span class="fn">NextDouble</span>();     <span class="cm">// 0.0–1.0</span>

<span class="cm">// Random con seed (stessa sequenza):</span>
Random rndFisso = <span class="kw">new</span> Random(<span class="num">42</span>);

<span class="cm">// Mescolare una lista:</span>
List&lt;<span class="ty">int</span>&gt; lista = <span class="kw">new</span>() { <span class="num">1</span>,<span class="num">2</span>,<span class="num">3</span>,<span class="num">4</span>,<span class="num">5</span> };
<span class="kw">var</span> mescolata = lista.<span class="fn">OrderBy</span>(_ => rnd.<span class="fn">Next</span>()).<span class="fn">ToList</span>();

<span class="cm">// Scegliere elemento casuale:</span>
<span class="ty">string</span>[] nomi = { <span class="str">"Marco"</span>, <span class="str">"Giulia"</span>, <span class="str">"Luca"</span> };
<span class="ty">string</span> casuale = nomi[rnd.<span class="fn">Next</span>(nomi.Length)];</pre>
        </div>
      </div>
      <!-- 9. Tuple & ValueTuple -->
      <div class="topic-card">
        <div class="topic-header" onclick="toggle(this.closest('.topic-card'))"><div><h3>9. Tuple &amp; ValueTuple</h3><div class="topic-sub">Ritorno multiplo, named tuples, decostruzione</div></div><span class="arrow">▼</span></div>
        <div class="topic-body">
          <pre><span class="cm">// Tuple — restituire più valori da un metodo:</span>
<span class="kw">static</span> (int min, int max) <span class="fn">TrovaMinMax</span>(<span class="ty">int</span>[] arr) {
    <span class="kw">return</span> (arr.<span class="fn">Min</span>(), arr.<span class="fn">Max</span>());
}

<span class="ty">int</span>[] numeri = { <span class="num">3</span>, <span class="num">1</span>, <span class="num">7</span>, <span class="num">2</span>, <span class="num">9</span> };
<span class="kw">var</span> (min, max) = <span class="fn">TrovaMinMax</span>(numeri);  <span class="cm">// decostruzione</span>
Console.<span class="fn">WriteLine</span>(<span class="str">$"Min: {min}, Max: {max}"</span>);

<span class="cm">// Named tuple:</span>
(<span class="ty">string</span> Nome, <span class="ty">int</span> Eta) persona = (<span class="str">"Marco"</span>, <span class="num">25</span>);
Console.<span class="fn">WriteLine</span>(persona.Nome);  <span class="cm">// "Marco"</span>
Console.<span class="fn">WriteLine</span>(persona.Eta);   <span class="cm">// 25</span>

<span class="cm">// Tuple anonima:</span>
<span class="kw">var</span> t = (<span class="num">1</span>, <span class="str">"ciao"</span>, <span class="kw">true</span>);
Console.<span class="fn">WriteLine</span>(t.Item1);  <span class="cm">// 1</span>
Console.<span class="fn">WriteLine</span>(t.Item2);  <span class="cm">// "ciao"</span></pre>
        </div>
      </div>
      <!-- 10. Pattern Matching -->
      <div class="topic-card">
        <div class="topic-header" onclick="toggle(this.closest('.topic-card'))"><div><h3>10. Pattern Matching</h3><div class="topic-sub">switch expression avanzata, is, when, positional patterns</div></div><span class="arrow">▼</span></div>
        <div class="topic-body">
          <pre><span class="cm">// Pattern con is:</span>
<span class="kw">if</span> (obj <span class="kw">is</span> <span class="ty">int</span> n && n > <span class="num">0</span>) Console.<span class="fn">WriteLine</span>(<span class="str">$"Intero positivo: {n}"</span>);
<span class="kw">if</span> (obj <span class="kw">is</span> <span class="ty">string</span> s && s.Length > <span class="num">5</span>) Console.<span class="fn">WriteLine</span>(<span class="str">$"Stringa lunga: {s}"</span>);
<span class="kw">if</span> (obj <span class="kw">is</span> <span class="kw">null</span>) Console.<span class="fn">WriteLine</span>(<span class="str">"È null"</span>);
<span class="kw">if</span> (obj <span class="kw">is not</span> <span class="kw">null</span>) Console.<span class="fn">WriteLine</span>(<span class="str">"Non è null"</span>);

<span class="cm">// switch expression con pattern:</span>
<span class="ty">string</span> Descrivi(object obj) => obj <span class="kw">switch</span> {
    <span class="ty">int</span> n <span class="kw">when</span> n < <span class="num">0</span>   => <span class="str">"negativo"</span>,
    <span class="ty">int</span> n <span class="kw">when</span> n == <span class="num">0</span>  => <span class="str">"zero"</span>,
    <span class="ty">int</span> n               => <span class="str">$"positivo {n}"</span>,
    <span class="ty">string</span> s            => <span class="str">$"stringa: {s}"</span>,
    <span class="kw">null</span>                => <span class="str">"null"</span>,
    _                   => <span class="str">"altro"</span>
};

<span class="cm">// Range pattern (C# 9+):</span>
<span class="ty">string</span> Giudizio(<span class="ty">int</span> voto) => voto <span class="kw">switch</span> {
    >= <span class="num">90</span>         => <span class="str">"Ottimo"</span>,
    >= <span class="num">75</span> <span class="kw">and</span> < <span class="num">90</span> => <span class="str">"Buono"</span>,
    >= <span class="num">60</span>         => <span class="str">"Sufficiente"</span>,
    _             => <span class="str">"Insufficiente"</span>
};</pre>
        </div>
      </div>
      <!-- 11. Record -->
      <div class="topic-card">
        <div class="topic-header" onclick="toggle(this.closest('.topic-card'))"><div><h3>11. Record</h3><div class="topic-sub">Immutabilità, with expression, value equality (C# 9+)</div></div><span class="arrow">▼</span></div>
        <div class="topic-body">
          <pre><span class="cm">// Record — tipo immutabile con uguaglianza per valore:</span>
<span class="kw">record</span> <span class="ty">Persona</span>(<span class="ty">string</span> Nome, <span class="ty">int</span> Eta);

Persona p1 = <span class="kw">new</span>(<span class="str">"Marco"</span>, <span class="num">25</span>);
Persona p2 = <span class="kw">new</span>(<span class="str">"Marco"</span>, <span class="num">25</span>);

Console.<span class="fn">WriteLine</span>(p1 == p2);     <span class="cm">// true! (valore, non riferimento)</span>
Console.<span class="fn">WriteLine</span>(p1);           <span class="cm">// Persona { Nome = Marco, Eta = 25 }</span>

<span class="cm">// with — crea una copia modificando alcuni valori:</span>
Persona p3 = p1 <span class="kw">with</span> { Eta = <span class="num">30</span> };
Console.<span class="fn">WriteLine</span>(p3);  <span class="cm">// Persona { Nome = Marco, Eta = 30 }</span>

<span class="cm">// Record con corpo (aggiungere metodi):</span>
<span class="kw">record</span> <span class="ty">Prodotto</span>(<span class="ty">string</span> Nome, <span class="ty">double</span> Prezzo) {
    <span class="kw">public</span> <span class="ty">string</span> <span class="fn">Descrivi</span>() => <span class="str">$"{Nome}: €{Prezzo:F2}"</span>;
}</pre>
          <div class="note">Record sono ideali per DTO (Data Transfer Objects), modelli di dati, configurazioni — qualsiasi cosa che non deve cambiare dopo la creazione.</div>
        </div>
      </div>
      <!-- 12. HashSet, Queue & Stack -->
      <div class="topic-card">
        <div class="topic-header" onclick="toggle(this.closest('.topic-card'))"><div><h3>12. HashSet, Queue &amp; Stack</h3><div class="topic-sub">Collezioni specializzate, unicità, FIFO, LIFO</div></div><span class="arrow">▼</span></div>
        <div class="topic-body">
          <h4>HashSet — elementi unici</h4>
          <pre>HashSet&lt;<span class="ty">string</span>&gt; hs = <span class="kw">new</span>() { <span class="str">"a"</span>, <span class="str">"b"</span>, <span class="str">"c"</span> };
hs.<span class="fn">Add</span>(<span class="str">"a"</span>);         <span class="cm">// ignorato, già presente</span>
hs.<span class="fn">Contains</span>(<span class="str">"b"</span>);   <span class="cm">// true — O(1)!</span>
hs.<span class="fn">Remove</span>(<span class="str">"c"</span>);
Console.<span class="fn">WriteLine</span>(hs.Count);  <span class="cm">// 2</span>

<span class="cm">// Operazioni insiemistiche:</span>
hs.<span class="fn">UnionWith</span>(altro);     <span class="cm">// unione</span>
hs.<span class="fn">IntersectWith</span>(altro); <span class="cm">// intersezione</span>
hs.<span class="fn">ExceptWith</span>(altro);    <span class="cm">// differenza</span></pre>
          <h4>Queue — FIFO (primo entrato, primo uscito)</h4>
          <pre>Queue&lt;<span class="ty">string</span>&gt; fila = <span class="kw">new</span>();
fila.<span class="fn">Enqueue</span>(<span class="str">"primo"</span>);
fila.<span class="fn">Enqueue</span>(<span class="str">"secondo"</span>);
<span class="ty">string</span> prossimo = fila.<span class="fn">Dequeue</span>();   <span class="cm">// "primo" (ed è rimosso)</span>
<span class="ty">string</span> spia     = fila.<span class="fn">Peek</span>();     <span class="cm">// "secondo" (non rimosso)</span></pre>
          <h4>Stack — LIFO (ultimo entrato, primo uscito)</h4>
          <pre>Stack&lt;<span class="ty">int</span>&gt; pila = <span class="kw">new</span>();
pila.<span class="fn">Push</span>(<span class="num">1</span>); pila.<span class="fn">Push</span>(<span class="num">2</span>); pila.<span class="fn">Push</span>(<span class="num">3</span>);
<span class="ty">int</span> cima = pila.<span class="fn">Pop</span>();   <span class="cm">// 3 (ed è rimosso)</span>
<span class="ty">int</span> spia  = pila.<span class="fn">Peek</span>(); <span class="cm">// 2 (non rimosso)</span></pre>
        </div>
      </div>
      <!-- 13. Regular Expressions -->
      <div class="topic-card">
        <div class="topic-header" onclick="toggle(this.closest('.topic-card'))"><div><h3>13. Regular Expressions (Regex)</h3><div class="topic-sub">IsMatch, Match, Replace, Groups</div></div><span class="arrow">▼</span></div>
        <div class="topic-body">
          <pre><span class="kw">using</span> System.Text.RegularExpressions;

<span class="cm">// IsMatch — controlla se corrisponde:</span>
<span class="ty">bool</span> eEmail = Regex.<span class="fn">IsMatch</span>(testo, <span class="str">@"^[\w.-]+@[\w.-]+\.\w+$"</span>);
<span class="ty">bool</span> eNumero = Regex.<span class="fn">IsMatch</span>(testo, <span class="str">@"^\d+$"</span>);

<span class="cm">// Match — trova prima corrispondenza:</span>
Match m = Regex.<span class="fn">Match</span>(<span class="str">"Ciao Marco 123"</span>, <span class="str">@"\d+"</span>);
<span class="kw">if</span> (m.Success) Console.<span class="fn">WriteLine</span>(m.Value);  <span class="cm">// "123"</span>

<span class="cm">// Matches — tutte le corrispondenze:</span>
MatchCollection mc = Regex.<span class="fn">Matches</span>(<span class="str">"uno1 due2 tre3"</span>, <span class="str">@"\d"</span>);
<span class="kw">foreach</span> (Match match <span class="kw">in</span> mc) Console.<span class="fn">Write</span>(match.Value + <span class="str">" "</span>); <span class="cm">// 1 2 3</span>

<span class="cm">// Replace:</span>
<span class="ty">string</span> pulito = Regex.<span class="fn">Replace</span>(<span class="str">"Hello   World"</span>, <span class="str">@"\s+"</span>, <span class="str">" "</span>);  <span class="cm">// "Hello World"</span>

<span class="cm">// Gruppi di cattura:</span>
Match data = Regex.<span class="fn">Match</span>(<span class="str">"25/12/2025"</span>, <span class="str">@"(\d{2})/(\d{2})/(\d{4})"</span>);
Console.<span class="fn">WriteLine</span>(data.Groups[<span class="num">1</span>].Value);  <span class="cm">// "25"</span>
Console.<span class="fn">WriteLine</span>(data.Groups[<span class="num">3</span>].Value);  <span class="cm">// "2025"</span></pre>
          <h4>Pattern comuni</h4>
          <table>
            <tr><th>Pattern</th><th>Significato</th></tr>
            <tr><td>\d</td><td>cifra (0-9)</td></tr>
            <tr><td>\w</td><td>parola (a-z, A-Z, 0-9, _)</td></tr>
            <tr><td>\s</td><td>spazio bianco</td></tr>
            <tr><td>.</td><td>qualsiasi carattere</td></tr>
            <tr><td>*</td><td>0 o più volte</td></tr>
            <tr><td>+</td><td>1 o più volte</td></tr>
            <tr><td>^</td><td>inizio stringa</td></tr>
            <tr><td>$</td><td>fine stringa</td></tr>
          </table>
        </div>
      </div>
      <!-- 14. Preprocessore & Attributi -->
      <div class="topic-card">
        <div class="topic-header" onclick="toggle(this.closest('.topic-card'))"><div><h3>14. Preprocessore &amp; Attributi</h3><div class="topic-sub">#region, #if DEBUG, [Obsolete], [Serializable], [Conditional]</div></div><span class="arrow">▼</span></div>
        <div class="topic-body">
          <h4>Direttive del preprocessore</h4>
          <pre><span class="cm">// #region — organizza il codice in blocchi espandibili:</span>
<span class="kw">#region</span> Metodi di utilità
<span class="kw">static</span> <span class="ty">void</span> <span class="fn">MioMetodo</span>() { }
<span class="kw">#endregion</span>

<span class="cm">// #if — codice condizionale (solo in certi build):</span>
<span class="kw">#if</span> DEBUG
Console.<span class="fn">WriteLine</span>(<span class="str">"Modalità debug attiva"</span>);
<span class="kw">#else</span>
Console.<span class="fn">WriteLine</span>(<span class="str">"Produzione"</span>);
<span class="kw">#endif</span>

<span class="cm">// #pragma — disabilita warning specifici:</span>
<span class="kw">#pragma</span> warning disable CS0168
<span class="ty">int</span> variabileNonUsata;
<span class="kw">#pragma</span> warning restore CS0168</pre>
          <h4>Attributi comuni</h4>
          <pre><span class="cm">// [Obsolete] — marca come deprecato:</span>
[Obsolete(<span class="str">"Usa NuovoMetodo() invece"</span>)]
<span class="kw">static</span> <span class="ty">void</span> <span class="fn">VecchioMetodo</span>() { }

<span class="cm">// [Serializable] — per serializzazione:</span>
[Serializable]
<span class="kw">class</span> <span class="ty">MiaClasse</span> { }

<span class="cm">// [Conditional] — metodo chiamato solo in certi build:</span>
[System.Diagnostics.Conditional(<span class="str">"DEBUG"</span>)]
<span class="kw">static</span> <span class="ty">void</span> <span class="fn">Log</span>(<span class="ty">string</span> msg) => Console.<span class="fn">WriteLine</span>(<span class="str">$"[LOG] {msg}"</span>);

<span class="cm">// [JsonPropertyName] — per JSON:</span>
[System.Text.Json.Serialization.JsonPropertyName(<span class="str">"nome_prodotto"</span>)]
<span class="kw">public</span> <span class="ty">string</span> Nome { <span class="kw">get</span>; <span class="kw">set</span>; }</pre>
        </div>
      </div>
      <!-- 15. IDisposable & using -->
      <div class="topic-card">
        <div class="topic-header" onclick="toggle(this.closest('.topic-card'))"><div><h3>15. IDisposable &amp; using</h3><div class="topic-sub">Gestione risorse non gestite, pattern Dispose, using sintattico</div></div><span class="arrow">▼</span></div>
        <div class="topic-body">
          <div class="info">Implementa <b>IDisposable</b> per rilasciare risorse non gestite (file, connessioni DB, socket). Il blocco <code>using</code> chiama <code>Dispose()</code> automaticamente anche in caso di eccezione.</div>
          <pre><span class="cm">// Implementare IDisposable:</span>
<span class="kw">class</span> <span class="ty">RisorsaPersonalizzata</span> : IDisposable {
  <span class="kw">private bool</span> _disposed = <span class="kw">false</span>;
  <span class="kw">private</span> IntPtr _handle; <span class="cm">// risorsa non gestita</span>

  <span class="kw">public void</span> <span class="fn">Dispose</span>() {
    <span class="fn">Dispose</span>(<span class="kw">true</span>);
    GC.<span class="fn">SuppressFinalize</span>(<span class="kw">this</span>);
  }
  <span class="kw">protected virtual void</span> <span class="fn">Dispose</span>(<span class="kw">bool</span> disposing) {
    <span class="kw">if</span> (!_disposed) {
      <span class="kw">if</span> (disposing) { <span class="cm">/* libera risorse gestite */</span> }
      <span class="cm">// libera risorse non gestite qui</span>
      _disposed = <span class="kw">true</span>;
    }
  }
  ~<span class="ty">RisorsaPersonalizzata</span>() { <span class="fn">Dispose</span>(<span class="kw">false</span>); }
}

<span class="cm">// using — Dispose() chiamato automaticamente:</span>
<span class="kw">using</span> (<span class="kw">var</span> r = <span class="kw">new</span> <span class="ty">RisorsaPersonalizzata</span>()) {
  <span class="cm">// usa r</span>
} <span class="cm">// r.Dispose() chiamato qui, anche se c'è eccezione</span>

<span class="cm">// Sintassi moderna (C# 8+):</span>
<span class="kw">using var</span> r = <span class="kw">new</span> <span class="ty">RisorsaPersonalizzata</span>();
<span class="cm">// Dispose() chiamato alla fine dello scope</span>

<span class="cm">// Più risorse:</span>
<span class="kw">using var</span> sr = <span class="kw">new</span> <span class="ty">StreamReader</span>(<span class="str">"file.txt"</span>);
<span class="kw">using var</span> sw = <span class="kw">new</span> <span class="ty">StreamWriter</span>(<span class="str">"out.txt"</span>);</pre>
          <div class="warn">Regola: se una classe gestisce FileStream, SqlConnection, HttpClient o qualsiasi risorsa non gestita, implementa sempre IDisposable!</div>
        </div>
      </div>
      <!-- 16. IEnumerable & yield -->
      <div class="topic-card">
        <div class="topic-header" onclick="toggle(this.closest('.topic-card'))"><div><h3>16. IEnumerable&lt;T&gt; &amp; yield</h3><div class="topic-sub">Iteratori personalizzati, lazy evaluation, yield return, yield break</div></div><span class="arrow">▼</span></div>
        <div class="topic-body">
          <div class="info"><code>IEnumerable&lt;T&gt;</code> è l'interfaccia alla base di foreach e LINQ. <code>yield return</code> permette di creare sequenze pigre senza costruire un'intera lista in memoria.</div>
          <pre><span class="cm">// IEnumerable&lt;T&gt; — base di foreach e LINQ:</span>
<span class="kw">IEnumerable</span>&lt;<span class="ty">int</span>&gt; numeri = <span class="kw">new</span> <span class="ty">List</span>&lt;<span class="ty">int</span>&gt; { <span class="num">1</span>, <span class="num">2</span>, <span class="num">3</span> };
<span class="kw">foreach</span> (<span class="kw">int</span> n <span class="kw">in</span> numeri) Console.<span class="fn">WriteLine</span>(n);

<span class="cm">// Iteratore con yield return (lazy — genera 1 per volta):</span>
<span class="kw">static</span> <span class="ty">IEnumerable</span>&lt;<span class="ty">int</span>&gt; <span class="fn">Pari</span>(<span class="kw">int</span> max) {
  <span class="kw">for</span> (<span class="kw">int</span> i = <span class="num">0</span>; i &lt;= max; i += <span class="num">2</span>)
    <span class="kw">yield return</span> i; <span class="cm">// produce un valore e si ferma</span>
}
<span class="kw">foreach</span> (<span class="kw">int</span> p <span class="kw">in</span> <span class="fn">Pari</span>(<span class="num">10</span>)) Console.<span class="fn">Write</span>(p + <span class="str">" "</span>); <span class="cm">// 0 2 4 6 8 10</span>

<span class="cm">// yield break — ferma l'iteratore:</span>
<span class="kw">static</span> <span class="ty">IEnumerable</span>&lt;<span class="ty">int</span>&gt; <span class="fn">Finoa</span>(<span class="kw">int</span>[] arr, <span class="kw">int</span> stop) {
  <span class="kw">foreach</span> (<span class="kw">var</span> n <span class="kw">in</span> arr) {
    <span class="kw">if</span> (n == stop) <span class="kw">yield break</span>;
    <span class="kw">yield return</span> n;
  }
}

<span class="cm">// Classe iterabile personalizzata:</span>
<span class="kw">class</span> <span class="ty">Intervallo</span> : IEnumerable&lt;<span class="ty">int</span>&gt; {
  <span class="kw">int</span> _da, _a;
  <span class="kw">public</span> <span class="ty">Intervallo</span>(<span class="kw">int</span> da, <span class="kw">int</span> a) { _da = da; _a = a; }
  <span class="kw">public</span> <span class="ty">IEnumerator</span>&lt;<span class="ty">int</span>&gt; <span class="fn">GetEnumerator</span>() {
    <span class="kw">for</span> (<span class="kw">int</span> i = _da; i &lt;= _a; i++) <span class="kw">yield return</span> i;
  }
  System.Collections.<span class="ty">IEnumerator</span> System.Collections.IEnumerable.<span class="fn">GetEnumerator</span>() =&gt; <span class="fn">GetEnumerator</span>();
}
<span class="kw">foreach</span> (<span class="kw">var</span> n <span class="kw">in</span> <span class="kw">new</span> <span class="ty">Intervallo</span>(<span class="num">1</span>, <span class="num">5</span>)) Console.<span class="fn">Write</span>(n + <span class="str">" "</span>); <span class="cm">// 1 2 3 4 5</span></pre>
        </div>
      </div>
      <!-- 17. Extension Methods -->
      <div class="topic-card">
        <div class="topic-header" onclick="toggle(this.closest('.topic-card'))"><div><h3>17. Extension Methods</h3><div class="topic-sub">Metodi estensione, this keyword, static class</div></div><span class="arrow">▼</span></div>
        <div class="topic-body">
          <div class="info">I metodi estensione permettono di aggiungere metodi a qualsiasi tipo — anche sealed o di libreria — senza ereditarietà. Devono stare in una classe <code>static</code> e il primo parametro usa <code>this</code>.</div>
          <pre><span class="cm">// Classe statica con metodi estensione:</span>
<span class="kw">static class</span> <span class="ty">StringExtensions</span> {
  <span class="cm">// 'this string s' = si applica a string</span>
  <span class="kw">public static string</span> <span class="fn">Capitalizza</span>(<span class="kw">this string</span> s) {
    <span class="kw">if</span> (<span class="ty">string</span>.<span class="fn">IsNullOrEmpty</span>(s)) <span class="kw">return</span> s;
    <span class="kw">return</span> <span class="ty">char</span>.<span class="fn">ToUpper</span>(s[<span class="num">0</span>]) + s[<span class="num">1</span>..].ToLower();
  }
  <span class="kw">public static bool</span> <span class="fn">EEmail</span>(<span class="kw">this string</span> s) =&gt;
    s.<span class="fn">Contains</span>(<span class="str">"@"</span>) &amp;&amp; s.<span class="fn">Contains</span>(<span class="str">"."</span>);
  <span class="kw">public static</span> <span class="ty">string</span> <span class="fn">Ripeti</span>(<span class="kw">this string</span> s, <span class="kw">int</span> n) =&gt;
    <span class="ty">string</span>.<span class="fn">Concat</span>(Enumerable.<span class="fn">Repeat</span>(s, n));
}

<span class="cm">// Uso — come se fossero metodi nativi:</span>
<span class="kw">string</span> nome = <span class="str">"mario"</span>;
Console.<span class="fn">WriteLine</span>(nome.<span class="fn">Capitalizza</span>());  <span class="cm">// "Mario"</span>
Console.<span class="fn">WriteLine</span>(<span class="str">"<a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="f286978186b2979f939b9edc919d9f">[email&#160;protected]</a>"</span>.<span class="fn">EEmail</span>()); <span class="cm">// true</span>
Console.<span class="fn">WriteLine</span>(<span class="str">"ab"</span>.<span class="fn">Ripeti</span>(<span class="num">3</span>));          <span class="cm">// "ababab"</span>

<span class="cm">// Estensione su List&lt;T&gt;:</span>
<span class="kw">static class</span> <span class="ty">ListExtensions</span> {
  <span class="kw">public static void</span> <span class="fn">StampaTutti</span>&lt;T&gt;(<span class="kw">this</span> <span class="ty">List</span>&lt;T&gt; lista) {
    lista.<span class="fn">ForEach</span>(item =&gt; Console.<span class="fn">WriteLine</span>(item));
  }
  <span class="kw">public static</span> T <span class="fn">CasualeItem</span>&lt;T&gt;(<span class="kw">this</span> <span class="ty">List</span>&lt;T&gt; lista) =&gt;
    lista[<span class="kw">new</span> <span class="ty">Random</span>().<span class="fn">Next</span>(lista.<span class="fn">Count</span>)];
}
<span class="kw">var</span> nomi = <span class="kw">new</span> <span class="ty">List</span>&lt;<span class="ty">string</span>&gt; { <span class="str">"Marco"</span>, <span class="str">"Giulia"</span>, <span class="str">"Luca"</span> };
nomi.<span class="fn">StampaTutti</span>();
Console.<span class="fn">WriteLine</span>(nomi.<span class="fn">CasualeItem</span>());

<span class="cm">// LINQ è interamente costruito su extension methods!</span></pre>
        </div>
      </div>
      <!-- 18. Thread, Task & Parallel -->
      <div class="topic-card">
        <div class="topic-header" onclick="toggle(this.closest('.topic-card'))"><div><h3>18. Thread, Task &amp; Parallelismo</h3><div class="topic-sub">Task.Run, lock, CancellationToken, Parallel, Interlocked</div></div><span class="arrow">▼</span></div>
        <div class="topic-body">
          <div class="info">Per operazioni CPU-intensive usa <code>Task.Run</code>. Per evitare race conditions su dati condivisi usa <code>lock</code>. <code>CancellationToken</code> permette di annullare operazioni in modo cooperativo.</div>
          <pre><span class="cm">// Task.Run — esegui su thread pool:</span>
<span class="ty">Task</span> t = <span class="ty">Task</span>.<span class="fn">Run</span>(() =&gt; Console.<span class="fn">WriteLine</span>(<span class="str">"Su altro thread!"</span>));
t.<span class="fn">Wait</span>(); <span class="cm">// aspetta il completamento</span>

<span class="kw">int</span> risultato = <span class="kw">await</span> <span class="ty">Task</span>.<span class="fn">Run</span>(() =&gt; {
  <span class="kw">int</span> s = <span class="num">0</span>;
  <span class="kw">for</span> (<span class="kw">int</span> i = <span class="num">0</span>; i &lt; <span class="num">1000000</span>; i++) s += i;
  <span class="kw">return</span> s;
});

<span class="cm">// lock — evita race conditions:</span>
<span class="kw">private readonly object</span> _lock = <span class="kw">new</span> <span class="kw">object</span>();
<span class="kw">private int</span> _contatore = <span class="num">0</span>;
<span class="kw">void</span> <span class="fn">Incrementa</span>() {
  <span class="kw">lock</span> (_lock) { _contatore++; } <span class="cm">// solo 1 thread alla volta</span>
}

<span class="cm">// CancellationToken — annullamento cooperativo:</span>
<span class="kw">var</span> cts = <span class="kw">new</span> <span class="ty">CancellationTokenSource</span>();
cts.<span class="fn">CancelAfter</span>(<span class="num">3000</span>); <span class="cm">// annulla dopo 3 secondi</span>
<span class="kw">try</span> {
  <span class="kw">await</span> <span class="ty">Task</span>.<span class="fn">Run</span>(<span class="kw">async</span> () =&gt; {
    <span class="kw">while</span> (<span class="kw">true</span>) {
      cts.Token.<span class="fn">ThrowIfCancellationRequested</span>();
      <span class="kw">await</span> <span class="ty">Task</span>.<span class="fn">Delay</span>(<span class="num">500</span>, cts.Token);
      Console.<span class="fn">WriteLine</span>(<span class="str">"Lavoro..."</span>);
    }
  }, cts.Token);
}
<span class="kw">catch</span> (<span class="ty">OperationCanceledException</span>) { Console.<span class="fn">WriteLine</span>(<span class="str">"Annullato!"</span>); }

<span class="cm">// Parallel.For — CPU-bound parallelismo:</span>
<span class="ty">Parallel</span>.<span class="fn">For</span>(<span class="num">0</span>, <span class="num">10</span>, i =&gt; Console.<span class="fn">WriteLine</span>($<span class="str">"Item {i}"</span>));
<span class="ty">Parallel</span>.<span class="fn">ForEach</span>(nomi, nome =&gt; Console.<span class="fn">WriteLine</span>(nome));

<span class="cm">// Thread diretto (raramente necessario):</span>
<span class="kw">var</span> thread = <span class="kw">new</span> <span class="ty">Thread</span>(() =&gt; Console.<span class="fn">WriteLine</span>(<span class="str">"Thread!"</span>));
thread.IsBackground = <span class="kw">true</span>;
thread.<span class="fn">Start</span>();
thread.<span class="fn">Join</span>(); <span class="cm">// aspetta</span></pre>
          <div class="warn">Preferisci sempre async/await e Task.Run al threading diretto. Usa lock solo quando necessario — preferisci ConcurrentDictionary e Interlocked per dati condivisi semplici.</div>
        </div>
      </div>
      <!-- 19. Collezioni Avanzate -->
      <div class="topic-card">
        <div class="topic-header" onclick="toggle(this.closest('.topic-card'))"><div><h3>19. Collezioni Avanzate</h3><div class="topic-sub">SortedDictionary, ConcurrentDictionary, LinkedList, SortedSet</div></div><span class="arrow">▼</span></div>
        <div class="topic-body">
          <pre><span class="cm">// SortedDictionary — chiavi sempre ordinate:</span>
<span class="kw">var</span> sd = <span class="kw">new</span> <span class="ty">SortedDictionary</span>&lt;<span class="ty">string</span>, <span class="ty">int</span>&gt;();
sd[<span class="str">"banana"</span>] = <span class="num">2</span>; sd[<span class="str">"arancia"</span>] = <span class="num">5</span>; sd[<span class="str">"ciliegia"</span>] = <span class="num">1</span>;
<span class="kw">foreach</span> (<span class="kw">var</span> kv <span class="kw">in</span> sd) Console.<span class="fn">WriteLine</span>(kv.Key); <span class="cm">// arancia, banana, ciliegia</span>

<span class="cm">// SortedSet — elementi unici e ordinati:</span>
<span class="kw">var</span> ss = <span class="kw">new</span> <span class="ty">SortedSet</span>&lt;<span class="ty">int</span>&gt; { <span class="num">5</span>, <span class="num">1</span>, <span class="num">3</span>, <span class="num">1</span>, <span class="num">2</span> };
<span class="cm">// ss = { 1, 2, 3, 5 } — no duplicati, sempre ordinato</span>
ss.<span class="fn">Min</span>; ss.<span class="fn">Max</span>; <span class="cm">// 1, 5</span>

<span class="cm">// ConcurrentDictionary — thread-safe:</span>
<span class="kw">var</span> cd = <span class="kw">new</span> <span class="ty">ConcurrentDictionary</span>&lt;<span class="ty">string</span>, <span class="ty">int</span>&gt;();
cd.<span class="fn">TryAdd</span>(<span class="str">"Marco"</span>, <span class="num">25</span>);
cd.<span class="fn">AddOrUpdate</span>(<span class="str">"Marco"</span>, <span class="num">1</span>, (key, old) =&gt; old + <span class="num">1</span>); <span class="cm">// incrementa</span>
cd.<span class="fn">GetOrAdd</span>(<span class="str">"Giulia"</span>, <span class="num">30</span>); <span class="cm">// aggiunge solo se manca</span>
cd.<span class="fn">TryRemove</span>(<span class="str">"Marco"</span>, <span class="kw">out int</span> val);

<span class="cm">// LinkedList — inserimento O(1) ovunque:</span>
<span class="kw">var</span> ll = <span class="kw">new</span> <span class="ty">LinkedList</span>&lt;<span class="ty">string</span>&gt;();
ll.<span class="fn">AddLast</span>(<span class="str">"B"</span>); ll.<span class="fn">AddFirst</span>(<span class="str">"A"</span>); ll.<span class="fn">AddLast</span>(<span class="str">"C"</span>);
<span class="ty">LinkedListNode</span>&lt;<span class="ty">string</span>&gt; nodo = ll.<span class="fn">Find</span>(<span class="str">"B"</span>);
ll.<span class="fn">AddAfter</span>(nodo, <span class="str">"B2"</span>);
ll.<span class="fn">Remove</span>(nodo);

<span class="cm">// Interlocked — operazioni atomiche senza lock:</span>
<span class="kw">private int</span> _count = <span class="num">0</span>;
<span class="ty">Interlocked</span>.<span class="fn">Increment</span>(<span class="kw">ref</span> _count);  <span class="cm">// thread-safe ++</span>
<span class="ty">Interlocked</span>.<span class="fn">Decrement</span>(<span class="kw">ref</span> _count);  <span class="cm">// thread-safe --</span>
<span class="ty">Interlocked</span>.<span class="fn">Add</span>(<span class="kw">ref</span> _count, <span class="num">5</span>);      <span class="cm">// thread-safe += 5</span></pre>
          <div class="table-wrap"><table><tr><th>Collezione</th><th>Ordinata</th><th>Thread-safe</th><th>Uso principale</th></tr>
          <tr><td>Dictionary</td><td>No</td><td>No</td><td>Ricerca veloce</td></tr>
          <tr><td>SortedDictionary</td><td>Sì (chiave)</td><td>No</td><td>Dati ordinati</td></tr>
          <tr><td>ConcurrentDictionary</td><td>No</td><td>Sì</td><td>Multi-threading</td></tr>
          <tr><td>LinkedList</td><td>No</td><td>No</td><td>Inserimenti frequenti</td></tr>
          <tr><td>SortedSet</td><td>Sì</td><td>No</td><td>Elementi unici ordinati</td></tr></table></div>
        </div>
      </div>
      <!-- 20. Interfacce Fondamentali -->
      <div class="topic-card">
        <div class="topic-header" onclick="toggle(this.closest('.topic-card'))"><div><h3>20. Interfacce Fondamentali</h3><div class="topic-sub">IComparable&lt;T&gt;, IEquatable&lt;T&gt;, IComparer&lt;T&gt;, ICloneable</div></div><span class="arrow">▼</span></div>
        <div class="topic-body">
          <pre><span class="cm">// IComparable&lt;T&gt; — permette ordinamento naturale:</span>
<span class="kw">class</span> <span class="ty">Studente</span> : IComparable&lt;<span class="ty">Studente</span>&gt; {
  <span class="kw">public string</span> Nome { <span class="kw">get</span>; <span class="kw">set</span>; }
  <span class="kw">public int</span> Voto { <span class="kw">get</span>; <span class="kw">set</span>; }
  <span class="kw">public int</span> <span class="fn">CompareTo</span>(<span class="ty">Studente</span>? other) {
    <span class="kw">if</span> (other == <span class="kw">null</span>) <span class="kw">return</span> <span class="num">1</span>;
    <span class="kw">return</span> Voto.<span class="fn">CompareTo</span>(other.Voto); <span class="cm">// ordine per voto</span>
  }
}
<span class="kw">var</span> studenti = <span class="kw">new</span> <span class="ty">List</span>&lt;<span class="ty">Studente</span>&gt; { ... };
studenti.<span class="fn">Sort</span>(); <span class="cm">// usa CompareTo automaticamente</span>

<span class="cm">// IEquatable&lt;T&gt; — uguaglianza personalizzata:</span>
<span class="kw">class</span> <span class="ty">Punto</span> : IEquatable&lt;<span class="ty">Punto</span>&gt; {
  <span class="kw">public int</span> X, Y;
  <span class="kw">public bool</span> <span class="fn">Equals</span>(<span class="ty">Punto</span>? other) =&gt;
    other != <span class="kw">null</span> &amp;&amp; X == other.X &amp;&amp; Y == other.Y;
  <span class="kw">public override bool</span> <span class="fn">Equals</span>(<span class="kw">object</span>? obj) =&gt;
    obj <span class="kw">is</span> <span class="ty">Punto</span> p &amp;&amp; <span class="fn">Equals</span>(p);
  <span class="kw">public override int</span> <span class="fn">GetHashCode</span>() =&gt; HashCode.<span class="fn">Combine</span>(X, Y);
}
<span class="kw">var</span> p1 = <span class="kw">new</span> <span class="ty">Punto</span> { X=<span class="num">1</span>, Y=<span class="num">2</span> };
<span class="kw">var</span> p2 = <span class="kw">new</span> <span class="ty">Punto</span> { X=<span class="num">1</span>, Y=<span class="num">2</span> };
Console.<span class="fn">WriteLine</span>(p1.<span class="fn">Equals</span>(p2)); <span class="cm">// true!</span>

<span class="cm">// IComparer&lt;T&gt; — ordinamento alternativo:</span>
<span class="kw">class</span> <span class="ty">OrdinaNome</span> : IComparer&lt;<span class="ty">Studente</span>&gt; {
  <span class="kw">public int</span> <span class="fn">Compare</span>(<span class="ty">Studente</span>? a, <span class="ty">Studente</span>? b) =&gt;
    <span class="ty">string</span>.<span class="fn">Compare</span>(a?.Nome, b?.Nome, <span class="ty">StringComparison</span>.OrdinalIgnoreCase);
}
studenti.<span class="fn">Sort</span>(<span class="kw">new</span> <span class="ty">OrdinaNome</span>()); <span class="cm">// ordina per nome</span>

<span class="cm">// Confronto con lambda (più pratico):</span>
studenti.<span class="fn">Sort</span>((a, b) =&gt; a.Nome.<span class="fn">CompareTo</span>(b.Nome));
<span class="kw">var</span> ordinati = studenti.<span class="fn">OrderBy</span>(s =&gt; s.Voto).<span class="fn">ThenBy</span>(s =&gt; s.Nome);</pre>
        </div>
      </div>
      <!-- 21. Operator Overloading -->
      <div class="topic-card">
        <div class="topic-header" onclick="toggle(this.closest('.topic-card'))"><div><h3>21. Operator Overloading</h3><div class="topic-sub">Sovraccaricare +, -, ==, !=, >, &lt;, conversioni implicite/esplicite</div></div><span class="arrow">▼</span></div>
        <div class="topic-body">
          <div class="info">In C# puoi ridefinire il comportamento degli operatori per le tue classi/struct. Gli operatori di uguaglianza (==, !=) vanno sempre in coppia, così come (&lt;, &gt;) e (&lt;=, &gt;=).</div>
          <pre><span class="kw">struct</span> <span class="ty">Vettore2D</span> {
  <span class="kw">public double</span> X, Y;
  <span class="kw">public</span> <span class="ty">Vettore2D</span>(<span class="kw">double</span> x, <span class="kw">double</span> y) { X = x; Y = y; }

  <span class="cm">// Operatori aritmetici:</span>
  <span class="kw">public static</span> <span class="ty">Vettore2D</span> <span class="kw">operator</span> +(<span class="ty">Vettore2D</span> a, <span class="ty">Vettore2D</span> b) =&gt;
    <span class="kw">new</span>(a.X + b.X, a.Y + b.Y);
  <span class="kw">public static</span> <span class="ty">Vettore2D</span> <span class="kw">operator</span> -(<span class="ty">Vettore2D</span> a, <span class="ty">Vettore2D</span> b) =&gt;
    <span class="kw">new</span>(a.X - b.X, a.Y - b.Y);
  <span class="kw">public static</span> <span class="ty">Vettore2D</span> <span class="kw">operator</span> *(<span class="ty">Vettore2D</span> v, <span class="kw">double</span> s) =&gt;
    <span class="kw">new</span>(v.X * s, v.Y * s);

  <span class="cm">// Uguaglianza (sempre in coppia!):</span>
  <span class="kw">public static bool</span> <span class="kw">operator</span> ==(<span class="ty">Vettore2D</span> a, <span class="ty">Vettore2D</span> b) =&gt;
    a.X == b.X &amp;&amp; a.Y == b.Y;
  <span class="kw">public static bool</span> <span class="kw">operator</span> !=(<span class="ty">Vettore2D</span> a, <span class="ty">Vettore2D</span> b) =&gt; !(a == b);

  <span class="cm">// Confronto (sempre in coppia!):</span>
  <span class="kw">public static bool</span> <span class="kw">operator</span> &gt;(<span class="ty">Vettore2D</span> a, <span class="ty">Vettore2D</span> b) =&gt;
    a.<span class="fn">Lunghezza</span>() &gt; b.<span class="fn">Lunghezza</span>();
  <span class="kw">public static bool</span> <span class="kw">operator</span> &lt;(<span class="ty">Vettore2D</span> a, <span class="ty">Vettore2D</span> b) =&gt; b &gt; a;

  <span class="kw">public double</span> <span class="fn">Lunghezza</span>() =&gt; Math.<span class="fn">Sqrt</span>(X*X + Y*Y);
  <span class="kw">public override string</span> <span class="fn">ToString</span>() =&gt; $<span class="str">"({X}, {Y})"</span>;

  <span class="cm">// Conversioni implicite/esplicite:</span>
  <span class="kw">public static implicit operator</span> <span class="ty">Vettore2D</span>((<span class="kw">double</span>,<span class="kw">double</span>) t) =&gt;
    <span class="kw">new</span>(t.Item1, t.Item2);
  <span class="kw">public static explicit operator</span> <span class="ty">string</span>(<span class="ty">Vettore2D</span> v) =&gt; v.<span class="fn">ToString</span>();
}

<span class="ty">Vettore2D</span> v1 = <span class="kw">new</span>(<span class="num">3</span>, <span class="num">4</span>);
<span class="ty">Vettore2D</span> v2 = <span class="kw">new</span>(<span class="num">1</span>, <span class="num">2</span>);
<span class="ty">Vettore2D</span> v3 = v1 + v2;          <span class="cm">// (4, 6)</span>
<span class="kw">bool</span> uguale = v1 == v2;           <span class="cm">// false</span>
<span class="ty">Vettore2D</span> v4 = (<span class="num">5.0</span>, <span class="num">6.0</span>);      <span class="cm">// conversione implicita da tuple</span>
Console.<span class="fn">WriteLine</span>(v3);            <span class="cm">// (4, 6)</span></pre>
        </div>
      </div>
      <!-- 22. Indexers & Proprietà Avanzate -->
      <div class="topic-card">
        <div class="topic-header" onclick="toggle(this.closest('.topic-card'))"><div><h3>22. Indexers &amp; Proprietà Avanzate</h3><div class="topic-sub">Indicizzatori, init-only, required, backing field</div></div><span class="arrow">▼</span></div>
        <div class="topic-body">
          <pre><span class="cm">// Indexer — accesso con [] sulla tua classe:</span>
<span class="kw">class</span> <span class="ty">Rubrica</span> {
  <span class="kw">private</span> <span class="ty">Dictionary</span>&lt;<span class="ty">string</span>, <span class="ty">string</span>&gt; _dati = <span class="kw">new</span>();

  <span class="cm">// Indexer con chiave string:</span>
  <span class="kw">public string this</span>[<span class="ty">string</span> nome] {
    <span class="kw">get</span> =&gt; _dati.<span class="fn">GetValueOrDefault</span>(nome, <span class="str">"N/A"</span>);
    <span class="kw">set</span> =&gt; _dati[nome] = value;
  }
  <span class="cm">// Indexer con indice int:</span>
  <span class="kw">public string this</span>[<span class="kw">int</span> i] =&gt; _dati.<span class="fn">ElementAt</span>(i).Value;
}
<span class="ty">Rubrica</span> r = <span class="kw">new</span>();
r[<span class="str">"Marco"</span>] = <span class="str">"123-456"</span>; <span class="cm">// set</span>
Console.<span class="fn">WriteLine</span>(r[<span class="str">"Marco"</span>]); <span class="cm">// get → "123-456"</span>

<span class="cm">// init-only property (C# 9+) — si imposta solo in inizializzazione:</span>
<span class="kw">class</span> <span class="ty">Persona</span> {
  <span class="kw">public string</span> Nome { <span class="kw">get</span>; <span class="kw">init</span>; } <span class="cm">// solo con new + {}</span>
  <span class="kw">public int</span> Eta { <span class="kw">get</span>; <span class="kw">init</span>; }
}
<span class="ty">Persona</span> p = <span class="kw">new</span>() { Nome = <span class="str">"Marco"</span>, Eta = <span class="num">25</span> };
<span class="cm">// p.Nome = "Giulia"; // ERRORE — non modificabile dopo init</span>

<span class="cm">// required property (C# 11+) — obbligatoria in inizializzazione:</span>
<span class="kw">class</span> <span class="ty">Prodotto</span> {
  <span class="kw">public required string</span> Nome { <span class="kw">get</span>; <span class="kw">set</span>; }
  <span class="kw">public required double</span> Prezzo { <span class="kw">get</span>; <span class="kw">set</span>; }
}
<span class="cm">// new Prodotto() — ERRORE: Nome e Prezzo sono required</span>
<span class="ty">Prodotto</span> prod = <span class="kw">new</span>() { Nome = <span class="str">"Pizza"</span>, Prezzo = <span class="num">8.50</span> }; <span class="cm">// OK</span>

<span class="cm">// Proprietà calcolate e backing field avanzate:</span>
<span class="kw">class</span> <span class="ty">Cerchio</span> {
  <span class="kw">private double</span> _raggio;
  <span class="kw">public double</span> Raggio {
    <span class="kw">get</span> =&gt; _raggio;
    <span class="kw">set</span> =&gt; _raggio = value &lt; <span class="num">0</span> ? <span class="kw">throw new</span> <span class="ty">ArgumentException</span>(<span class="str">"Negativo!"</span>) : value;
  }
  <span class="kw">public double</span> Area =&gt; Math.PI * _raggio * _raggio;           <span class="cm">// calcolata</span>
  <span class="kw">public double</span> Circonferenza =&gt; <span class="num">2</span> * Math.PI * _raggio;       <span class="cm">// calcolata</span>
  <span class="kw">public double</span> Diametro { <span class="kw">get</span> =&gt; _raggio * <span class="num">2</span>; <span class="kw">set</span> =&gt; _raggio = value / <span class="num">2</span>; }
}</pre>
        </div>
      </div>
      <!-- 23. Namespaces & using -->
      <div class="topic-card">
        <div class="topic-header" onclick="toggle(this.closest('.topic-card'))"><div><h3>23. Namespaces &amp; using Direttive</h3><div class="topic-sub">namespace, using, global using, alias, file-scoped</div></div><span class="arrow">▼</span></div>
        <div class="topic-body">
          <pre><span class="cm">// Definire un namespace:</span>
<span class="kw">namespace</span> MiaApp.Modelli {
  <span class="kw">class</span> <span class="ty">Utente</span> { <span class="kw">public string</span> Nome { <span class="kw">get</span>; <span class="kw">set</span>; } }
}
<span class="kw">namespace</span> MiaApp.Servizi {
  <span class="kw">class</span> <span class="ty">UtenteService</span> {
    <span class="cm">// Accesso con nome completo:</span>
    MiaApp.Modelli.<span class="ty">Utente</span> u = <span class="kw">new</span>();
  }
}

<span class="cm">// using — importa namespace:</span>
<span class="kw">using</span> System.Collections.Generic;
<span class="kw">using</span> System.Linq;
<span class="kw">using</span> MiaApp.Modelli;

<span class="cm">// Alias — rinomina per conflitti:</span>
<span class="kw">using</span> Win = System.Windows;
<span class="kw">using</span> Web = System.Web;
Win.<span class="ty">Point</span> p1 = <span class="kw">new</span>();
Web.<span class="ty">HttpContext</span> ctx = ...;

<span class="cm">// using static — importa membri statici direttamente:</span>
<span class="kw">using static</span> System.Math;
<span class="kw">using static</span> System.Console;
<span class="fn">WriteLine</span>(<span class="fn">Sqrt</span>(<span class="num">16</span>)); <span class="cm">// senza Math. e Console.</span>

<span class="cm">// global using (C# 10+) — vale per tutto il progetto:</span>
<span class="cm">// In GlobalUsings.cs:</span>
<span class="kw">global using</span> System;
<span class="kw">global using</span> System.Collections.Generic;
<span class="kw">global using</span> System.Linq;
<span class="cm">// Ora disponibili in tutti i file senza dichiarare!</span>

<span class="cm">// File-scoped namespace (C# 10+) — meno indentazione:</span>
<span class="kw">namespace</span> MiaApp.Modelli; <span class="cm">// nessuna { }</span>
<span class="kw">class</span> <span class="ty">Prodotto</span> { } <span class="cm">// automaticamente in MiaApp.Modelli</span>
<span class="kw">class</span> <span class="ty">Ordine</span> { }   <span class="cm">// stesso namespace</span>

<span class="cm">// namespace annidati — equivalenti:</span>
<span class="kw">namespace</span> A { <span class="kw">namespace</span> B { <span class="kw">class</span> <span class="ty">C</span> {} } }
<span class="kw">namespace</span> A.B { <span class="kw">class</span> <span class="ty">C</span> {} } <span class="cm">// identico</span></pre>
          <div class="warn">Best practice: usa file-scoped namespace (C# 10+) e global using per ridurre il boilerplate. Ogni file dovrebbe avere un solo namespace e una sola classe principale.</div>
        </div>
      </div>
    </div>
  </main>
</div>

<script data-cfasync="false" src="/cdn-cgi/scripts/5c5dd728/cloudflare-static/email-decode.min.js"></script><script>
const MODS = ['fundamentals','intermediate','advanced'];

let currentMod = 'fundamentals';
let currentCard = -1;

function showMod(modId, btn) {
  currentMod = modId;
  document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
  document.getElementById('section-' + modId).classList.add('active');
  if (btn) {
    document.querySelectorAll('.nav-btn').forEach(b => b.classList.remove('active'));
    btn.classList.add('active');
  }
  document.querySelectorAll('.tree-mod').forEach(m => {
    if (m.dataset.mod === modId) {
      m.classList.add('open');
    } else {
      m.classList.remove('open');
    }
  });
  markTreeItem(-1);
}

function showTopic(modId, idx) {
  if (modId !== currentMod) {
    const btn = document.querySelector(`.nav-btn[data-mod="${modId}"]`);
    showMod(modId, btn);
  }
  currentCard = idx;
  const cards = document.querySelectorAll(`#section-${modId} .topic-card`);
  cards.forEach((c, i) => {
    if (i === idx) c.classList.add('open');
    else c.classList.remove('open');
  });
  if (cards[idx]) {
    setTimeout(() => cards[idx].scrollIntoView({behavior:'smooth', block:'start'}), 60);
  }
  markTreeItem(idx);
  closeResults();
}

function markTreeItem(idx) {
  document.querySelectorAll('.tree-item').forEach(el => el.classList.remove('active'));
  if (idx < 0) return;
  const grp = document.querySelector(`.tree-mod[data-mod="${currentMod}"]`);
  if (grp) {
    const children = grp.nextElementSibling?.querySelectorAll('.tree-item');
    if (children && children[idx]) children[idx].classList.add('active');
  }
}

function treeToggle(el) {
  const modId = el.dataset.mod;
  const isOpen = el.classList.contains('open');
  if (!isOpen) {
    const btn = document.querySelector(`.nav-btn[data-mod="${modId}"]`);
    showMod(modId, btn);
  } else {
    el.classList.remove('open');
  }
}

function toggle(card) { card.classList.toggle('open'); }

(function() {
  const firstMod = document.querySelector('.tree-mod[data-mod="fundamentals"]');
  if (firstMod) firstMod.classList.add('open');
  document.getElementById('section-fundamentals').classList.add('active');
})();

// Search (aggiornato con i nuovi moduli)
const MODULE_LABELS = {
  fundamentals:'I — Fondamenti',
  intermediate:'II — Intermedio',
  advanced:'III — Avanzato'
};
let _index = null;
function getIndex() {
  if (_index) return _index;
  _index = [];
  MODS.forEach(modId => {
    document.querySelectorAll('#section-' + modId + ' .topic-card').forEach((card, idx) => {
      const title = card.querySelector('h3')?.textContent || '';
      const sub   = card.querySelector('.topic-sub')?.textContent || '';
      const body  = card.querySelector('.topic-body')?.textContent || '';
      _index.push({ modId, idx, title, sub,
        text: (title+' '+sub+' '+body).toLowerCase(),
        bodySnippet: body.trim().slice(0,200) });
    });
  });
  return _index;
}
function esc(s) { return s.replace(/[.*+?^${}()|[\]\\]/g,'\\$&'); }
function highlight(s, q) {
  return s.replace(new RegExp('('+esc(q)+')','gi'),'<span class="sr-highlight">$1</span>');
}
function onSearch() {
  const q = document.getElementById('searchInput').value.trim();
  const clearBtn = document.getElementById('searchClear');
  const hint = document.getElementById('searchHint');
  clearBtn.style.display = q ? 'block' : 'none';
  if (hint) hint.style.display = q ? 'none' : '';
  if (!q) { closeResults(); return; }
  openResults();
  const results = getIndex().filter(r => r.text.includes(q.toLowerCase())).slice(0,18);
  const box = document.getElementById('searchResults');
  if (!results.length) {
    box.innerHTML = '<div class="sr-empty">Nessun risultato per "<b>'+q+'</b>"</div>';
    return;
  }
  box.innerHTML = results.map(r => {
    const bl = r.bodySnippet.toLowerCase();
    const pos = bl.indexOf(q.toLowerCase());
    let snippet = pos !== -1
      ? (pos>20?'\u2026':'')+r.bodySnippet.slice(Math.max(0,pos-20), Math.min(r.bodySnippet.length,pos+q.length+50))+'\u2026'
      : r.bodySnippet.slice(0,80)+'\u2026';
    return '<div class="sr-item" onclick="showTopic(\'' + r.modId + '\',' + r.idx + ')">'
      + '<div class="sr-mod">' + MODULE_LABELS[r.modId] + '</div>'
      + '<div class="sr-title">' + highlight(r.title, q) + '</div>'
      + '<div class="sr-sub">' + highlight(snippet, q) + '</div>'
      + '</div>';
  }).join('');
}
function openResults() { if (document.getElementById('searchInput').value.trim()) document.getElementById('searchResults').classList.add('open'); }
function closeResults() { document.getElementById('searchResults').classList.remove('open'); }
function clearSearch() {
  document.getElementById('searchInput').value = '';
  document.getElementById('searchClear').style.display = 'none';
  const hint = document.getElementById('searchHint');
  if (hint) hint.style.display = '';
  closeResults();
}
document.addEventListener('click', e => {
  if (!document.getElementById('searchWrap').contains(e.target)) closeResults();
});
document.addEventListener('keydown', e => {
  const inp = document.getElementById('searchInput');
  if (e.key === '/' && document.activeElement !== inp) {
    e.preventDefault(); inp.focus();
  }
  if (e.key === 'Escape') { clearSearch(); inp.blur(); }
});
</script>
</body>
</html>