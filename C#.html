<!DOCTYPE html>
<html lang="it">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>C# Complete Reference</title>
<link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;600;700&family=Syne:wght@400;700;800&display=swap" rel="stylesheet">
<style>
:root {
  --bg: #0a0a0f; --surface: #12121a; --card: #1a1a26; --border: #2a2a40;
  --accent: #cccccc; --accent2: #aaaaaa; --accent3: #999999;
  --green: #cccccc; --red: #cccccc; --text: #e0e0e0; --muted: #888888; --code-bg: #1a1a1a;
  /* Mapping module colors to the muted theme */
  --m1: #888; --m2: #888; --m3: #888; --m4: #888; --m5: #888; --m6: #888;
}

* { margin: 0; padding: 0; box-sizing: border-box; }
body { background: var(--bg); color: var(--text); font-family: 'Syne', sans-serif; min-height: 100vh; }

/* Header & Nav */
.header {
  padding: 3rem 2rem 2rem; text-align: center; border-bottom: 1px solid var(--border);
  background: var(--surface);
}
.header h1 {
  font-size: clamp(2rem, 5vw, 3.2rem); font-weight: 800; letter-spacing: -1px;
  color: #ffffff;
}
.header h1 span { color: var(--accent); }
.header p { color: var(--muted); margin-top: 0.4rem; font-size: 0.95rem; }

.nav {
  display: flex; gap: 0.5rem; padding: 1rem 2rem; border-bottom: 1px solid var(--border);
  background: var(--surface); position: sticky; top: 0; z-index: 100; align-items: center;
}
.nav-btn {
  padding: 0.45rem 1.1rem; border: 1px solid var(--border); background: transparent;
  color: var(--muted); border-radius: 999px; font-family: 'Syne', sans-serif;
  font-size: 0.82rem; cursor: pointer; white-space: nowrap; transition: all 0.2s;
}
.nav-btn:hover { border-color: #777; color: #ccc; }
.nav-btn.active, .nav-btn.m2.active, .nav-btn.m3.active, 
.nav-btn.m4.active, .nav-btn.m5.active, .nav-btn.m6.active { 
  background: #444; color: #fff; border-color: #555; font-weight: 700; 
}

/* Search */
.search-wrap { position: relative; margin-left: auto; flex-shrink: 0; }
.search-input {
  background: var(--card); border: 1px solid var(--border); color: var(--text);
  font-family: 'JetBrains Mono', monospace; font-size: 0.82rem;
  padding: 0.4rem 2.2rem 0.4rem 0.9rem; border-radius: 999px;
  width: 180px; outline: none; transition: all 0.2s;
}
.search-input:focus { border-color: #777; width: 240px; }
.search-input::placeholder { color: var(--muted); }
.search-clear { position: absolute; right: 0.7rem; top: 50%; transform: translateY(-50%); color: var(--muted); font-size: 1rem; cursor: pointer; display: none; background: none; border: none; }
.search-results {
  position: absolute; top: calc(100% + 8px); right: 0; background: var(--card);
  border: 1px solid var(--border); border-radius: 12px; width: 320px;
  max-height: 420px; overflow-y: auto; z-index: 999; box-shadow: 0 8px 32px rgba(0,0,0,0.5);
  display: none;
}
.search-results.open { display: block; }
.sr-item { padding: 0.8rem 1.1rem; border-bottom: 1px solid var(--border); cursor: pointer; transition: background 0.15s; }
.sr-item:hover { background: #222; }
.sr-mod { font-size: 0.65rem; color: var(--muted); font-family: 'JetBrains Mono', monospace; margin-bottom: 0.2rem; }
.sr-title { font-size: 0.88rem; font-weight: 700; color: var(--text); }
.sr-snippet { font-size: 0.75rem; color: var(--muted); margin-top: 0.2rem; font-family: 'JetBrains Mono', monospace; }

/* Main Content */
.main { max-width: 900px; margin: 0 auto; padding: 2rem; }
.section { display: none; animation: fadeIn 0.3s ease; }
.section.active { display: block; }
@keyframes fadeIn { from { opacity:0; transform:translateY(8px); } to { opacity:1; transform:translateY(0); } }

.section-title { font-size: 1.5rem; font-weight: 800; margin-bottom: 1.5rem; display: flex; align-items: center; gap: 0.75rem; flex-wrap: wrap; }
.tag { font-size: 0.68rem; padding: 0.2rem 0.6rem; border-radius: 999px; font-family: 'JetBrains Mono', monospace; background: #333; color: #aaa; }
/* Override module tags to match the gray style */
.tag-m1, .tag-m2, .tag-m3, .tag-m4, .tag-m5, .tag-m6 { background: #333; color: #aaa; }

.topic-card { background: var(--card); border: 1px solid var(--border); border-radius: 12px; margin-bottom: 1rem; overflow: hidden; transition: border-color 0.2s; }
.topic-card:hover { border-color: rgba(255,255,255,0.15); }
.topic-header { padding: 1rem 1.2rem; cursor: pointer; display: flex; justify-content: space-between; align-items: center; user-select: none; }
.topic-header h3 { font-size: 0.95rem; font-weight: 700; }
.topic-sub { font-size: 0.73rem; color: var(--muted); margin-top: 0.12rem; font-weight: 400; }
.arrow { color: var(--muted); transition: transform 0.3s; font-size: 1rem; }
.topic-card.open .arrow { transform: rotate(180deg); }
.topic-body { display: none; padding: 0 1.2rem 1.2rem; border-top: 1px solid var(--border); }
.topic-card.open .topic-body { display: block; }

/* Code & Syntax */
pre { background: var(--code-bg); border: 1px solid var(--border); border-radius: 8px; padding: 1rem; margin: 0.8rem 0; overflow-x: auto; font-family: 'JetBrains Mono', monospace; font-size: 0.78rem; line-height: 1.65; color: #c9d1d9; }
.kw{color:#ff79c6} .ty{color:#8be9fd} .str{color:#f1fa8c} .cm{color:#6272a4;font-style:italic} .num{color:#bd93f9} .fn{color:#50fa7b} .op{color:#ff79c6}

/* Components */
.note, .warn, .tip { background: #222; border-left: 3px solid #555; padding: 0.65rem 1rem; border-radius: 0 8px 8px 0; margin: 0.8rem 0; font-size: 0.85rem; color: #aaa; }
p { line-height: 1.7; color: #a0a0c0; margin: 0.5rem 0; font-size: 0.9rem; }
h4 { color: #888; font-size: 0.78rem; margin: 1rem 0 0.3rem; text-transform: uppercase; letter-spacing: 1px; }

table { width: 100%; border-collapse: collapse; margin: 0.8rem 0; font-size: 0.82rem; }
th { background: var(--surface); color: #999; padding: 0.55rem 0.8rem; text-align: left; font-size: 0.72rem; text-transform: uppercase; letter-spacing: 1px; }
td { padding: 0.55rem 0.8rem; border-top: 1px solid var(--border); color: #a0a0c0; font-family: 'JetBrains Mono', monospace; font-size: 0.78rem; }

/* Overview Grid */
.hero-stats { display: flex; gap: 1rem; flex-wrap: wrap; margin-bottom: 2rem; }
.stat { background: var(--card); border: 1px solid var(--border); border-radius: 10px; padding: 1rem 1.5rem; text-align: center; flex: 1; min-width: 100px; }
.stat .val { font-size: 1.8rem; font-weight: 800; font-family: 'JetBrains Mono', monospace; }
.stat .lbl { font-size: 0.72rem; color: var(--muted); margin-top: 0.2rem; }

.overview-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(210px, 1fr)); gap: 0.8rem; }
.ov-card { background: var(--card); border: 1px solid var(--border); border-radius: 10px; padding: 1rem; cursor: pointer; transition: all 0.2s; position: relative; overflow: hidden; }
.ov-card::before { content: ''; position: absolute; top: 0; left: 0; right: 0; height: 3px; background: #555; }
.ov-card:hover { border-color: #555; }
.ov-card h3 { font-size: 0.88rem; margin-bottom: 0.2rem; }
.ov-card p { font-size: 0.74rem; color: var(--muted); margin: 0; }
.ov-num { position: absolute; top: 0.8rem; right: 0.8rem; font-family: 'JetBrains Mono', monospace; font-size: 0.65rem; color: var(--border); }

/* Unified module text colors */
.m1-txt, .m2-txt, .m3-txt, .m4-txt, .m5-txt, .m6-txt { color: #e0e0e0; }
</style>
</head>
<body>
<div class="header">
  <h1>C# <span>Complete</span> Reference</h1>
  <p>Modulo I — Basi &nbsp;•&nbsp; Modulo II — OOP &nbsp;•&nbsp; Modulo III — File &nbsp;•&nbsp; Modulo IV — Avanzato &nbsp;•&nbsp; Modulo V — Extra &nbsp;•&nbsp; Modulo VI — Pro</p>
</div>
<nav class="nav">
  <button class="nav-btn active" onclick="show('overview',this)">Overview</button>
  <button class="nav-btn" onclick="show('mod1',this)">I — Basi</button>
  <button class="nav-btn m2" onclick="show('mod2',this)">II — OOP</button>
  <button class="nav-btn m3" onclick="show('mod3',this)">III — File & Dati</button>
  <button class="nav-btn m4" onclick="show('mod4',this)">IV — Avanzato</button>
  <button class="nav-btn m5" onclick="show('mod5',this)">V — Extra</button>
  <button class="nav-btn m6" onclick="show('mod6',this)">VI — Pro</button>
  <div class="search-wrap" id="searchWrap">
    <input class="search-input" id="searchInput" type="text" placeholder="Cerca…" autocomplete="off" oninput="onSearch()" onfocus="openResults()"/>
    <button class="search-clear" id="searchClear" onclick="clearSearch()">×</button>
    <div class="search-results" id="searchResults"></div>
  </div>
</nav>
<div class="main">

<!-- OVERVIEW -->
<div class="section active" id="section-overview">
  <div class="section-title">Guida Completa C#</div>
  <div class="hero-stats">
    <div class="stat"><div class="val m1-txt">15</div><div class="lbl">Mod I — Basi</div></div>
    <div class="stat"><div class="val m2-txt">10</div><div class="lbl">Mod II — OOP</div></div>
    <div class="stat"><div class="val m3-txt">7</div><div class="lbl">Mod III — File</div></div>
    <div class="stat"><div class="val m4-txt">8</div><div class="lbl">Mod IV — Avanzato</div></div>
    <div class="stat"><div class="val m5-txt">6</div><div class="lbl">Mod V — Extra</div></div>
    <div class="stat"><div class="val m6-txt">9</div><div class="lbl">Mod VI — Pro</div></div>
    <div class="stat"><div class="val" style="color:#fff">46</div><div class="lbl">Totale Argomenti</div></div>
  </div>
  <div class="overview-grid">
    <!-- MOD I -->
    <div class="ov-card m1" onclick="showTopic('mod1',0)"><div class="mod-label m1-txt">MOD I</div><span class="ov-num">01</span><h3>Tipi di Dato</h3><p>int, double, string, bool, var, const, casting</p></div>
    <div class="ov-card m1" onclick="showTopic('mod1',1)"><div class="mod-label m1-txt">MOD I</div><span class="ov-num">02</span><h3>Input / Output</h3><p>Console.WriteLine, ReadLine, $"interpolazione"</p></div>
    <div class="ov-card m1" onclick="showTopic('mod1',2)"><div class="mod-label m1-txt">MOD I</div><span class="ov-num">03</span><h3>Aritmetica</h3><p>+−×÷%, operatori composti, Math</p></div>
    <div class="ov-card m1" onclick="showTopic('mod1',3)"><div class="mod-label m1-txt">MOD I</div><span class="ov-num">04</span><h3>Confronto &amp; Booleani</h3><p>==, !=, &gt;, &lt;, &amp;&amp;, ||, !, ternario</p></div>
    <div class="ov-card m1" onclick="showTopic('mod1',4)"><div class="mod-label m1-txt">MOD I</div><span class="ov-num">05</span><h3>Strutture di Controllo</h3><p>if/else, switch, switch expression</p></div>
    <div class="ov-card m1" onclick="showTopic('mod1',5)"><div class="mod-label m1-txt">MOD I</div><span class="ov-num">06</span><h3>Ciclo for</h3><p>Iterazioni note, break, continue</p></div>
    <div class="ov-card m1" onclick="showTopic('mod1',6)"><div class="mod-label m1-txt">MOD I</div><span class="ov-num">07</span><h3>Ciclo while / do-while</h3><p>Condizione prima/dopo, loop menu</p></div>
    <div class="ov-card m1" onclick="showTopic('mod1',7)"><div class="mod-label m1-txt">MOD I</div><span class="ov-num">08</span><h3>Array &amp; foreach</h3><p>Fisso, 2D, jagged, metodi Array</p></div>
    <div class="ov-card m1" onclick="showTopic('mod1',8)"><div class="mod-label m1-txt">MOD I</div><span class="ov-num">09</span><h3>List&lt;T&gt;</h3><p>Add/Remove/Find/Sort/Clear/ToArray</p></div>
    <div class="ov-card m1" onclick="showTopic('mod1',9)"><div class="mod-label m1-txt">MOD I</div><span class="ov-num">10</span><h3>String — Metodi</h3><p>Length, Split, Trim, Replace, Substring…</p></div>
    <div class="ov-card m1" onclick="showTopic('mod1',10)"><div class="mod-label m1-txt">MOD I</div><span class="ov-num">11</span><h3>Enum</h3><p>Enumerazioni, flag, casting</p></div>
    <div class="ov-card m1" onclick="showTopic('mod1',11)"><div class="mod-label m1-txt">MOD I</div><span class="ov-num">12</span><h3>Metodi</h3><p>Parametri, return, overload, ref/out, ricorsione</p></div>
    <div class="ov-card m1" onclick="showTopic('mod1',12)"><div class="mod-label m1-txt">MOD I</div><span class="ov-num">13</span><h3>Struct</h3><p>Tipo valore, costruttori, metodi</p></div>
    <div class="ov-card m1" onclick="showTopic('mod1',13)"><div class="mod-label m1-txt">MOD I</div><span class="ov-num">14</span><h3>Nullable &amp; Null Operators</h3><p>int?, ??, ?., HasValue</p></div>
    <div class="ov-card m1" onclick="showTopic('mod1',14)"><div class="mod-label m1-txt">MOD I</div><span class="ov-num">15</span><h3>Scope &amp; Visibilità</h3><p>Scope variabili, shadowing, static</p></div>
    <!-- MOD II -->
    <div class="ov-card m2" onclick="showTopic('mod2',0)"><div class="mod-label m2-txt">MOD II</div><span class="ov-num">01</span><h3>Classi &amp; Oggetti</h3><p>Blueprint, istanza, new, this</p></div>
    <div class="ov-card m2" onclick="showTopic('mod2',1)"><div class="mod-label m2-txt">MOD II</div><span class="ov-num">02</span><h3>Costruttori</h3><p>Inizializzazione, overload, object initializer</p></div>
    <div class="ov-card m2" onclick="showTopic('mod2',2)"><div class="mod-label m2-txt">MOD II</div><span class="ov-num">03</span><h3>Proprietà</h3><p>get/set, auto-property, validazione</p></div>
    <div class="ov-card m2" onclick="showTopic('mod2',3)"><div class="mod-label m2-txt">MOD II</div><span class="ov-num">04</span><h3>Incapsulamento</h3><p>public, private, protected, internal</p></div>
    <div class="ov-card m2" onclick="showTopic('mod2',4)"><div class="mod-label m2-txt">MOD II</div><span class="ov-num">05</span><h3>Ereditarietà</h3><p>class Figlia : Padre, base, override</p></div>
    <div class="ov-card m2" onclick="showTopic('mod2',5)"><div class="mod-label m2-txt">MOD II</div><span class="ov-num">06</span><h3>Interfacce</h3><p>Contratto, implementazione multipla</p></div>
    <div class="ov-card m2" onclick="showTopic('mod2',6)"><div class="mod-label m2-txt">MOD II</div><span class="ov-num">07</span><h3>Polimorfismo</h3><p>virtual, override, abstract, sealed</p></div>
    <div class="ov-card m2" onclick="showTopic('mod2',7)"><div class="mod-label m2-txt">MOD II</div><span class="ov-num">08</span><h3>Eccezioni</h3><p>try/catch/finally, throw, custom exceptions</p></div>
    <div class="ov-card m2" onclick="showTopic('mod2',8)"><div class="mod-label m2-txt">MOD II</div><span class="ov-num">09</span><h3>Static &amp; Object Init</h3><p>static class, membri statici, initializer</p></div>
    <div class="ov-card m2" onclick="showTopic('mod2',9)"><div class="mod-label m2-txt">MOD II</div><span class="ov-num">10</span><h3>is, as, typeof</h3><p>Type checking, casting sicuro</p></div>
    <!-- MOD III -->
    <div class="ov-card m3" onclick="showTopic('mod3',0)"><div class="mod-label m3-txt">MOD III</div><span class="ov-num">01</span><h3>File di Testo</h3><p>ReadAllText, WriteAllText, AppendAllText</p></div>
    <div class="ov-card m3" onclick="showTopic('mod3',1)"><div class="mod-label m3-txt">MOD III</div><span class="ov-num">02</span><h3>Stream</h3><p>StreamReader, StreamWriter, using</p></div>
    <div class="ov-card m3" onclick="showTopic('mod3',2)"><div class="mod-label m3-txt">MOD III</div><span class="ov-num">03</span><h3>JSON</h3><p>JsonSerializer Serialize/Deserialize</p></div>
    <div class="ov-card m3" onclick="showTopic('mod3',3)"><div class="mod-label m3-txt">MOD III</div><span class="ov-num">04</span><h3>XML</h3><p>XmlSerializer, XDocument</p></div>
    <div class="ov-card m3" onclick="showTopic('mod3',4)"><div class="mod-label m3-txt">MOD III</div><span class="ov-num">05</span><h3>Eccezioni I/O</h3><p>FileNotFoundException, IOException</p></div>
    <div class="ov-card m3" onclick="showTopic('mod3',5)"><div class="mod-label m3-txt">MOD III</div><span class="ov-num">06</span><h3>Dictionary&lt;K,V&gt;</h3><p>Chiave-valore, ContainsKey, TryGetValue</p></div>
    <div class="ov-card m3" onclick="showTopic('mod3',6)"><div class="mod-label m3-txt">MOD III</div><span class="ov-num">07</span><h3>Classe Path</h3><p>Combine, GetFileName, GetExtension</p></div>
    <!-- MOD IV -->
    <div class="ov-card m4" onclick="showTopic('mod4',0)"><div class="mod-label m4-txt">MOD IV</div><span class="ov-num">01</span><h3>LINQ</h3><p>Where, Select, OrderBy, GroupBy, First</p></div>
    <div class="ov-card m4" onclick="showTopic('mod4',1)"><div class="mod-label m4-txt">MOD IV</div><span class="ov-num">02</span><h3>Generics &lt;T&gt;</h3><p>Classi e metodi generici, constraints</p></div>
    <div class="ov-card m4" onclick="showTopic('mod4',2)"><div class="mod-label m4-txt">MOD IV</div><span class="ov-num">03</span><h3>Delegates &amp; Events</h3><p>Func, Action, delegate, event</p></div>
    <div class="ov-card m4" onclick="showTopic('mod4',3)"><div class="mod-label m4-txt">MOD IV</div><span class="ov-num">04</span><h3>Lambda &amp; Closures</h3><p>=&gt;, espressioni, variabili catturate</p></div>
    <div class="ov-card m4" onclick="showTopic('mod4',4)"><div class="mod-label m4-txt">MOD IV</div><span class="ov-num">05</span><h3>async / await</h3><p>Task, async, await, Task.WhenAll</p></div>
    <div class="ov-card m4" onclick="showTopic('mod4',5)"><div class="mod-label m4-txt">MOD IV</div><span class="ov-num">06</span><h3>DateTime</h3><p>Now, Parse, Add, Format, TimeSpan</p></div>
    <div class="ov-card m4" onclick="showTopic('mod4',6)"><div class="mod-label m4-txt">MOD IV</div><span class="ov-num">07</span><h3>StringBuilder</h3><p>Append, Insert, Replace, performance</p></div>
    <div class="ov-card m4" onclick="showTopic('mod4',7)"><div class="mod-label m4-txt">MOD IV</div><span class="ov-num">08</span><h3>Random &amp; Math</h3><p>Next, NextDouble, Math library completa</p></div>
    <!-- MOD V -->
    <div class="ov-card m5" onclick="showTopic('mod5',0)"><div class="mod-label m5-txt">MOD V</div><span class="ov-num">01</span><h3>Tuple &amp; ValueTuple</h3><p>Ritorno multiplo, named tuples</p></div>
    <div class="ov-card m5" onclick="showTopic('mod5',1)"><div class="mod-label m5-txt">MOD V</div><span class="ov-num">02</span><h3>Pattern Matching</h3><p>switch expression, is, when</p></div>
    <div class="ov-card m5" onclick="showTopic('mod5',2)"><div class="mod-label m5-txt">MOD V</div><span class="ov-num">03</span><h3>Record</h3><p>Immutabilità, with, value equality</p></div>
    <div class="ov-card m5" onclick="showTopic('mod5',3)"><div class="mod-label m5-txt">MOD V</div><span class="ov-num">04</span><h3>HashSet &amp; Queue &amp; Stack</h3><p>Collezioni specializzate</p></div>
    <div class="ov-card m5" onclick="showTopic('mod5',4)"><div class="mod-label m5-txt">MOD V</div><span class="ov-num">05</span><h3>Regular Expressions</h3><p>Regex, Match, IsMatch, Replace</p></div>
    <div class="ov-card m5" onclick="showTopic('mod5',5)"><div class="mod-label m5-txt">MOD V</div><span class="ov-num">06</span><h3>Preprocessore &amp; Attributi</h3><p>#region, #if, [Obsolete], [Serializable]</p></div>
    <div class="ov-card m6" onclick="showTopic('mod6',0)"><div class="mod-label m6-txt">MOD VI</div><span class="ov-num">01</span><h3>IDisposable &amp; using</h3><p>Gestione risorse, IDisposable, using pattern</p></div>
    <div class="ov-card m6" onclick="showTopic('mod6',1)"><div class="mod-label m6-txt">MOD VI</div><span class="ov-num">02</span><h3>IEnumerable &amp; yield</h3><p>Iteratori, IEnumerable&lt;T&gt;, yield return</p></div>
    <div class="ov-card m6" onclick="showTopic('mod6',2)"><div class="mod-label m6-txt">MOD VI</div><span class="ov-num">03</span><h3>Extension Methods</h3><p>Metodi estensione, this keyword</p></div>
    <div class="ov-card m6" onclick="showTopic('mod6',3)"><div class="mod-label m6-txt">MOD VI</div><span class="ov-num">04</span><h3>Thread &amp; Task</h3><p>Multi-threading, lock, CancellationToken</p></div>
    <div class="ov-card m6" onclick="showTopic('mod6',4)"><div class="mod-label m6-txt">MOD VI</div><span class="ov-num">05</span><h3>Collezioni Avanzate</h3><p>SortedDictionary, ConcurrentDictionary, LinkedList</p></div>
    <div class="ov-card m6" onclick="showTopic('mod6',5)"><div class="mod-label m6-txt">MOD VI</div><span class="ov-num">06</span><h3>Interfacce Fondamentali</h3><p>IComparable, IEquatable, IComparer</p></div>
    <div class="ov-card m6" onclick="showTopic('mod6',6)"><div class="mod-label m6-txt">MOD VI</div><span class="ov-num">07</span><h3>Operator Overloading</h3><p>Sovraccaricare operatori +, ==, !=, >, &lt;</p></div>
    <div class="ov-card m6" onclick="showTopic('mod6',7)"><div class="mod-label m6-txt">MOD VI</div><span class="ov-num">08</span><h3>Indexers &amp; Properties avanzate</h3><p>Indicizzatori, init-only, required</p></div>
    <div class="ov-card m6" onclick="showTopic('mod6',8)"><div class="mod-label m6-txt">MOD VI</div><span class="ov-num">09</span><h3>Namespaces &amp; using</h3><p>namespace, using, global using, alias</p></div>
  </div>
</div>

<!-- MOD I -->
<div class="section" id="section-mod1">
  <div class="section-title">Modulo I — Basi del C# <span class="tag tag-m1">MOD I</span></div>

  <div class="topic-card">
    <div class="topic-header" onclick="toggle(this.closest('.topic-card'))"><div><h3>1. Tipi di Dato</h3><div class="topic-sub">int, double, string, bool, char, var, const, casting, overflow</div></div><span class="arrow">▼</span></div>
    <div class="topic-body">
      <h4>Interi</h4>
      <table><tr><th>Tipo</th><th>Bit</th><th>Range</th><th>Uso</th></tr>
        <tr><td>byte</td><td>8</td><td>0–255</td><td>numeri piccoli positivi</td></tr>
        <tr><td>short</td><td>16</td><td>±32.767</td><td>numeri piccoli</td></tr>
        <tr><td>int</td><td>32</td><td>±2 miliardi</td><td>uso generale</td></tr>
        <tr><td>long</td><td>64</td><td>±9 quintilioni</td><td>numeri enormi (aggiungi L)</td></tr>
      </table>
      <h4>Decimali</h4>
      <pre><span class="ty">float</span>   t = <span class="num">36.6f</span>;    <span class="cm">// ~7 cifre, richiede 'f'</span>
<span class="ty">double</span>  h = <span class="num">1.75</span>;     <span class="cm">// ~15 cifre, default per decimali</span>
<span class="ty">decimal</span> p = <span class="num">9.99m</span>;   <span class="cm">// ~28 cifre — usa SEMPRE per i soldi!</span></pre>
      <h4>Altri tipi</h4>
      <pre><span class="ty">char</span>   c    = <span class="str">'A'</span>;          <span class="cm">// singolo carattere</span>
<span class="ty">string</span> nome = <span class="str">"Marco"</span>;     <span class="cm">// testo</span>
<span class="ty">bool</span>   ok   = <span class="kw">true</span>;        <span class="cm">// solo true o false</span>
<span class="kw">var</span>    n    = <span class="num">42</span>;           <span class="cm">// tipo inferito automaticamente</span>
<span class="kw">const</span> <span class="ty">double</span> PI = <span class="num">3.14159</span>; <span class="cm">// costante, mai modificabile</span></pre>
      <h4>Type Casting</h4>
      <pre><span class="cm">// Implicita (automatica, sicura):</span>
<span class="ty">int</span> n = <span class="num">10</span>; <span class="ty">double</span> d = n;    <span class="cm">// int → double</span>

<span class="cm">// Esplicita (puoi perdere dati!):</span>
<span class="ty">double</span> d = <span class="num">9.99</span>;
<span class="ty">int</span> i = (<span class="ty">int</span>)d;              <span class="cm">// i = 9, decimale perso!</span>

<span class="cm">// Da stringa a numero:</span>
<span class="ty">int</span> n = <span class="ty">int</span>.<span class="fn">Parse</span>(<span class="str">"42"</span>);
<span class="ty">int</span> n = Convert.<span class="fn">ToInt32</span>(<span class="str">"42"</span>);
<span class="ty">bool</span> ok = <span class="ty">int</span>.<span class="fn">TryParse</span>(<span class="str">"abc"</span>, <span class="kw">out int</span> result); <span class="cm">// sicuro, non lancia eccezione</span></pre>
      <div class="warn">Per i soldi usa SEMPRE decimal — float/double hanno errori di arrotondamento!</div>
    </div>
  </div>

  <div class="topic-card">
    <div class="topic-header" onclick="toggle(this.closest('.topic-card'))"><div><h3>2. Input / Output</h3><div class="topic-sub">Console.Write, WriteLine, ReadLine, interpolazione, formattazione</div></div><span class="arrow">▼</span></div>
    <div class="topic-body">
      <pre><span class="cm">// Output:</span>
Console.<span class="fn">WriteLine</span>(<span class="str">"Ciao!"</span>);                      <span class="cm">// stampa + va a capo</span>
Console.<span class="fn">Write</span>(<span class="str">"Ciao "</span>);                          <span class="cm">// stampa senza a capo</span>
Console.<span class="fn">WriteLine</span>(<span class="str">$"Nome: {nome}, Eta: {eta}"</span>);  <span class="cm">// interpolazione (preferita)</span>
Console.<span class="fn">WriteLine</span>(<span class="str">"Nome: "</span> + nome + <span class="str">", Eta: "</span> + eta); <span class="cm">// concatenazione</span>

<span class="cm">// Formattazione numeri:</span>
Console.<span class="fn">WriteLine</span>(prezzo.<span class="fn">ToString</span>(<span class="str">"F2"</span>));  <span class="cm">// 1234,57 (2 decimali)</span>
Console.<span class="fn">WriteLine</span>(prezzo.<span class="fn">ToString</span>(<span class="str">"C"</span>));   <span class="cm">// valuta: €1.234,57</span>
Console.<span class="fn">WriteLine</span>(prezzo.<span class="fn">ToString</span>(<span class="str">"N0"</span>));  <span class="cm">// nessun decimale</span>
Console.<span class="fn">WriteLine</span>(<span class="str">$"{prezzo:F2}"</span>);         <span class="cm">// inline con interpolazione</span>

<span class="cm">// Caratteri speciali:</span>
<span class="cm">// \n = nuova riga   \t = tab   \\ = backslash   \" = virgoletta</span>

<span class="cm">// Input:</span>
Console.<span class="fn">Write</span>(<span class="str">"Inserisci nome: "</span>);
<span class="ty">string</span> nome = Console.<span class="fn">ReadLine</span>();
<span class="ty">int</span> eta = <span class="ty">int</span>.<span class="fn">Parse</span>(Console.<span class="fn">ReadLine</span>());

<span class="cm">// Input sicuro con TryParse:</span>
<span class="kw">if</span> (<span class="ty">int</span>.<span class="fn">TryParse</span>(Console.<span class="fn">ReadLine</span>(), <span class="kw">out int</span> numero))
    Console.<span class="fn">WriteLine</span>(<span class="str">$"Hai inserito: {numero}"</span>);
<span class="kw">else</span>
    Console.<span class="fn">WriteLine</span>(<span class="str">"Errore: non è un numero!"</span>);</pre>
    </div>
  </div>

  <div class="topic-card">
    <div class="topic-header" onclick="toggle(this.closest('.topic-card'))"><div><h3>3. Aritmetica &amp; Math</h3><div class="topic-sub">+−×÷%, operatori composti, incremento, libreria Math</div></div><span class="arrow">▼</span></div>
    <div class="topic-body">
      <pre><span class="ty">int</span> a = <span class="num">10</span>, b = <span class="num">3</span>;
<span class="ty">int</span> somma     = a + b;  <span class="cm">// 13</span>
<span class="ty">int</span> diff      = a - b;  <span class="cm">// 7</span>
<span class="ty">int</span> prodotto  = a * b;  <span class="cm">// 30</span>
<span class="ty">int</span> quoziente = a / b;  <span class="cm">// 3  ← attenzione! int/int = int</span>
<span class="ty">int</span> resto     = a % b;  <span class="cm">// 1  (modulo)</span>

<span class="cm">// Per decimali: (double)a / b oppure 10.0 / 3</span>

<span class="cm">// Operatori composti:</span>
n += <span class="num">5</span>;  n -= <span class="num">3</span>;  n *= <span class="num">2</span>;  n /= <span class="num">4</span>;  n %= <span class="num">4</span>;
n++;  n--;  ++n;  --n;</pre>
      <h4>Libreria Math</h4>
      <pre>Math.<span class="fn">Abs</span>(-<span class="num">5</span>)          <span class="cm">// 5</span>
Math.<span class="fn">Sqrt</span>(<span class="num">16</span>)         <span class="cm">// 4.0</span>
Math.<span class="fn">Pow</span>(<span class="num">2</span>, <span class="num">10</span>)       <span class="cm">// 1024.0</span>
Math.<span class="fn">Round</span>(<span class="num">3.567</span>, <span class="num">2</span>) <span class="cm">// 3.57</span>
Math.<span class="fn">Floor</span>(<span class="num">3.9</span>)      <span class="cm">// 3.0 (arrotonda per difetto)</span>
Math.<span class="fn">Ceiling</span>(<span class="num">3.1</span>)   <span class="cm">// 4.0 (arrotonda per eccesso)</span>
Math.<span class="fn">Max</span>(<span class="num">10</span>, <span class="num">20</span>)     <span class="cm">// 20</span>
Math.<span class="fn">Min</span>(<span class="num">10</span>, <span class="num">20</span>)     <span class="cm">// 10</span>
Math.<span class="fn">Log</span>(<span class="num">100</span>, <span class="num">10</span>)    <span class="cm">// 2.0 (logaritmo base 10)</span>
Math.<span class="fn">Sin</span>(Math.PI/<span class="num">2</span>) <span class="cm">// 1.0</span>
Math.PI                <span class="cm">// 3.14159…</span>
Math.E                 <span class="cm">// 2.71828…</span></pre>
    </div>
  </div>

  <div class="topic-card">
    <div class="topic-header" onclick="toggle(this.closest('.topic-card'))"><div><h3>4. Operatori di Confronto &amp; Booleani</h3><div class="topic-sub">==, !=, &gt;, &lt;, &amp;&amp;, ||, !, operatore ternario</div></div><span class="arrow">▼</span></div>
    <div class="topic-body">
      <pre><span class="cm">// Confronto (restituiscono true/false):</span>
a == b   <span class="cm">// uguale</span>
a != b   <span class="cm">// diverso</span>
a > b    <span class="cm">// maggiore</span>
a < b    <span class="cm">// minore</span>
a >= b   <span class="cm">// maggiore o uguale</span>
a <= b   <span class="cm">// minore o uguale</span>

<span class="cm">// Logici:</span>
<span class="ty">bool</span> adulto = eta >= <span class="num">18</span> <span class="op">&amp;&amp;</span> haDocumento;  <span class="cm">// AND — entrambi veri</span>
<span class="ty">bool</span> paga   = haCarta <span class="op">||</span> haContanti;    <span class="cm">// OR — almeno uno vero</span>
<span class="ty">bool</span> offline = <span class="op">!</span>connesso;               <span class="cm">// NOT</span>

<span class="cm">// Ternario — if/else su una riga:</span>
<span class="ty">string</span> r = eta >= <span class="num">18</span> ? <span class="str">"Adulto"</span> : <span class="str">"Minore"</span>;</pre>
      <div class="warn">Non confondere = (assegnazione) con == (confronto)!</div>
    </div>
  </div>

  <div class="topic-card">
    <div class="topic-header" onclick="toggle(this.closest('.topic-card'))"><div><h3>5. Strutture di Controllo</h3><div class="topic-sub">if/else if/else, switch, switch expression (C# 8+)</div></div><span class="arrow">▼</span></div>
    <div class="topic-body">
      <pre><span class="cm">// if / else if / else:</span>
<span class="kw">if</span> (voto >= <span class="num">90</span>)      Console.<span class="fn">WriteLine</span>(<span class="str">"Ottimo!"</span>);
<span class="kw">else if</span> (voto >= <span class="num">75</span>) Console.<span class="fn">WriteLine</span>(<span class="str">"Buono"</span>);
<span class="kw">else if</span> (voto >= <span class="num">60</span>) Console.<span class="fn">WriteLine</span>(<span class="str">"Sufficiente"</span>);
<span class="kw">else</span>                 Console.<span class="fn">WriteLine</span>(<span class="str">"Insufficiente"</span>);

<span class="cm">// switch:</span>
<span class="kw">switch</span> (giorno) {
    <span class="kw">case</span> <span class="num">1</span>: Console.<span class="fn">WriteLine</span>(<span class="str">"Lunedì"</span>); <span class="kw">break</span>;
    <span class="kw">case</span> <span class="num">6</span>:
    <span class="kw">case</span> <span class="num">7</span>: Console.<span class="fn">WriteLine</span>(<span class="str">"Weekend!"</span>); <span class="kw">break</span>;
    <span class="kw">default</span>: Console.<span class="fn">WriteLine</span>(<span class="str">"Altro"</span>); <span class="kw">break</span>;
}

<span class="cm">// switch expression (C# 8+):</span>
<span class="ty">string</span> nome = giorno <span class="kw">switch</span> {
    <span class="num">1</span> => <span class="str">"Lunedì"</span>,
    <span class="num">2</span> => <span class="str">"Martedì"</span>,
    _ => <span class="str">"Altro"</span>   <span class="cm">// _ = default</span>
};</pre>
    </div>
  </div>

  <div class="topic-card">
    <div class="topic-header" onclick="toggle(this.closest('.topic-card'))"><div><h3>6. Ciclo for</h3><div class="topic-sub">Iterazioni note, contatore, break, continue, step</div></div><span class="arrow">▼</span></div>
    <div class="topic-body">
      <pre><span class="cm">// Struttura: for (init; condizione; aggiornamento)</span>
<span class="kw">for</span> (<span class="ty">int</span> i = <span class="num">0</span>; i < <span class="num">5</span>; i++)
    Console.<span class="fn">WriteLine</span>(<span class="str">$"i = {i}"</span>);  <span class="cm">// 0, 1, 2, 3, 4</span>

<span class="cm">// Contare al contrario:</span>
<span class="kw">for</span> (<span class="ty">int</span> i = <span class="num">10</span>; i >= <span class="num">0</span>; i--)
    Console.<span class="fn">Write</span>(i + <span class="str">" "</span>);

<span class="cm">// Step diverso da 1:</span>
<span class="kw">for</span> (<span class="ty">int</span> i = <span class="num">0</span>; i <= <span class="num">20</span>; i += <span class="num">2</span>)
    Console.<span class="fn">Write</span>(i + <span class="str">" "</span>);  <span class="cm">// 0 2 4 6 ... 20</span>

<span class="cm">// break e continue:</span>
<span class="kw">for</span> (<span class="ty">int</span> i = <span class="num">0</span>; i < <span class="num">10</span>; i++) {
    <span class="kw">if</span> (i == <span class="num">3</span>) <span class="kw">continue</span>;  <span class="cm">// salta il 3</span>
    <span class="kw">if</span> (i == <span class="num">7</span>) <span class="kw">break</span>;     <span class="cm">// esce dal ciclo</span>
    Console.<span class="fn">Write</span>(i + <span class="str">" "</span>); <span class="cm">// 0 1 2 4 5 6</span>
}</pre>
    </div>
  </div>

  <div class="topic-card">
    <div class="topic-header" onclick="toggle(this.closest('.topic-card'))"><div><h3>7. Ciclo while / do-while</h3><div class="topic-sub">Condizione prima/dopo, loop infinito, menu interattivo</div></div><span class="arrow">▼</span></div>
    <div class="topic-body">
      <pre><span class="cm">// while — condizione PRIMA:</span>
<span class="ty">int</span> i = <span class="num">0</span>;
<span class="kw">while</span> (i < <span class="num">5</span>) {
    Console.<span class="fn">WriteLine</span>(<span class="str">$"i = {i}"</span>);
    i++;
}

<span class="cm">// do-while — condizione DOPO (esegue almeno 1 volta):</span>
<span class="ty">string</span> scelta;
<span class="kw">do</span> {
    Console.<span class="fn">WriteLine</span>(<span class="str">"1. Gioca  0. Esci"</span>);
    scelta = Console.<span class="fn">ReadLine</span>();
} <span class="kw">while</span> (scelta != <span class="str">"0"</span>);</pre>
      <table>
        <tr><th></th><th>for</th><th>while</th><th>do-while</th></tr>
        <tr><td>Quando</td><td>Iterazioni note</td><td>Iterazioni non note</td><td>Almeno 1 volta</td></tr>
        <tr><td>Condizione</td><td>Prima</td><td>Prima</td><td>Dopo</td></tr>
        <tr><td>Esempio</td><td>Scorrere array</td><td>Input utente</td><td>Menu</td></tr>
      </table>
    </div>
  </div>

  <div class="topic-card">
    <div class="topic-header" onclick="toggle(this.closest('.topic-card'))"><div><h3>8. Array &amp; foreach</h3><div class="topic-sub">Array fisso, 2D, jagged, metodi Array, ciclo foreach</div></div><span class="arrow">▼</span></div>
    <div class="topic-body">
      <pre><span class="cm">// Dichiarazione:</span>
<span class="ty">int</span>[] numeri = <span class="kw">new</span> <span class="ty">int</span>[<span class="num">5</span>];          <span class="cm">// 5 elementi, tutti 0</span>
<span class="ty">int</span>[] numeri = { <span class="num">10</span>, <span class="num">20</span>, <span class="num">30</span>, <span class="num">40</span> }; <span class="cm">// con valori</span>
Console.<span class="fn">WriteLine</span>(numeri[<span class="num">0</span>]);       <span class="cm">// 10 (indice parte da 0!)</span>
Console.<span class="fn">WriteLine</span>(numeri.Length);    <span class="cm">// 4</span>

<span class="cm">// foreach:</span>
<span class="kw">foreach</span> (<span class="ty">string</span> frutto <span class="kw">in</span> frutti)
    Console.<span class="fn">WriteLine</span>(frutto);

<span class="cm">// Array 2D:</span>
<span class="ty">int</span>[,] griglia = { { <span class="num">1</span>,<span class="num">2</span>,<span class="num">3</span> }, { <span class="num">4</span>,<span class="num">5</span>,<span class="num">6</span> } };
Console.<span class="fn">WriteLine</span>(griglia[<span class="num">0</span>, <span class="num">1</span>]);  <span class="cm">// 2</span>
griglia.<span class="fn">GetLength</span>(<span class="num">0</span>);  <span class="cm">// righe</span>
griglia.<span class="fn">GetLength</span>(<span class="num">1</span>);  <span class="cm">// colonne</span>

<span class="cm">// Jagged array (righe di lunghezza diversa):</span>
<span class="ty">int</span>[][] jagged = <span class="kw">new</span> <span class="ty">int</span>[<span class="num">3</span>][];
jagged[<span class="num">0</span>] = <span class="kw">new</span> <span class="ty">int</span>[] { <span class="num">1</span>, <span class="num">2</span> };
jagged[<span class="num">1</span>] = <span class="kw">new</span> <span class="ty">int</span>[] { <span class="num">3</span>, <span class="num">4</span>, <span class="num">5</span> };</pre>
      <h4>Metodi Array</h4>
      <pre>Array.<span class="fn">Sort</span>(numeri);                     <span class="cm">// ordina</span>
Array.<span class="fn">Reverse</span>(numeri);                  <span class="cm">// inverte</span>
<span class="ty">int</span> pos = Array.<span class="fn">IndexOf</span>(numeri, <span class="num">5</span>);    <span class="cm">// trova posizione</span>
Array.<span class="fn">Clear</span>(numeri, <span class="num">0</span>, numeri.Length); <span class="cm">// azzera</span>
Array.<span class="fn">Copy</span>(src, dst, length);           <span class="cm">// copia</span></pre>
    </div>
  </div>

  <div class="topic-card">
    <div class="topic-header" onclick="toggle(this.closest('.topic-card'))"><div><h3>9. List&lt;T&gt;</h3><div class="topic-sub">Array dinamico, Add/Remove/Find/Sort/Clear/ToArray/AddRange</div></div><span class="arrow">▼</span></div>
    <div class="topic-body">
      <pre>List&lt;<span class="ty">string</span>&gt; nomi = <span class="kw">new</span> List&lt;<span class="ty">string</span>&gt;();
nomi.<span class="fn">Add</span>(<span class="str">"Marco"</span>);
nomi.<span class="fn">Add</span>(<span class="str">"Giulia"</span>);
nomi.<span class="fn">Insert</span>(<span class="num">1</span>, <span class="str">"Anna"</span>);      <span class="cm">// inserisce in posizione 1</span>
Console.<span class="fn">WriteLine</span>(nomi.Count); <span class="cm">// usa Count, non Length!</span>
nomi.<span class="fn">Remove</span>(<span class="str">"Marco"</span>);         <span class="cm">// rimuove per valore</span>
nomi.<span class="fn">RemoveAt</span>(<span class="num">0</span>);             <span class="cm">// rimuove per indice</span>
nomi.<span class="fn">Contains</span>(<span class="str">"Giulia"</span>);     <span class="cm">// true</span>
nomi.<span class="fn">Sort</span>();
nomi.<span class="fn">Reverse</span>();
nomi.<span class="fn">Clear</span>();

<span class="cm">// Aggiungere più elementi:</span>
<span class="ty">string</span>[] nuovi = { <span class="str">"Luca"</span>, <span class="str">"Sara"</span> };
nomi.<span class="fn">AddRange</span>(nuovi);

<span class="cm">// Cercare:</span>
<span class="ty">string</span> trovato = nomi.<span class="fn">Find</span>(n => n.<span class="fn">StartsWith</span>(<span class="str">"G"</span>));
List&lt;<span class="ty">string</span>&gt; tutti = nomi.<span class="fn">FindAll</span>(n => n.Length > <span class="num">4</span>);

<span class="cm">// Convertire in array:</span>
<span class="ty">string</span>[] arr = nomi.<span class="fn">ToArray</span>();</pre>
      <table>
        <tr><th></th><th>Array</th><th>List&lt;T&gt;</th></tr>
        <tr><td>Dimensione</td><td>Fissa</td><td>Dinamica</td></tr>
        <tr><td>Lunghezza</td><td>.Length</td><td>.Count</td></tr>
        <tr><td>Aggiungere</td><td>Impossibile</td><td>.Add()</td></tr>
        <tr><td>Rimuovere</td><td>Impossibile</td><td>.Remove()</td></tr>
        <tr><td>Usalo per</td><td>Dimensione nota</td><td>Dimensione variabile</td></tr>
      </table>
    </div>
  </div>

  <div class="topic-card">
    <div class="topic-header" onclick="toggle(this.closest('.topic-card'))"><div><h3>10. String — Metodi Completi</h3><div class="topic-sub">Length, Split, Trim, Replace, Contains, Substring, IndexOf, Join…</div></div><span class="arrow">▼</span></div>
    <div class="topic-body">
      <pre><span class="ty">string</span> s = <span class="str">" Ciao Mondo! "</span>;
s.Length                      <span class="cm">// 14</span>
s.<span class="fn">ToUpper</span>()                   <span class="cm">// " CIAO MONDO! "</span>
s.<span class="fn">ToLower</span>()                   <span class="cm">// " ciao mondo! "</span>
s.<span class="fn">Trim</span>()                      <span class="cm">// "Ciao Mondo!" (rimuove spazi)</span>
s.<span class="fn">TrimStart</span>() / s.<span class="fn">TrimEnd</span>()  <span class="cm">// solo a sinistra / destra</span>
s.<span class="fn">Replace</span>(<span class="str">"Mondo"</span>, <span class="str">"Italia"</span>) <span class="cm">// " Ciao Italia! "</span>
s.<span class="fn">Contains</span>(<span class="str">"Ciao"</span>)           <span class="cm">// true</span>
s.<span class="fn">StartsWith</span>(<span class="str">" C"</span>)          <span class="cm">// true</span>
s.<span class="fn">EndsWith</span>(<span class="str">"! "</span>)            <span class="cm">// true</span>
s.<span class="fn">IndexOf</span>(<span class="str">"Mondo"</span>)          <span class="cm">// 6 (posizione)</span>
s.<span class="fn">Substring</span>(<span class="num">1</span>, <span class="num">4</span>)           <span class="cm">// "Ciao"</span>
s.<span class="fn">Split</span>(<span class="str">' '</span>)                 <span class="cm">// array di parole</span>
<span class="ty">string</span>.<span class="fn">Join</span>(<span class="str">", "</span>, arrayNomi) <span class="cm">// "Luca, Marco, Anna"</span>
<span class="ty">string</span>.<span class="fn">IsNullOrEmpty</span>(s)       <span class="cm">// true se null o ""</span>
<span class="ty">string</span>.<span class="fn">IsNullOrWhiteSpace</span>(s)  <span class="cm">// true se null, "" o solo spazi</span>
s.<span class="fn">PadLeft</span>(<span class="num">15</span>)               <span class="cm">// aggiunge spazi a sinistra</span>
s.<span class="fn">PadRight</span>(<span class="num">15</span>, <span class="str">'*'</span>)         <span class="cm">// aggiunge * a destra</span>
char.<span class="fn">ToUpper</span>(s[<span class="num">0</span>]) + s.<span class="fn">Substring</span>(<span class="num">1</span>).<span class="fn">ToLower</span>()  <span class="cm">// Capitalizza</span></pre>
      <div class="tip">Le stringhe in C# sono immutabili — ogni operazione crea una nuova stringa. Per molte concatenazioni usa StringBuilder.</div>
    </div>
  </div>

  <div class="topic-card">
    <div class="topic-header" onclick="toggle(this.closest('.topic-card'))"><div><h3>11. Enum</h3><div class="topic-sub">Enumerazioni, valori personalizzati, casting, Flags</div></div><span class="arrow">▼</span></div>
    <div class="topic-body">
      <pre><span class="cm">// Definizione (fuori dalla classe o dentro):</span>
<span class="kw">enum</span> Giorno { Lunedi, Martedi, Mercoledi, Giovedi, Venerdi, Sabato, Domenica }

<span class="cm">// Uso:</span>
Giorno oggi = Giorno.Lunedi;
Console.<span class="fn">WriteLine</span>(oggi);         <span class="cm">// "Lunedi"</span>
Console.<span class="fn">WriteLine</span>((<span class="ty">int</span>)oggi);   <span class="cm">// 0 (indice parte da 0)</span>

<span class="cm">// Valori personalizzati:</span>
<span class="kw">enum</span> Stato { Attivo = <span class="num">1</span>, Inattivo = <span class="num">0</span>, Sospeso = <span class="num">2</span> }

<span class="cm">// Casting da int a enum:</span>
Stato s = (Stato)<span class="num">1</span>;   <span class="cm">// Stato.Attivo</span>

<span class="cm">// Switch su enum:</span>
<span class="kw">switch</span> (oggi) {
    <span class="kw">case</span> Giorno.Sabato:
    <span class="kw">case</span> Giorno.Domenica: Console.<span class="fn">WriteLine</span>(<span class="str">"Weekend!"</span>); <span class="kw">break</span>;
    <span class="kw">default</span>: Console.<span class="fn">WriteLine</span>(<span class="str">"Settimana lavorativa"</span>); <span class="kw">break</span>;
}

<span class="cm">// Enum.Parse / Enum.TryParse:</span>
Giorno g = Enum.<span class="fn">Parse</span>&lt;Giorno&gt;(<span class="str">"Martedi"</span>);
<span class="ty">bool</span> ok = Enum.<span class="fn">TryParse</span>(<span class="str">"Lunedi"</span>, <span class="kw">out</span> Giorno result);</pre>
    </div>
  </div>

  <div class="topic-card">
    <div class="topic-header" onclick="toggle(this.closest('.topic-card'))"><div><h3>12. I Metodi</h3><div class="topic-sub">Parametri, return, overload, ref/out, ricorsione, params, expression-bodied</div></div><span class="arrow">▼</span></div>
    <div class="topic-body">
      <pre><span class="cm">// void = non restituisce niente:</span>
<span class="kw">static</span> <span class="ty">void</span> <span class="fn">Saluta</span>(<span class="ty">string</span> nome) => Console.<span class="fn">WriteLine</span>(<span class="str">$"Ciao, {nome}!"</span>);

<span class="cm">// return = restituisce un valore:</span>
<span class="kw">static</span> <span class="ty">int</span> <span class="fn">Somma</span>(<span class="ty">int</span> a, <span class="ty">int</span> b) => a + b;

<span class="cm">// Parametri opzionali (devono essere ultimi!):</span>
<span class="kw">static</span> <span class="ty">void</span> <span class="fn">Saluta</span>(<span class="ty">string</span> nome, <span class="ty">string</span> saluto = <span class="str">"Ciao"</span>) {
    Console.<span class="fn">WriteLine</span>(<span class="str">$"{saluto}, {nome}!"</span>);
}
<span class="fn">Saluta</span>(<span class="str">"Marco"</span>);              <span class="cm">// Ciao, Marco!</span>
<span class="fn">Saluta</span>(<span class="str">"Giulia"</span>, <span class="str">"Buongiorno"</span>); <span class="cm">// Buongiorno, Giulia!</span></pre>
      <h4>Overloading</h4>
      <pre><span class="kw">static</span> <span class="ty">void</span> <span class="fn">Stampa</span>(<span class="ty">int</span> n)    { <span class="cm">/* ... */</span> }
<span class="kw">static</span> <span class="ty">void</span> <span class="fn">Stampa</span>(<span class="ty">string</span> s) { <span class="cm">/* ... */</span> }  <span class="cm">// stesso nome, tipi diversi</span></pre>
      <h4>ref e out</h4>
      <pre><span class="cm">// ref = modifica la variabile originale:</span>
<span class="kw">static</span> <span class="ty">void</span> <span class="fn">Raddoppia</span>(<span class="kw">ref</span> <span class="ty">int</span> n) { n *= <span class="num">2</span>; }
<span class="ty">int</span> x = <span class="num">5</span>; <span class="fn">Raddoppia</span>(<span class="kw">ref</span> x);  <span class="cm">// x ora è 10</span>

<span class="cm">// out = restituisce più valori:</span>
<span class="kw">static</span> <span class="ty">void</span> <span class="fn">MinMax</span>(<span class="ty">int</span>[] arr, <span class="kw">out</span> <span class="ty">int</span> min, <span class="kw">out</span> <span class="ty">int</span> max) { <span class="cm">/*...*/</span> }
<span class="fn">MinMax</span>(numeri, <span class="kw">out int</span> minimo, <span class="kw">out int</span> massimo);</pre>
      <h4>params — numero variabile di argomenti</h4>
      <pre><span class="kw">static</span> <span class="ty">int</span> <span class="fn">Somma</span>(<span class="kw">params</span> <span class="ty">int</span>[] numeri) {
    <span class="ty">int</span> tot = <span class="num">0</span>;
    <span class="kw">foreach</span> (<span class="ty">int</span> n <span class="kw">in</span> numeri) tot += n;
    <span class="kw">return</span> tot;
}
<span class="fn">Somma</span>(<span class="num">1</span>, <span class="num">2</span>); <span class="fn">Somma</span>(<span class="num">1</span>, <span class="num">2</span>, <span class="num">3</span>, <span class="num">4</span>, <span class="num">5</span>); <span class="cm">// quanti vuoi</span></pre>
      <h4>Ricorsione</h4>
      <pre><span class="kw">static</span> <span class="ty">int</span> <span class="fn">Fattoriale</span>(<span class="ty">int</span> n) {
    <span class="kw">if</span> (n <= <span class="num">1</span>) <span class="kw">return</span> <span class="num">1</span>;         <span class="cm">// caso base — OBBLIGATORIO</span>
    <span class="kw">return</span> n * <span class="fn">Fattoriale</span>(n - <span class="num">1</span>); <span class="cm">// chiamata ricorsiva</span>
}
<span class="fn">Fattoriale</span>(<span class="num">5</span>);  <span class="cm">// 5×4×3×2×1 = 120</span></pre>
    </div>
  </div>

  <div class="topic-card">
    <div class="topic-header" onclick="toggle(this.closest('.topic-card'))"><div><h3>13. Struct</h3><div class="topic-sub">Tipo valore, costruttori, metodi, struct vs class</div></div><span class="arrow">▼</span></div>
    <div class="topic-body">
      <pre><span class="kw">struct</span> Prodotto {
    <span class="kw">public</span> <span class="ty">string</span> Nome;
    <span class="kw">public</span> <span class="ty">double</span> Prezzo;
    <span class="kw">public</span> <span class="ty">int</span>    Quantita;

    <span class="kw">public</span> <span class="fn">Prodotto</span>(<span class="ty">string</span> nome, <span class="ty">double</span> prezzo, <span class="ty">int</span> qty) {
        Nome = nome; Prezzo = prezzo; Quantita = qty;
    }

    <span class="kw">public</span> <span class="ty">double</span> <span class="fn">ValoreTotale</span>() => Prezzo * Quantita;
}

Prodotto p = <span class="kw">new</span> <span class="fn">Prodotto</span>(<span class="str">"Pizza"</span>, <span class="num">8.50</span>, <span class="num">10</span>);
Console.<span class="fn">WriteLine</span>(p.<span class="fn">ValoreTotale</span>()); <span class="cm">// 85.0</span></pre>
      <table>
        <tr><th>Caratteristica</th><th>struct</th><th>class</th></tr>
        <tr><td>Tipo</td><td>Valore (Stack)</td><td>Riferimento (Heap)</td></tr>
        <tr><td>Ereditarietà</td><td>No</td><td>Sì</td></tr>
        <tr><td>Copia</td><td>Indipendente</td><td>Riferimento condiviso</td></tr>
        <tr><td>Usalo per</td><td>Dati piccoli/semplici</td><td>Oggetti complessi</td></tr>
      </table>
    </div>
  </div>

  <div class="topic-card">
    <div class="topic-header" onclick="toggle(this.closest('.topic-card'))"><div><h3>14. Nullable &amp; Null Operators</h3><div class="topic-sub">int?, string?, ??, ?., HasValue, null coalescing assignment</div></div><span class="arrow">▼</span></div>
    <div class="topic-body">
      <pre><span class="cm">// Tipo nullable — può contenere null:</span>
<span class="ty">int</span>? eta = <span class="kw">null</span>;
<span class="ty">string</span>? nome = <span class="kw">null</span>;

<span class="cm">// ?? (null coalescing) — valore di default se null:</span>
<span class="ty">int</span> valore = eta ?? <span class="num">0</span>;
<span class="ty">string</span> n = nome ?? <span class="str">"Sconosciuto"</span>;

<span class="cm">// ??= (null coalescing assignment):</span>
nome ??= <span class="str">"Default"</span>;  <span class="cm">// assegna solo se null</span>

<span class="cm">// ?. (null conditional) — evita NullReferenceException:</span>
<span class="ty">int</span>? lunghezza = nome?.Length;
<span class="ty">string</span>? upper = nome?.ToUpper();

<span class="cm">// Controllare se ha valore:</span>
<span class="kw">if</span> (eta.HasValue)
    Console.<span class="fn">WriteLine</span>(eta.Value);

<span class="cm">// ! (null-forgiving) — dici al compilatore "so che non è null":</span>
<span class="ty">string</span> s = nome!;  <span class="cm">// usa con cautela</span></pre>
    </div>
  </div>

  <div class="topic-card">
    <div class="topic-header" onclick="toggle(this.closest('.topic-card'))"><div><h3>15. Scope &amp; Visibilità delle Variabili</h3><div class="topic-sub">Scope locale, blocco, classe, shadowing</div></div><span class="arrow">▼</span></div>
    <div class="topic-body">
      <pre><span class="ty">int</span> x = <span class="num">10</span>;  <span class="cm">// variabile del metodo</span>

<span class="kw">if</span> (<span class="kw">true</span>) {
    <span class="ty">int</span> y = <span class="num">5</span>;  <span class="cm">// esiste solo dentro questo blocco</span>
    Console.<span class="fn">WriteLine</span>(x);  <span class="cm">// OK — x è visibile</span>
    Console.<span class="fn">WriteLine</span>(y);  <span class="cm">// OK</span>
}
<span class="cm">// Console.WriteLine(y);  ← ERRORE! y non esiste più</span>

<span class="kw">for</span> (<span class="ty">int</span> i = <span class="num">0</span>; i < <span class="num">5</span>; i++) {
    <span class="cm">// i esiste solo dentro il for</span>
}
<span class="cm">// Console.WriteLine(i);  ← ERRORE!</span></pre>
      <div class="note">Una variabile esiste solo nel blocco {} in cui è dichiarata. I blocchi interni possono vedere le variabili dei blocchi esterni, ma non viceversa.</div>
    </div>
  </div>
</div>

<!-- MOD II -->
<div class="section" id="section-mod2">
  <div class="section-title">Modulo II — OOP <span class="tag tag-m2">MOD II</span></div>

  <div class="topic-card">
    <div class="topic-header" onclick="toggle(this.closest('.topic-card'))"><div><h3>1. Classi &amp; Oggetti</h3><div class="topic-sub">Blueprint, istanza, new, this, campi pubblici</div></div><span class="arrow">▼</span></div>
    <div class="topic-body">
      <pre><span class="kw">class</span> <span class="ty">Persona</span> {
    <span class="kw">public</span> <span class="ty">string</span> Nome;
    <span class="kw">public</span> <span class="ty">int</span>    Eta;

    <span class="kw">public</span> <span class="ty">void</span> <span class="fn">Saluta</span>() {
        Console.<span class="fn">WriteLine</span>(<span class="str">$"Ciao, sono {Nome} e ho {Eta} anni."</span>);
    }
}

<span class="cm">// Creazione di un oggetto (istanza):</span>
Persona p = <span class="kw">new</span> <span class="ty">Persona</span>();
p.Nome = <span class="str">"Marco"</span>;
p.Eta  = <span class="num">25</span>;
p.<span class="fn">Saluta</span>();  <span class="cm">// Ciao, sono Marco e ho 25 anni.</span></pre>
      <div class="note">this si riferisce all'istanza corrente dell'oggetto. Serve quando un parametro ha lo stesso nome di un campo.</div>
    </div>
  </div>

  <div class="topic-card">
    <div class="topic-header" onclick="toggle(this.closest('.topic-card'))"><div><h3>2. Costruttori &amp; Object Initializer</h3><div class="topic-sub">Costruttore di default, con parametri, overload, object initializer</div></div><span class="arrow">▼</span></div>
    <div class="topic-body">
      <pre><span class="kw">class</span> <span class="ty">Auto</span> {
    <span class="kw">public</span> <span class="ty">string</span> Marca;
    <span class="kw">public</span> <span class="ty">int</span>    Anno;

    <span class="kw">public</span> <span class="fn">Auto</span>() { Marca = <span class="str">"Sconosciuta"</span>; }         <span class="cm">// default</span>
    <span class="kw">public</span> <span class="fn">Auto</span>(<span class="ty">string</span> marca) { Marca = marca; }        <span class="cm">// con parametro</span>
    <span class="kw">public</span> <span class="fn">Auto</span>(<span class="ty">string</span> marca, <span class="ty">int</span> anno) {
        Marca = marca; Anno = anno;
    }
}

Auto a1 = <span class="kw">new</span> <span class="ty">Auto</span>();
Auto a2 = <span class="kw">new</span> <span class="ty">Auto</span>(<span class="str">"Ferrari"</span>);
Auto a3 = <span class="kw">new</span> <span class="ty">Auto</span>(<span class="str">"Lamborghini"</span>, <span class="num">2023</span>);

<span class="cm">// Object Initializer — imposta proprietà alla creazione:</span>
Auto a4 = <span class="kw">new</span> <span class="ty">Auto</span> { Marca = <span class="str">"BMW"</span>, Anno = <span class="num">2022</span> };</pre>
    </div>
  </div>

  <div class="topic-card">
    <div class="topic-header" onclick="toggle(this.closest('.topic-card'))"><div><h3>3. Proprietà (Properties)</h3><div class="topic-sub">get/set, auto-property, validazione, read-only</div></div><span class="arrow">▼</span></div>
    <div class="topic-body">
      <pre><span class="kw">class</span> <span class="ty">Persona</span> {
    <span class="kw">private</span> <span class="ty">int</span> _eta;

    <span class="cm">// Proprietà con validazione:</span>
    <span class="kw">public</span> <span class="ty">int</span> Eta {
        <span class="kw">get</span> { <span class="kw">return</span> _eta; }
        <span class="kw">set</span> { <span class="kw">if</span> (value >= <span class="num">0</span>) _eta = value; }
    }

    <span class="cm">// Auto-property (sintassi breve):</span>
    <span class="kw">public</span> <span class="ty">string</span> Nome { <span class="kw">get</span>; <span class="kw">set</span>; }

    <span class="cm">// Read-only (imposta solo nel costruttore):</span>
    <span class="kw">public</span> <span class="ty">string</span> CodiceFiscale { <span class="kw">get</span>; <span class="kw">private set</span>; }

    <span class="cm">// Proprietà calcolata:</span>
    <span class="kw">public</span> <span class="ty">bool</span> EMaggiorenne => _eta >= <span class="num">18</span>;
}

Persona p = <span class="kw">new</span> <span class="ty">Persona</span>();
p.Nome = <span class="str">"Marco"</span>;
p.Eta = -<span class="num">5</span>;  <span class="cm">// ignorato dalla validazione</span>
Console.<span class="fn">WriteLine</span>(p.Eta);  <span class="cm">// 0</span></pre>
    </div>
  </div>

  <div class="topic-card">
    <div class="topic-header" onclick="toggle(this.closest('.topic-card'))"><div><h3>4. Incapsulamento</h3><div class="topic-sub">public, private, protected, internal — modificatori di accesso</div></div><span class="arrow">▼</span></div>
    <div class="topic-body">
      <table>
        <tr><th>Modificatore</th><th>Accessibile da</th></tr>
        <tr><td>public</td><td>Ovunque</td></tr>
        <tr><td>private</td><td>Solo dentro la classe</td></tr>
        <tr><td>protected</td><td>Classe + classi derivate</td></tr>
        <tr><td>internal</td><td>Solo nello stesso assembly</td></tr>
        <tr><td>(nessuno)</td><td>private per campi, internal per classi</td></tr>
      </table>
      <pre><span class="kw">class</span> <span class="ty">ContoBancario</span> {
    <span class="kw">private</span> <span class="ty">double</span> _saldo;          <span class="cm">// nascosto</span>
    <span class="kw">public</span>  <span class="ty">double</span> Saldo => _saldo;  <span class="cm">// solo lettura</span>

    <span class="kw">public</span> <span class="ty">void</span> <span class="fn">Deposita</span>(<span class="ty">double</span> importo) {
        <span class="kw">if</span> (importo > <span class="num">0</span>) _saldo += importo;
    }
    <span class="kw">public</span> <span class="ty">bool</span> <span class="fn">Preleva</span>(<span class="ty">double</span> importo) {
        <span class="kw">if</span> (importo > <span class="num">0</span> && importo <= _saldo) { _saldo -= importo; <span class="kw">return</span> <span class="kw">true</span>; }
        <span class="kw">return</span> <span class="kw">false</span>;
    }
}</pre>
    </div>
  </div>

  <div class="topic-card">
    <div class="topic-header" onclick="toggle(this.closest('.topic-card'))"><div><h3>5. Ereditarietà</h3><div class="topic-sub">class Figlia : Padre, base, override, virtual, sealed</div></div><span class="arrow">▼</span></div>
    <div class="topic-body">
      <pre><span class="kw">class</span> <span class="ty">Animale</span> {
    <span class="kw">public</span> <span class="ty">string</span> Nome;
    <span class="kw">public</span> <span class="fn">Animale</span>(<span class="ty">string</span> nome) { Nome = nome; }
    <span class="kw">public</span> <span class="kw">virtual</span> <span class="ty">void</span> <span class="fn">FaiVerso</span>() =>
        Console.<span class="fn">WriteLine</span>(<span class="str">$"{Nome} fa un verso."</span>);
}

<span class="kw">class</span> <span class="ty">Cane</span> : <span class="ty">Animale</span> {
    <span class="kw">public</span> <span class="fn">Cane</span>(<span class="ty">string</span> nome) : <span class="kw">base</span>(nome) { }  <span class="cm">// chiama costruttore padre</span>
    <span class="kw">public</span> <span class="kw">override</span> <span class="ty">void</span> <span class="fn">FaiVerso</span>() =>
        Console.<span class="fn">WriteLine</span>(<span class="str">$"{Nome} dice: Bau!"</span>);
}

Cane c = <span class="kw">new</span> <span class="fn">Cane</span>(<span class="str">"Rex"</span>);
c.<span class="fn">FaiVerso</span>();  <span class="cm">// Rex dice: Bau!</span></pre>
      <div class="note">In C# una classe può ereditare da una sola classe padre (ereditarietà singola), ma può implementare più interfacce.</div>
    </div>
  </div>

  <div class="topic-card">
    <div class="topic-header" onclick="toggle(this.closest('.topic-card'))"><div><h3>6. Interfacce</h3><div class="topic-sub">interface, implementazione multipla, contratto</div></div><span class="arrow">▼</span></div>
    <div class="topic-body">
      <pre><span class="kw">interface</span> <span class="ty">IVolante</span> {
    <span class="ty">void</span> <span class="fn">Decolla</span>();
    <span class="ty">void</span> <span class="fn">Atterra</span>();
    <span class="ty">double</span> Altitudine { <span class="kw">get</span>; }
}

<span class="kw">interface</span> <span class="ty">INuotante</span> { <span class="ty">void</span> <span class="fn">Nuota</span>(); }

<span class="cm">// Una classe può implementare PIÙ interfacce:</span>
<span class="kw">class</span> <span class="ty">Anatra</span> : <span class="ty">IVolante</span>, <span class="ty">INuotante</span> {
    <span class="kw">public</span> <span class="ty">double</span> Altitudine { <span class="kw">get</span>; <span class="kw">private set</span>; }
    <span class="kw">public</span> <span class="ty">void</span> <span class="fn">Decolla</span>() { Console.<span class="fn">WriteLine</span>(<span class="str">"Vola!"</span>); }
    <span class="kw">public</span> <span class="ty">void</span> <span class="fn">Atterra</span>() { Console.<span class="fn">WriteLine</span>(<span class="str">"Atterra!"</span>); }
    <span class="kw">public</span> <span class="ty">void</span> <span class="fn">Nuota</span>()   { Console.<span class="fn">WriteLine</span>(<span class="str">"Nuota!"</span>); }
}</pre>
      <table>
        <tr><th></th><th>Interfaccia</th><th>Classe Astratta</th></tr>
        <tr><td>Implementazione</td><td>Solo firma</td><td>Può avere codice</td></tr>
        <tr><td>Ereditarietà</td><td>Più interfacce</td><td>Una sola classe</td></tr>
        <tr><td>Campi</td><td>Non ammessi</td><td>Ammessi</td></tr>
      </table>
    </div>
  </div>

  <div class="topic-card">
    <div class="topic-header" onclick="toggle(this.closest('.topic-card'))"><div><h3>7. Polimorfismo, Abstract &amp; Sealed</h3><div class="topic-sub">virtual, override, abstract class, sealed</div></div><span class="arrow">▼</span></div>
    <div class="topic-body">
      <pre><span class="cm">// abstract — non si può istanziare direttamente:</span>
<span class="kw">abstract</span> <span class="kw">class</span> <span class="ty">Forma</span> {
    <span class="kw">public</span> <span class="kw">abstract</span> <span class="ty">double</span> <span class="fn">Area</span>();  <span class="cm">// DEVE essere implementato</span>
    <span class="kw">public</span> <span class="ty">void</span> <span class="fn">StampaArea</span>() => Console.<span class="fn">WriteLine</span>(<span class="str">$"Area: {Area():F2}"</span>);
}

<span class="kw">class</span> <span class="ty">Cerchio</span> : <span class="ty">Forma</span> {
    <span class="kw">public</span> <span class="ty">double</span> Raggio;
    <span class="kw">public</span> <span class="fn">Cerchio</span>(<span class="ty">double</span> r) { Raggio = r; }
    <span class="kw">public</span> <span class="kw">override</span> <span class="ty">double</span> <span class="fn">Area</span>() => Math.PI * Raggio * Raggio;
}

<span class="cm">// Polimorfismo — tratta oggetti diversi in modo uniforme:</span>
Forma[] forme = { <span class="kw">new</span> <span class="fn">Cerchio</span>(<span class="num">5</span>), <span class="kw">new</span> <span class="fn">Cerchio</span>(<span class="num">3</span>) };
<span class="kw">foreach</span> (Forma f <span class="kw">in</span> forme) f.<span class="fn">StampaArea</span>();

<span class="cm">// sealed — blocca ulteriori override:</span>
<span class="kw">class</span> <span class="ty">Figlia</span> : <span class="ty">Base</span> {
    <span class="kw">public</span> <span class="kw">sealed</span> <span class="kw">override</span> <span class="ty">void</span> <span class="fn">Metodo</span>() { <span class="cm">/* nessuna classe può fare override di questo */</span> }
}</pre>
    </div>
  </div>

  <div class="topic-card">
    <div class="topic-header" onclick="toggle(this.closest('.topic-card'))"><div><h3>8. Gestione delle Eccezioni</h3><div class="topic-sub">try/catch/finally, throw, eccezioni personalizzate</div></div><span class="arrow">▼</span></div>
    <div class="topic-body">
      <pre><span class="kw">try</span> {
    <span class="ty">int</span> n = <span class="ty">int</span>.<span class="fn">Parse</span>(Console.<span class="fn">ReadLine</span>());
    Console.<span class="fn">WriteLine</span>(<span class="str">$"Numero: {n}"</span>);
}
<span class="kw">catch</span> (FormatException ex) {
    Console.<span class="fn">WriteLine</span>(<span class="str">$"Formato errato: {ex.Message}"</span>);
}
<span class="kw">catch</span> (OverflowException ex) {
    Console.<span class="fn">WriteLine</span>(<span class="str">$"Numero troppo grande: {ex.Message}"</span>);
}
<span class="kw">catch</span> (Exception ex) {
    Console.<span class="fn">WriteLine</span>(<span class="str">$"Errore generico: {ex.Message}"</span>);
}
<span class="kw">finally</span> {
    Console.<span class="fn">WriteLine</span>(<span class="str">"Eseguito SEMPRE, con o senza errore"</span>);
}</pre>
      <h4>throw — lanciare eccezioni</h4>
      <pre><span class="kw">if</span> (importo <= <span class="num">0</span>)
    <span class="kw">throw</span> <span class="kw">new</span> ArgumentException(<span class="str">"Importo deve essere positivo!"</span>);</pre>
      <h4>Eccezione personalizzata</h4>
      <pre><span class="kw">class</span> <span class="ty">SaldoInsufficienteException</span> : Exception {
    <span class="kw">public</span> <span class="ty">double</span> Saldo;
    <span class="kw">public</span> <span class="fn">SaldoInsufficienteException</span>(<span class="ty">double</span> saldo)
        : <span class="kw">base</span>(<span class="str">$"Saldo insufficiente: {saldo}€"</span>) { Saldo = saldo; }
}</pre>
      <table>
        <tr><th>Eccezione</th><th>Causa</th></tr>
        <tr><td>FormatException</td><td>int.Parse("abc")</td></tr>
        <tr><td>NullReferenceException</td><td>Accesso a oggetto null</td></tr>
        <tr><td>IndexOutOfRangeException</td><td>Indice array fuori dai limiti</td></tr>
        <tr><td>DivideByZeroException</td><td>Divisione per zero</td></tr>
        <tr><td>ArgumentException</td><td>Argomento non valido</td></tr>
      </table>
    </div>
  </div>

  <div class="topic-card">
    <div class="topic-header" onclick="toggle(this.closest('.topic-card'))"><div><h3>9. Static &amp; Object Initializer</h3><div class="topic-sub">static class, membri statici, singleton, object initializer</div></div><span class="arrow">▼</span></div>
    <div class="topic-body">
      <pre><span class="cm">// static class — si usa senza new:</span>
<span class="kw">static</span> <span class="kw">class</span> <span class="ty">Matematica</span> {
    <span class="kw">public</span> <span class="kw">static</span> <span class="ty">double</span> PI = <span class="num">3.14159</span>;
    <span class="kw">public</span> <span class="kw">static</span> <span class="ty">int</span> <span class="fn">Quadrato</span>(<span class="ty">int</span> n) => n * n;
}
Console.<span class="fn">WriteLine</span>(Matematica.PI);
Console.<span class="fn">WriteLine</span>(Matematica.<span class="fn">Quadrato</span>(<span class="num">5</span>));  <span class="cm">// 25</span>

<span class="cm">// Membro statico in una classe normale — condiviso tra tutte le istanze:</span>
<span class="kw">class</span> <span class="ty">Contatore</span> {
    <span class="kw">public</span> <span class="kw">static</span> <span class="ty">int</span> Totale = <span class="num">0</span>;
    <span class="kw">public</span> <span class="fn">Contatore</span>() { Totale++; }
}
<span class="kw">new</span> Contatore(); <span class="kw">new</span> Contatore();
Console.<span class="fn">WriteLine</span>(Contatore.Totale);  <span class="cm">// 2</span>

<span class="cm">// Object Initializer:</span>
Persona p = <span class="kw">new</span> Persona { Nome = <span class="str">"Marco"</span>, Eta = <span class="num">25</span> };
<span class="cm">// equivale a: new Persona(); p.Nome = "Marco"; p.Eta = 25;</span></pre>
    </div>
  </div>

  <div class="topic-card">
    <div class="topic-header" onclick="toggle(this.closest('.topic-card'))"><div><h3>10. is, as, typeof — Type Checking</h3><div class="topic-sub">Verificare e convertire tipi a runtime</div></div><span class="arrow">▼</span></div>
    <div class="topic-body">
      <pre><span class="cm">// is — controlla se un oggetto è di un tipo:</span>
<span class="kw">if</span> (animale <span class="kw">is</span> Cane) Console.<span class="fn">WriteLine</span>(<span class="str">"È un cane!"</span>);

<span class="cm">// is con pattern variable (C# 7+):</span>
<span class="kw">if</span> (animale <span class="kw">is</span> Cane cane) {
    cane.<span class="fn">FaiVerso</span>();  <span class="cm">// usa direttamente come Cane</span>
}

<span class="cm">// as — cast sicuro, restituisce null se fallisce:</span>
Cane? cane = animale <span class="kw">as</span> Cane;
<span class="kw">if</span> (cane != <span class="kw">null</span>) cane.<span class="fn">FaiVerso</span>();

<span class="cm">// typeof — tipo in fase di compilazione:</span>
Console.<span class="fn">WriteLine</span>(<span class="kw">typeof</span>(<span class="ty">int</span>));     <span class="cm">// System.Int32</span>
Console.<span class="fn">WriteLine</span>(<span class="kw">typeof</span>(Persona)); <span class="cm">// namespace.Persona</span>

<span class="cm">// GetType() — tipo in fase di esecuzione:</span>
Console.<span class="fn">WriteLine</span>(p.<span class="fn">GetType</span>());     <span class="cm">// tipo reale dell'istanza</span></pre>
    </div>
  </div>
</div>

<!-- MOD III -->
<div class="section" id="section-mod3">
  <div class="section-title">Modulo III — File &amp; Dati <span class="tag tag-m3">MOD III</span></div>

  <div class="topic-card">
    <div class="topic-header" onclick="toggle(this.closest('.topic-card'))"><div><h3>1. File di Testo</h3><div class="topic-sub">File.ReadAllText, WriteAllText, AppendAllText, ReadAllLines</div></div><span class="arrow">▼</span></div>
    <div class="topic-body">
      <pre><span class="kw">using</span> System.IO;

<span class="cm">// Scrittura (sovrascrive o crea):</span>
File.<span class="fn">WriteAllText</span>(<span class="str">"note.txt"</span>, <span class="str">"Ciao Mondo!"</span>);

<span class="cm">// Scrivere più righe:</span>
<span class="ty">string</span>[] righe = { <span class="str">"Riga 1"</span>, <span class="str">"Riga 2"</span>, <span class="str">"Riga 3"</span> };
File.<span class="fn">WriteAllLines</span>(<span class="str">"note.txt"</span>, righe);

<span class="cm">// Aggiungere in fondo (append):</span>
File.<span class="fn">AppendAllText</span>(<span class="str">"note.txt"</span>, <span class="str">"\nNuova riga"</span>);

<span class="cm">// Lettura:</span>
<span class="ty">string</span> testo = File.<span class="fn">ReadAllText</span>(<span class="str">"note.txt"</span>);
<span class="ty">string</span>[] tutteLeRighe = File.<span class="fn">ReadAllLines</span>(<span class="str">"note.txt"</span>);

<span class="cm">// Utilità:</span>
File.<span class="fn">Exists</span>(<span class="str">"note.txt"</span>);    <span class="cm">// true/false</span>
File.<span class="fn">Delete</span>(<span class="str">"note.txt"</span>);    <span class="cm">// elimina</span>
File.<span class="fn">Copy</span>(<span class="str">"src.txt"</span>, <span class="str">"dst.txt"</span>); <span class="cm">// copia</span>
File.<span class="fn">Move</span>(<span class="str">"old.txt"</span>, <span class="str">"new.txt"</span>); <span class="cm">// sposta/rinomina</span></pre>
    </div>
  </div>

  <div class="topic-card">
    <div class="topic-header" onclick="toggle(this.closest('.topic-card'))"><div><h3>2. StreamReader &amp; StreamWriter</h3><div class="topic-sub">Lettura/scrittura riga per riga, encoding, using</div></div><span class="arrow">▼</span></div>
    <div class="topic-body">
      <pre><span class="kw">using</span> System.IO;
<span class="kw">using</span> System.Text;

<span class="cm">// Scrittura con StreamWriter:</span>
<span class="kw">using</span> (StreamWriter sw = <span class="kw">new</span> StreamWriter(<span class="str">"dati.txt"</span>)) {
    sw.<span class="fn">WriteLine</span>(<span class="str">"Prima riga"</span>);
    sw.<span class="fn">WriteLine</span>(<span class="str">"Seconda riga"</span>);
}  <span class="cm">// il using chiude automaticamente lo stream!</span>

<span class="cm">// Append (aggiunta in fondo):</span>
<span class="kw">using</span> (StreamWriter sw = <span class="kw">new</span> StreamWriter(<span class="str">"dati.txt"</span>, append: <span class="kw">true</span>))
    sw.<span class="fn">WriteLine</span>(<span class="str">"Riga aggiunta"</span>);

<span class="cm">// Lettura con StreamReader:</span>
<span class="kw">using</span> (StreamReader sr = <span class="kw">new</span> StreamReader(<span class="str">"dati.txt"</span>)) {
    <span class="ty">string</span> riga;
    <span class="kw">while</span> ((riga = sr.<span class="fn">ReadLine</span>()) != <span class="kw">null</span>)
        Console.<span class="fn">WriteLine</span>(riga);
}

<span class="cm">// Con encoding UTF-8 (per caratteri speciali/accentati):</span>
<span class="kw">using</span> (StreamWriter sw = <span class="kw">new</span> StreamWriter(<span class="str">"file.txt"</span>, <span class="kw">false</span>, Encoding.UTF8))
    sw.<span class="fn">WriteLine</span>(<span class="str">"Testo con accenti: à è ì ò ù"</span>);</pre>
    </div>
  </div>

  <div class="topic-card">
    <div class="topic-header" onclick="toggle(this.closest('.topic-card'))"><div><h3>3. JSON</h3><div class="topic-sub">JsonSerializer.Serialize / Deserialize, opzioni, attributi</div></div><span class="arrow">▼</span></div>
    <div class="topic-body">
      <pre><span class="kw">using</span> System.Text.Json;

<span class="kw">class</span> <span class="ty">Studente</span> {
    <span class="kw">public</span> <span class="ty">string</span> Nome { <span class="kw">get</span>; <span class="kw">set</span>; }
    <span class="kw">public</span> <span class="ty">int</span>    Eta  { <span class="kw">get</span>; <span class="kw">set</span>; }
}

<span class="cm">// Oggetto → JSON:</span>
Studente s = <span class="kw">new</span> Studente { Nome = <span class="str">"Marco"</span>, Eta = <span class="num">20</span> };
<span class="ty">string</span> json = JsonSerializer.<span class="fn">Serialize</span>(s);
<span class="cm">// {"Nome":"Marco","Eta":20}</span>

<span class="cm">// Con formattazione leggibile:</span>
<span class="kw">var</span> opzioni = <span class="kw">new</span> JsonSerializerOptions { WriteIndented = <span class="kw">true</span> };
<span class="ty">string</span> jsonBello = JsonSerializer.<span class="fn">Serialize</span>(s, opzioni);

<span class="cm">// JSON → Oggetto:</span>
Studente letto = JsonSerializer.<span class="fn">Deserialize</span>&lt;Studente&gt;(json);

<span class="cm">// Salvare/caricare da file:</span>
File.<span class="fn">WriteAllText</span>(<span class="str">"studente.json"</span>, jsonBello);
<span class="ty">string</span> jsonDaFile = File.<span class="fn">ReadAllText</span>(<span class="str">"studente.json"</span>);
Studente daFile = JsonSerializer.<span class="fn">Deserialize</span>&lt;Studente&gt;(jsonDaFile);</pre>
    </div>
  </div>

  <div class="topic-card">
    <div class="topic-header" onclick="toggle(this.closest('.topic-card'))"><div><h3>4. XML</h3><div class="topic-sub">XmlSerializer, XDocument, LINQ to XML</div></div><span class="arrow">▼</span></div>
    <div class="topic-body">
      <pre><span class="kw">using</span> System.Xml.Serialization;
<span class="kw">using</span> System.IO;

[Serializable]
<span class="kw">public</span> <span class="kw">class</span> <span class="ty">Prodotto</span> {
    <span class="kw">public</span> <span class="ty">string</span> Nome    { <span class="kw">get</span>; <span class="kw">set</span>; }
    <span class="kw">public</span> <span class="ty">double</span> Prezzo  { <span class="kw">get</span>; <span class="kw">set</span>; }
}

<span class="cm">// Oggetto → XML:</span>
Prodotto p = <span class="kw">new</span> Prodotto { Nome = <span class="str">"Laptop"</span>, Prezzo = <span class="num">999.99</span> };
XmlSerializer ser = <span class="kw">new</span> XmlSerializer(<span class="kw">typeof</span>(Prodotto));
<span class="kw">using</span> (StreamWriter sw = <span class="kw">new</span> StreamWriter(<span class="str">"p.xml"</span>))
    ser.<span class="fn">Serialize</span>(sw, p);

<span class="cm">// XML → Oggetto:</span>
<span class="kw">using</span> (StreamReader sr = <span class="kw">new</span> StreamReader(<span class="str">"p.xml"</span>))
    Prodotto letto = (Prodotto)ser.<span class="fn">Deserialize</span>(sr);</pre>
    </div>
  </div>

  <div class="topic-card">
    <div class="topic-header" onclick="toggle(this.closest('.topic-card'))"><div><h3>5. Eccezioni I/O</h3><div class="topic-sub">FileNotFoundException, IOException, pattern using + try/catch</div></div><span class="arrow">▼</span></div>
    <div class="topic-body">
      <table>
        <tr><th>Eccezione</th><th>Causa</th></tr>
        <tr><td>FileNotFoundException</td><td>File non trovato</td></tr>
        <tr><td>DirectoryNotFoundException</td><td>Directory non trovata</td></tr>
        <tr><td>IOException</td><td>Errore generico I/O</td></tr>
        <tr><td>UnauthorizedAccessException</td><td>Permessi insufficienti</td></tr>
      </table>
      <pre><span class="kw">static</span> <span class="ty">string</span> <span class="fn">LeggiFile</span>(<span class="ty">string</span> percorso) {
    <span class="kw">try</span> { <span class="kw">return</span> File.<span class="fn">ReadAllText</span>(percorso); }
    <span class="kw">catch</span> (FileNotFoundException) {
        Console.<span class="fn">WriteLine</span>(<span class="str">"File non trovato!"</span>); <span class="kw">return</span> <span class="kw">null</span>;
    }
    <span class="kw">catch</span> (IOException ex) {
        Console.<span class="fn">WriteLine</span>(<span class="str">$"Errore I/O: {ex.Message}"</span>); <span class="kw">return</span> <span class="kw">null</span>;
    }
}</pre>
    </div>
  </div>

  <div class="topic-card">
    <div class="topic-header" onclick="toggle(this.closest('.topic-card'))"><div><h3>6. Dictionary&lt;K,V&gt;</h3><div class="topic-sub">Chiave-valore, ContainsKey, TryGetValue, iterazione</div></div><span class="arrow">▼</span></div>
    <div class="topic-body">
      <pre><span class="kw">using</span> System.Collections.Generic;

Dictionary&lt;<span class="ty">string</span>, <span class="ty">int</span>&gt; eta = <span class="kw">new</span>() {
    { <span class="str">"Marco"</span>, <span class="num">25</span> },
    { <span class="str">"Giulia"</span>, <span class="num">30</span> }
};

<span class="cm">// Aggiungere / modificare:</span>
eta[<span class="str">"Luca"</span>] = <span class="num">22</span>;    <span class="cm">// aggiunge</span>
eta[<span class="str">"Marco"</span>] = <span class="num">26</span>; <span class="cm">// modifica</span>

<span class="cm">// Leggere:</span>
Console.<span class="fn">WriteLine</span>(eta[<span class="str">"Giulia"</span>]);  <span class="cm">// 30</span>

<span class="cm">// Accesso sicuro (evita KeyNotFoundException):</span>
<span class="kw">if</span> (eta.<span class="fn">ContainsKey</span>(<span class="str">"Sara"</span>)) Console.<span class="fn">WriteLine</span>(eta[<span class="str">"Sara"</span>]);
<span class="kw">if</span> (eta.<span class="fn">TryGetValue</span>(<span class="str">"Marco"</span>, <span class="kw">out int</span> valore)) Console.<span class="fn">WriteLine</span>(valore);

<span class="cm">// Rimuovere:</span>
eta.<span class="fn">Remove</span>(<span class="str">"Luca"</span>);

<span class="cm">// Iterare:</span>
<span class="kw">foreach</span> (<span class="kw">var</span> coppia <span class="kw">in</span> eta)
    Console.<span class="fn">WriteLine</span>(<span class="str">$"{coppia.Key} ha {coppia.Value} anni"</span>);</pre>
      <table>
        <tr><th></th><th>List&lt;T&gt;</th><th>Dictionary&lt;K,V&gt;</th></tr>
        <tr><td>Accesso</td><td>Per indice [0]</td><td>Per chiave ["nome"]</td></tr>
        <tr><td>Duplicati</td><td>Ammessi</td><td>Chiavi uniche</td></tr>
        <tr><td>Usalo per</td><td>Liste ordinate</td><td>Ricerca per chiave</td></tr>
      </table>
    </div>
  </div>

  <div class="topic-card">
    <div class="topic-header" onclick="toggle(this.closest('.topic-card'))"><div><h3>7. Classe Path</h3><div class="topic-sub">Path.Combine, GetFileName, GetExtension, GetDirectoryName</div></div><span class="arrow">▼</span></div>
    <div class="topic-body">
      <pre><span class="kw">using</span> System.IO;

<span class="ty">string</span> path = Path.<span class="fn">Combine</span>(<span class="str">"C:\\Users"</span>, <span class="str">"Marco"</span>, <span class="str">"doc.txt"</span>);
<span class="cm">// → C:\Users\Marco\doc.txt</span>

Path.<span class="fn">GetFileName</span>(path);                 <span class="cm">// "doc.txt"</span>
Path.<span class="fn">GetFileNameWithoutExtension</span>(path);  <span class="cm">// "doc"</span>
Path.<span class="fn">GetExtension</span>(path);                <span class="cm">// ".txt"</span>
Path.<span class="fn">GetDirectoryName</span>(path);            <span class="cm">// "C:\Users\Marco"</span>
Path.<span class="fn">GetFullPath</span>(<span class="str">"note.txt"</span>);           <span class="cm">// percorso assoluto completo</span>
Path.<span class="fn">GetTempPath</span>();                     <span class="cm">// cartella temp del sistema</span>
Path.<span class="fn">ChangeExtension</span>(path, <span class="str">".pdf"</span>);    <span class="cm">// "C:\Users\Marco\doc.pdf"</span></pre>
      <div class="tip">Usa sempre Path.Combine invece di concatenare con \ — funziona su Windows, Mac e Linux!</div>
    </div>
  </div>
</div>

<!-- MOD IV -->
<div class="section" id="section-mod4">
  <div class="section-title">Modulo IV — Avanzato <span class="tag tag-m4">MOD IV</span></div>

  <div class="topic-card">
    <div class="topic-header" onclick="toggle(this.closest('.topic-card'))"><div><h3>1. LINQ</h3><div class="topic-sub">Where, Select, OrderBy, GroupBy, First, Count, Sum, Any, All</div></div><span class="arrow">▼</span></div>
    <div class="topic-body">
      <p>LINQ (Language Integrated Query) permette di interrogare collezioni come se fossero database.</p>
      <pre><span class="kw">using</span> System.Linq;

List&lt;<span class="ty">int</span>&gt; numeri = <span class="kw">new</span>() { <span class="num">1</span>,<span class="num">2</span>,<span class="num">3</span>,<span class="num">4</span>,<span class="num">5</span>,<span class="num">6</span>,<span class="num">7</span>,<span class="num">8</span>,<span class="num">9</span>,<span class="num">10</span> };

<span class="cm">// Where — filtra:</span>
<span class="kw">var</span> pari = numeri.<span class="fn">Where</span>(n => n % <span class="num">2</span> == <span class="num">0</span>);  <span class="cm">// 2,4,6,8,10</span>

<span class="cm">// Select — trasforma:</span>
<span class="kw">var</span> quadrati = numeri.<span class="fn">Select</span>(n => n * n);   <span class="cm">// 1,4,9,16…</span>

<span class="cm">// OrderBy / OrderByDescending:</span>
<span class="kw">var</span> ordinati = numeri.<span class="fn">OrderByDescending</span>(n => n);

<span class="cm">// First / FirstOrDefault:</span>
<span class="ty">int</span> primo = numeri.<span class="fn">First</span>(n => n > <span class="num">5</span>);   <span class="cm">// 6 (lancia eccezione se non trovato)</span>
<span class="ty">int</span> safe  = numeri.<span class="fn">FirstOrDefault</span>(n => n > <span class="num">100</span>);  <span class="cm">// 0 (default)</span>

<span class="cm">// Aggregazioni:</span>
<span class="ty">int</span> somma = numeri.<span class="fn">Sum</span>();
<span class="ty">double</span> media = numeri.<span class="fn">Average</span>();
<span class="ty">int</span> max = numeri.<span class="fn">Max</span>();
<span class="ty">int</span> conteggio = numeri.<span class="fn">Count</span>(n => n > <span class="num">5</span>);

<span class="cm">// Any / All:</span>
<span class="ty">bool</span> haNegativi = numeri.<span class="fn">Any</span>(n => n < <span class="num">0</span>);   <span class="cm">// false</span>
<span class="ty">bool</span> tuttiPos   = numeri.<span class="fn">All</span>(n => n > <span class="num">0</span>);   <span class="cm">// true</span>

<span class="cm">// Concatenazione:</span>
<span class="kw">var</span> risultato = numeri
    .<span class="fn">Where</span>(n => n % <span class="num">2</span> == <span class="num">0</span>)
    .<span class="fn">Select</span>(n => n * <span class="num">10</span>)
    .<span class="fn">OrderBy</span>(n => n)
    .<span class="fn">ToList</span>();

<span class="cm">// GroupBy:</span>
<span class="kw">var</span> gruppi = numeri.<span class="fn">GroupBy</span>(n => n % <span class="num">2</span> == <span class="num">0</span> ? <span class="str">"pari"</span> : <span class="str">"dispari"</span>);
<span class="kw">foreach</span> (<span class="kw">var</span> g <span class="kw">in</span> gruppi)
    Console.<span class="fn">WriteLine</span>(<span class="str">$"{g.Key}: {string.Join(", ", g)}"</span>);

<span class="cm">// Sintassi query (alternativa):</span>
<span class="kw">var</span> query = <span class="kw">from</span> n <span class="kw">in</span> numeri
            <span class="kw">where</span> n > <span class="num">5</span>
            <span class="kw">orderby</span> n
            <span class="kw">select</span> n;</pre>
    </div>
  </div>

  <div class="topic-card">
    <div class="topic-header" onclick="toggle(this.closest('.topic-card'))"><div><h3>2. Generics &lt;T&gt;</h3><div class="topic-sub">Classi e metodi generici, constraints where T:</div></div><span class="arrow">▼</span></div>
    <div class="topic-body">
      <pre><span class="cm">// Metodo generico — funziona con qualsiasi tipo:</span>
<span class="kw">static</span> <span class="ty">void</span> <span class="fn">Stampa</span>&lt;T&gt;(T valore) =>
    Console.<span class="fn">WriteLine</span>(<span class="str">$"Valore: {valore} (tipo: {typeof(T).Name})"</span>);

<span class="fn">Stampa</span>(<span class="num">42</span>);        <span class="cm">// int</span>
<span class="fn">Stampa</span>(<span class="str">"Ciao"</span>);   <span class="cm">// string</span>
<span class="fn">Stampa</span>(<span class="num">3.14</span>);     <span class="cm">// double</span>

<span class="cm">// Classe generica:</span>
<span class="kw">class</span> <span class="ty">Scatola</span>&lt;T&gt; {
    <span class="kw">public</span> T Contenuto { <span class="kw">get</span>; <span class="kw">set</span>; }
    <span class="kw">public</span> <span class="fn">Scatola</span>(T contenuto) { Contenuto = contenuto; }
    <span class="kw">public</span> <span class="ty">string</span> <span class="fn">Descrivi</span>() => <span class="str">$"Contiene: {Contenuto}"</span>;
}

Scatola&lt;<span class="ty">int</span>&gt;    s1 = <span class="kw">new</span>(<span class="num">42</span>);
Scatola&lt;<span class="ty">string</span>&gt; s2 = <span class="kw">new</span>(<span class="str">"Ciao"</span>);

<span class="cm">// Constraints — limitare il tipo:</span>
<span class="kw">static</span> T <span class="fn">Massimo</span>&lt;T&gt;(T a, T b) <span class="kw">where</span> T : IComparable&lt;T&gt;
    => a.CompareTo(b) > <span class="num">0</span> ? a : b;

<span class="fn">Massimo</span>(<span class="num">3</span>, <span class="num">7</span>);        <span class="cm">// 7</span>
<span class="fn">Massimo</span>(<span class="str">"abc"</span>, <span class="str">"xyz"</span>); <span class="cm">// "xyz"</span></pre>
    </div>
  </div>

  <div class="topic-card">
    <div class="topic-header" onclick="toggle(this.closest('.topic-card'))"><div><h3>3. Delegates &amp; Events</h3><div class="topic-sub">delegate, Func, Action, Predicate, event</div></div><span class="arrow">▼</span></div>
    <div class="topic-body">
      <pre><span class="cm">// Delegate — puntatore a un metodo:</span>
<span class="kw">delegate</span> <span class="ty">int</span> Operazione(<span class="ty">int</span> a, <span class="ty">int</span> b);

<span class="kw">static</span> <span class="ty">int</span> <span class="fn">Somma</span>(<span class="ty">int</span> a, <span class="ty">int</span> b) => a + b;
<span class="kw">static</span> <span class="ty">int</span> <span class="fn">Prodotto</span>(<span class="ty">int</span> a, <span class="ty">int</span> b) => a * b;

Operazione op = Somma;
Console.<span class="fn">WriteLine</span>(op(<span class="num">3</span>, <span class="num">4</span>));   <span class="cm">// 7</span>
op = Prodotto;
Console.<span class="fn">WriteLine</span>(op(<span class="num">3</span>, <span class="num">4</span>));   <span class="cm">// 12</span>

<span class="cm">// Func&lt;...&gt; — delegate che restituisce un valore:</span>
Func&lt;<span class="ty">int</span>, <span class="ty">int</span>, <span class="ty">int</span>&gt; somma = (a, b) => a + b;
Func&lt;<span class="ty">string</span>, <span class="ty">int</span>&gt;   lunghezza = s => s.Length;

<span class="cm">// Action&lt;...&gt; — delegate void:</span>
Action&lt;<span class="ty">string</span>&gt; stampa = s => Console.<span class="fn">WriteLine</span>(s);
stampa(<span class="str">"Ciao!"</span>);

<span class="cm">// Predicate&lt;T&gt; — delegate che restituisce bool:</span>
Predicate&lt;<span class="ty">int</span>&gt; ePari = n => n % <span class="num">2</span> == <span class="num">0</span>;

<span class="cm">// Event:</span>
<span class="kw">class</span> <span class="ty">Bottone</span> {
    <span class="kw">public</span> <span class="kw">event</span> Action Click;
    <span class="kw">public</span> <span class="ty">void</span> <span class="fn">Premi</span>() => Click?.Invoke();
}
Bottone b = <span class="kw">new</span>();
b.Click += () => Console.<span class="fn">WriteLine</span>(<span class="str">"Cliccato!"</span>);
b.<span class="fn">Premi</span>();</pre>
    </div>
  </div>

  <div class="topic-card">
    <div class="topic-header" onclick="toggle(this.closest('.topic-card'))"><div><h3>4. Lambda &amp; Closures</h3><div class="topic-sub">Espressioni lambda, variabili catturate, metodi anonimi</div></div><span class="arrow">▼</span></div>
    <div class="topic-body">
      <pre><span class="cm">// Sintassi lambda:</span>
<span class="cm">// (parametri) => espressione</span>
<span class="cm">// (parametri) => { blocco di codice }</span>

Func&lt;<span class="ty">int</span>, <span class="ty">int</span>&gt; quadrato = x => x * x;
Func&lt;<span class="ty">int</span>, <span class="ty">int</span>, <span class="ty">int</span>&gt; somma = (a, b) => a + b;
Action saluta = () => Console.<span class="fn">WriteLine</span>(<span class="str">"Ciao!"</span>);

<span class="cm">// Lambda con corpo:</span>
Func&lt;<span class="ty">int</span>, <span class="ty">string</span>&gt; classifica = n => {
    <span class="kw">if</span> (n >= <span class="num">90</span>) <span class="kw">return</span> <span class="str">"Ottimo"</span>;
    <span class="kw">if</span> (n >= <span class="num">60</span>) <span class="kw">return</span> <span class="str">"Sufficiente"</span>;
    <span class="kw">return</span> <span class="str">"Insufficiente"</span>;
};

<span class="cm">// Closure — cattura variabile esterna:</span>
<span class="ty">int</span> moltiplicatore = <span class="num">3</span>;
Func&lt;<span class="ty">int</span>, <span class="ty">int</span>&gt; moltiplica = n => n * moltiplicatore;
Console.<span class="fn">WriteLine</span>(moltiplica(<span class="num">5</span>));  <span class="cm">// 15</span>
moltiplicatore = <span class="num">10</span>;
Console.<span class="fn">WriteLine</span>(moltiplica(<span class="num">5</span>));  <span class="cm">// 50 ← usa il valore aggiornato!</span></pre>
    </div>
  </div>

  <div class="topic-card">
    <div class="topic-header" onclick="toggle(this.closest('.topic-card'))"><div><h3>5. async / await</h3><div class="topic-sub">Task, async, await, Task.WhenAll, Task.WhenAny</div></div><span class="arrow">▼</span></div>
    <div class="topic-body">
      <pre><span class="kw">using</span> System.Threading.Tasks;

<span class="cm">// Metodo asincrono — non blocca il thread:</span>
<span class="kw">static</span> <span class="kw">async</span> Task&lt;<span class="ty">string</span>&gt; <span class="fn">ScaricaDati</span>() {
    <span class="kw">await</span> Task.<span class="fn">Delay</span>(<span class="num">2000</span>);  <span class="cm">// simula attesa 2 secondi</span>
    <span class="kw">return</span> <span class="str">"Dati scaricati!"</span>;
}

<span class="cm">// Chiamata:</span>
<span class="kw">static</span> <span class="kw">async</span> Task <span class="fn">Main</span>(<span class="ty">string</span>[] args) {
    Console.<span class="fn">WriteLine</span>(<span class="str">"Inizio..."</span>);
    <span class="ty">string</span> risultato = <span class="kw">await</span> <span class="fn">ScaricaDati</span>();
    Console.<span class="fn">WriteLine</span>(risultato);
}

<span class="cm">// Task.WhenAll — esegue più task in parallelo:</span>
Task&lt;<span class="ty">string</span>&gt; t1 = <span class="fn">ScaricaDati</span>();
Task&lt;<span class="ty">string</span>&gt; t2 = <span class="fn">ScaricaDati</span>();
<span class="ty">string</span>[] risultati = <span class="kw">await</span> Task.<span class="fn">WhenAll</span>(t1, t2);

<span class="cm">// void async (per event handler):</span>
<span class="kw">async</span> <span class="ty">void</span> <span class="fn">OnClick</span>() {
    <span class="kw">await</span> Task.<span class="fn">Delay</span>(<span class="num">1000</span>);
    Console.<span class="fn">WriteLine</span>(<span class="str">"Fatto!"</span>);
}</pre>
      <table>
        <tr><th>Tipo di ritorno</th><th>Usa quando</th></tr>
        <tr><td>Task</td><td>Metodo async void (operazioni)</td></tr>
        <tr><td>Task&lt;T&gt;</td><td>Metodo async che restituisce T</td></tr>
        <tr><td>async void</td><td>Solo per event handler</td></tr>
      </table>
    </div>
  </div>

  <div class="topic-card">
    <div class="topic-header" onclick="toggle(this.closest('.topic-card'))"><div><h3>6. DateTime &amp; TimeSpan</h3><div class="topic-sub">Now, Today, Parse, Format, Add, differenza tra date</div></div><span class="arrow">▼</span></div>
    <div class="topic-body">
      <pre><span class="cm">// Ottenere la data/ora corrente:</span>
DateTime ora  = DateTime.Now;    <span class="cm">// data e ora locali</span>
DateTime oggi = DateTime.Today;  <span class="cm">// solo data (ora = 00:00:00)</span>
DateTime utc  = DateTime.UtcNow; <span class="cm">// UTC</span>

<span class="cm">// Creare una data specifica:</span>
DateTime natale = <span class="kw">new</span> DateTime(<span class="num">2025</span>, <span class="num">12</span>, <span class="num">25</span>);
DateTime precisa = <span class="kw">new</span> DateTime(<span class="num">2025</span>, <span class="num">12</span>, <span class="num">25</span>, <span class="num">18</span>, <span class="num">30</span>, <span class="num">0</span>); <span class="cm">// 18:30:00</span>

<span class="cm">// Formattazione:</span>
Console.<span class="fn">WriteLine</span>(ora.<span class="fn">ToString</span>(<span class="str">"dd/MM/yyyy"</span>));        <span class="cm">// 25/12/2025</span>
Console.<span class="fn">WriteLine</span>(ora.<span class="fn">ToString</span>(<span class="str">"HH:mm:ss"</span>));           <span class="cm">// 18:30:00</span>
Console.<span class="fn">WriteLine</span>(ora.<span class="fn">ToString</span>(<span class="str">"dd/MM/yyyy HH:mm"</span>));  <span class="cm">// 25/12/2025 18:30</span>
Console.<span class="fn">WriteLine</span>(<span class="str">$"Oggi è {ora:dddd d MMMM yyyy}"</span>);   <span class="cm">// Giovedì 25 Dicembre 2025</span>

<span class="cm">// Aggiungere/sottrarre tempo:</span>
DateTime domani     = oggi.<span class="fn">AddDays</span>(<span class="num">1</span>);
DateTime settimana  = oggi.<span class="fn">AddDays</span>(<span class="num">7</span>);
DateTime mesePrima  = oggi.<span class="fn">AddMonths</span>(-<span class="num">1</span>);
DateTime tra2ore    = ora.<span class="fn">AddHours</span>(<span class="num">2</span>);

<span class="cm">// Proprietà:</span>
Console.<span class="fn">WriteLine</span>(ora.Year);        <span class="cm">// 2025</span>
Console.<span class="fn">WriteLine</span>(ora.Month);       <span class="cm">// 12</span>
Console.<span class="fn">WriteLine</span>(ora.Day);         <span class="cm">// 25</span>
Console.<span class="fn">WriteLine</span>(ora.DayOfWeek);   <span class="cm">// Thursday</span>

<span class="cm">// TimeSpan — differenza tra date:</span>
TimeSpan diff = natale - oggi;
Console.<span class="fn">WriteLine</span>(<span class="str">$"Giorni a Natale: {diff.Days}"</span>);

<span class="cm">// Parse:</span>
DateTime d = DateTime.<span class="fn">Parse</span>(<span class="str">"25/12/2025"</span>);
<span class="ty">bool</span> ok = DateTime.<span class="fn">TryParse</span>(<span class="str">"abc"</span>, <span class="kw">out</span> DateTime result);</pre>
    </div>
  </div>

  <div class="topic-card">
    <div class="topic-header" onclick="toggle(this.closest('.topic-card'))"><div><h3>7. StringBuilder</h3><div class="topic-sub">Append, Insert, Replace, Remove — performance per stringhe lunghe</div></div><span class="arrow">▼</span></div>
    <div class="topic-body">
      <p>Le stringhe normali sono <strong>immutabili</strong> — ogni += crea una nuova stringa. StringBuilder modifica il buffer direttamente, molto più efficiente per molte concatenazioni.</p>
      <pre><span class="kw">using</span> System.Text;

StringBuilder sb = <span class="kw">new</span> StringBuilder();
sb.<span class="fn">Append</span>(<span class="str">"Ciao"</span>);
sb.<span class="fn">Append</span>(<span class="str">" "</span>);
sb.<span class="fn">Append</span>(<span class="str">"Mondo"</span>);
sb.<span class="fn">AppendLine</span>(<span class="str">"!"</span>);         <span class="cm">// aggiunge + \n</span>
sb.<span class="fn">Insert</span>(<span class="num">0</span>, <span class="str">">>> "</span>);       <span class="cm">// inserisce in posizione 0</span>
sb.<span class="fn">Replace</span>(<span class="str">"Mondo"</span>, <span class="str">"Italia"</span>); <span class="cm">// sostituisce</span>
sb.<span class="fn">Remove</span>(<span class="num">0</span>, <span class="num">4</span>);             <span class="cm">// rimuove 4 caratteri da posizione 0</span>
Console.<span class="fn">WriteLine</span>(sb.Length); <span class="cm">// lunghezza buffer</span>
<span class="ty">string</span> risultato = sb.<span class="fn">ToString</span>(); <span class="cm">// converte in stringa</span>
sb.<span class="fn">Clear</span>();                   <span class="cm">// svuota</span></pre>
      <div class="warn">Per meno di ~10 concatenazioni, usa += normale. StringBuilder conviene per loop con molte operazioni.</div>
    </div>
  </div>

  <div class="topic-card">
    <div class="topic-header" onclick="toggle(this.closest('.topic-card'))"><div><h3>8. Random &amp; Utilità</h3><div class="topic-sub">Random, Next, NextDouble, Shuffle, Math completa</div></div><span class="arrow">▼</span></div>
    <div class="topic-body">
      <pre><span class="cm">// Random:</span>
Random rnd = <span class="kw">new</span> Random();
<span class="ty">int</span>    n1 = rnd.<span class="fn">Next</span>();           <span class="cm">// numero casuale qualsiasi</span>
<span class="ty">int</span>    n2 = rnd.<span class="fn">Next</span>(<span class="num">10</span>);         <span class="cm">// 0–9</span>
<span class="ty">int</span>    n3 = rnd.<span class="fn">Next</span>(<span class="num">1</span>, <span class="num">101</span>);     <span class="cm">// 1–100</span>
<span class="ty">double</span> d  = rnd.<span class="fn">NextDouble</span>();     <span class="cm">// 0.0–1.0</span>

<span class="cm">// Random con seed (stessa sequenza):</span>
Random rndFisso = <span class="kw">new</span> Random(<span class="num">42</span>);

<span class="cm">// Mescolare una lista:</span>
List&lt;<span class="ty">int</span>&gt; lista = <span class="kw">new</span>() { <span class="num">1</span>,<span class="num">2</span>,<span class="num">3</span>,<span class="num">4</span>,<span class="num">5</span> };
<span class="kw">var</span> mescolata = lista.<span class="fn">OrderBy</span>(_ => rnd.<span class="fn">Next</span>()).<span class="fn">ToList</span>();

<span class="cm">// Scegliere elemento casuale:</span>
<span class="ty">string</span>[] nomi = { <span class="str">"Marco"</span>, <span class="str">"Giulia"</span>, <span class="str">"Luca"</span> };
<span class="ty">string</span> casuale = nomi[rnd.<span class="fn">Next</span>(nomi.Length)];</pre>
    </div>
  </div>
</div>

<!-- MOD V -->
<div class="section" id="section-mod5">
  <div class="section-title">Modulo V — Extra &amp; Moderno <span class="tag tag-m5">MOD V</span></div>

  <div class="topic-card">
    <div class="topic-header" onclick="toggle(this.closest('.topic-card'))"><div><h3>1. Tuple &amp; ValueTuple</h3><div class="topic-sub">Ritorno multiplo, named tuples, decostruzione</div></div><span class="arrow">▼</span></div>
    <div class="topic-body">
      <pre><span class="cm">// Tuple — restituire più valori da un metodo:</span>
<span class="kw">static</span> (int min, int max) <span class="fn">TrovaMinMax</span>(<span class="ty">int</span>[] arr) {
    <span class="kw">return</span> (arr.<span class="fn">Min</span>(), arr.<span class="fn">Max</span>());
}

<span class="ty">int</span>[] numeri = { <span class="num">3</span>, <span class="num">1</span>, <span class="num">7</span>, <span class="num">2</span>, <span class="num">9</span> };
<span class="kw">var</span> (min, max) = <span class="fn">TrovaMinMax</span>(numeri);  <span class="cm">// decostruzione</span>
Console.<span class="fn">WriteLine</span>(<span class="str">$"Min: {min}, Max: {max}"</span>);

<span class="cm">// Named tuple:</span>
(<span class="ty">string</span> Nome, <span class="ty">int</span> Eta) persona = (<span class="str">"Marco"</span>, <span class="num">25</span>);
Console.<span class="fn">WriteLine</span>(persona.Nome);  <span class="cm">// "Marco"</span>
Console.<span class="fn">WriteLine</span>(persona.Eta);   <span class="cm">// 25</span>

<span class="cm">// Tuple anonima:</span>
<span class="kw">var</span> t = (<span class="num">1</span>, <span class="str">"ciao"</span>, <span class="kw">true</span>);
Console.<span class="fn">WriteLine</span>(t.Item1);  <span class="cm">// 1</span>
Console.<span class="fn">WriteLine</span>(t.Item2);  <span class="cm">// "ciao"</span></pre>
    </div>
  </div>

  <div class="topic-card">
    <div class="topic-header" onclick="toggle(this.closest('.topic-card'))"><div><h3>2. Pattern Matching</h3><div class="topic-sub">switch expression avanzata, is, when, positional patterns</div></div><span class="arrow">▼</span></div>
    <div class="topic-body">
      <pre><span class="cm">// Pattern con is:</span>
<span class="kw">if</span> (obj <span class="kw">is</span> <span class="ty">int</span> n && n > <span class="num">0</span>) Console.<span class="fn">WriteLine</span>(<span class="str">$"Intero positivo: {n}"</span>);
<span class="kw">if</span> (obj <span class="kw">is</span> <span class="ty">string</span> s && s.Length > <span class="num">5</span>) Console.<span class="fn">WriteLine</span>(<span class="str">$"Stringa lunga: {s}"</span>);
<span class="kw">if</span> (obj <span class="kw">is</span> <span class="kw">null</span>) Console.<span class="fn">WriteLine</span>(<span class="str">"È null"</span>);
<span class="kw">if</span> (obj <span class="kw">is not</span> <span class="kw">null</span>) Console.<span class="fn">WriteLine</span>(<span class="str">"Non è null"</span>);

<span class="cm">// switch expression con pattern:</span>
<span class="ty">string</span> Descrivi(object obj) => obj <span class="kw">switch</span> {
    <span class="ty">int</span> n <span class="kw">when</span> n < <span class="num">0</span>   => <span class="str">"negativo"</span>,
    <span class="ty">int</span> n <span class="kw">when</span> n == <span class="num">0</span>  => <span class="str">"zero"</span>,
    <span class="ty">int</span> n               => <span class="str">$"positivo {n}"</span>,
    <span class="ty">string</span> s            => <span class="str">$"stringa: {s}"</span>,
    <span class="kw">null</span>                => <span class="str">"null"</span>,
    _                   => <span class="str">"altro"</span>
};

<span class="cm">// Range pattern (C# 9+):</span>
<span class="ty">string</span> Giudizio(<span class="ty">int</span> voto) => voto <span class="kw">switch</span> {
    >= <span class="num">90</span>         => <span class="str">"Ottimo"</span>,
    >= <span class="num">75</span> <span class="kw">and</span> < <span class="num">90</span> => <span class="str">"Buono"</span>,
    >= <span class="num">60</span>         => <span class="str">"Sufficiente"</span>,
    _             => <span class="str">"Insufficiente"</span>
};</pre>
    </div>
  </div>

  <div class="topic-card">
    <div class="topic-header" onclick="toggle(this.closest('.topic-card'))"><div><h3>3. Record</h3><div class="topic-sub">Immutabilità, with expression, value equality (C# 9+)</div></div><span class="arrow">▼</span></div>
    <div class="topic-body">
      <pre><span class="cm">// Record — tipo immutabile con uguaglianza per valore:</span>
<span class="kw">record</span> <span class="ty">Persona</span>(<span class="ty">string</span> Nome, <span class="ty">int</span> Eta);

Persona p1 = <span class="kw">new</span>(<span class="str">"Marco"</span>, <span class="num">25</span>);
Persona p2 = <span class="kw">new</span>(<span class="str">"Marco"</span>, <span class="num">25</span>);

Console.<span class="fn">WriteLine</span>(p1 == p2);     <span class="cm">// true! (valore, non riferimento)</span>
Console.<span class="fn">WriteLine</span>(p1);           <span class="cm">// Persona { Nome = Marco, Eta = 25 }</span>

<span class="cm">// with — crea una copia modificando alcuni valori:</span>
Persona p3 = p1 <span class="kw">with</span> { Eta = <span class="num">30</span> };
Console.<span class="fn">WriteLine</span>(p3);  <span class="cm">// Persona { Nome = Marco, Eta = 30 }</span>

<span class="cm">// Record con corpo (aggiungere metodi):</span>
<span class="kw">record</span> <span class="ty">Prodotto</span>(<span class="ty">string</span> Nome, <span class="ty">double</span> Prezzo) {
    <span class="kw">public</span> <span class="ty">string</span> <span class="fn">Descrivi</span>() => <span class="str">$"{Nome}: €{Prezzo:F2}"</span>;
}</pre>
      <div class="note">Record sono ideali per DTO (Data Transfer Objects), modelli di dati, configurazioni — qualsiasi cosa che non deve cambiare dopo la creazione.</div>
    </div>
  </div>

  <div class="topic-card">
    <div class="topic-header" onclick="toggle(this.closest('.topic-card'))"><div><h3>4. HashSet, Queue &amp; Stack</h3><div class="topic-sub">Collezioni specializzate, unicità, FIFO, LIFO</div></div><span class="arrow">▼</span></div>
    <div class="topic-body">
      <h4>HashSet — elementi unici</h4>
      <pre>HashSet&lt;<span class="ty">string</span>&gt; hs = <span class="kw">new</span>() { <span class="str">"a"</span>, <span class="str">"b"</span>, <span class="str">"c"</span> };
hs.<span class="fn">Add</span>(<span class="str">"a"</span>);         <span class="cm">// ignorato, già presente</span>
hs.<span class="fn">Contains</span>(<span class="str">"b"</span>);   <span class="cm">// true — O(1)!</span>
hs.<span class="fn">Remove</span>(<span class="str">"c"</span>);
Console.<span class="fn">WriteLine</span>(hs.Count);  <span class="cm">// 2</span>

<span class="cm">// Operazioni insiemistiche:</span>
hs.<span class="fn">UnionWith</span>(altro);     <span class="cm">// unione</span>
hs.<span class="fn">IntersectWith</span>(altro); <span class="cm">// intersezione</span>
hs.<span class="fn">ExceptWith</span>(altro);    <span class="cm">// differenza</span></pre>
      <h4>Queue — FIFO (primo entrato, primo uscito)</h4>
      <pre>Queue&lt;<span class="ty">string</span>&gt; fila = <span class="kw">new</span>();
fila.<span class="fn">Enqueue</span>(<span class="str">"primo"</span>);
fila.<span class="fn">Enqueue</span>(<span class="str">"secondo"</span>);
<span class="ty">string</span> prossimo = fila.<span class="fn">Dequeue</span>();   <span class="cm">// "primo" (ed è rimosso)</span>
<span class="ty">string</span> spia     = fila.<span class="fn">Peek</span>();     <span class="cm">// "secondo" (non rimosso)</span></pre>
      <h4>Stack — LIFO (ultimo entrato, primo uscito)</h4>
      <pre>Stack&lt;<span class="ty">int</span>&gt; pila = <span class="kw">new</span>();
pila.<span class="fn">Push</span>(<span class="num">1</span>); pila.<span class="fn">Push</span>(<span class="num">2</span>); pila.<span class="fn">Push</span>(<span class="num">3</span>);
<span class="ty">int</span> cima = pila.<span class="fn">Pop</span>();   <span class="cm">// 3 (ed è rimosso)</span>
<span class="ty">int</span> spia  = pila.<span class="fn">Peek</span>(); <span class="cm">// 2 (non rimosso)</span></pre>
    </div>
  </div>

  <div class="topic-card">
    <div class="topic-header" onclick="toggle(this.closest('.topic-card'))"><div><h3>5. Regular Expressions (Regex)</h3><div class="topic-sub">IsMatch, Match, Replace, Groups</div></div><span class="arrow">▼</span></div>
    <div class="topic-body">
      <pre><span class="kw">using</span> System.Text.RegularExpressions;

<span class="cm">// IsMatch — controlla se corrisponde:</span>
<span class="ty">bool</span> eEmail = Regex.<span class="fn">IsMatch</span>(testo, <span class="str">@"^[\w.-]+@[\w.-]+\.\w+$"</span>);
<span class="ty">bool</span> eNumero = Regex.<span class="fn">IsMatch</span>(testo, <span class="str">@"^\d+$"</span>);

<span class="cm">// Match — trova prima corrispondenza:</span>
Match m = Regex.<span class="fn">Match</span>(<span class="str">"Ciao Marco 123"</span>, <span class="str">@"\d+"</span>);
<span class="kw">if</span> (m.Success) Console.<span class="fn">WriteLine</span>(m.Value);  <span class="cm">// "123"</span>

<span class="cm">// Matches — tutte le corrispondenze:</span>
MatchCollection mc = Regex.<span class="fn">Matches</span>(<span class="str">"uno1 due2 tre3"</span>, <span class="str">@"\d"</span>);
<span class="kw">foreach</span> (Match match <span class="kw">in</span> mc) Console.<span class="fn">Write</span>(match.Value + <span class="str">" "</span>); <span class="cm">// 1 2 3</span>

<span class="cm">// Replace:</span>
<span class="ty">string</span> pulito = Regex.<span class="fn">Replace</span>(<span class="str">"Hello   World"</span>, <span class="str">@"\s+"</span>, <span class="str">" "</span>);  <span class="cm">// "Hello World"</span>

<span class="cm">// Gruppi di cattura:</span>
Match data = Regex.<span class="fn">Match</span>(<span class="str">"25/12/2025"</span>, <span class="str">@"(\d{2})/(\d{2})/(\d{4})"</span>);
Console.<span class="fn">WriteLine</span>(data.Groups[<span class="num">1</span>].Value);  <span class="cm">// "25"</span>
Console.<span class="fn">WriteLine</span>(data.Groups[<span class="num">3</span>].Value);  <span class="cm">// "2025"</span></pre>
      <h4>Pattern comuni</h4>
      <table>
        <tr><th>Pattern</th><th>Significato</th></tr>
        <tr><td>\d</td><td>cifra (0-9)</td></tr>
        <tr><td>\w</td><td>parola (a-z, A-Z, 0-9, _)</td></tr>
        <tr><td>\s</td><td>spazio bianco</td></tr>
        <tr><td>.</td><td>qualsiasi carattere</td></tr>
        <tr><td>*</td><td>0 o più volte</td></tr>
        <tr><td>+</td><td>1 o più volte</td></tr>
        <tr><td>^</td><td>inizio stringa</td></tr>
        <tr><td>$</td><td>fine stringa</td></tr>
      </table>
    </div>
  </div>

  <div class="topic-card">
    <div class="topic-header" onclick="toggle(this.closest('.topic-card'))"><div><h3>6. Preprocessore &amp; Attributi</h3><div class="topic-sub">#region, #if DEBUG, [Obsolete], [Serializable], [Conditional]</div></div><span class="arrow">▼</span></div>
    <div class="topic-body">
      <h4>Direttive del preprocessore</h4>
      <pre><span class="cm">// #region — organizza il codice in blocchi espandibili:</span>
<span class="kw">#region</span> Metodi di utilità
<span class="kw">static</span> <span class="ty">void</span> <span class="fn">MioMetodo</span>() { }
<span class="kw">#endregion</span>

<span class="cm">// #if — codice condizionale (solo in certi build):</span>
<span class="kw">#if</span> DEBUG
Console.<span class="fn">WriteLine</span>(<span class="str">"Modalità debug attiva"</span>);
<span class="kw">#else</span>
Console.<span class="fn">WriteLine</span>(<span class="str">"Produzione"</span>);
<span class="kw">#endif</span>

<span class="cm">// #pragma — disabilita warning specifici:</span>
<span class="kw">#pragma</span> warning disable CS0168
<span class="ty">int</span> variabileNonUsata;
<span class="kw">#pragma</span> warning restore CS0168</pre>
      <h4>Attributi comuni</h4>
      <pre><span class="cm">// [Obsolete] — marca come deprecato:</span>
[Obsolete(<span class="str">"Usa NuovoMetodo() invece"</span>)]
<span class="kw">static</span> <span class="ty">void</span> <span class="fn">VecchioMetodo</span>() { }

<span class="cm">// [Serializable] — per serializzazione:</span>
[Serializable]
<span class="kw">class</span> <span class="ty">MiaClasse</span> { }

<span class="cm">// [Conditional] — metodo chiamato solo in certi build:</span>
[System.Diagnostics.Conditional(<span class="str">"DEBUG"</span>)]
<span class="kw">static</span> <span class="ty">void</span> <span class="fn">Log</span>(<span class="ty">string</span> msg) => Console.<span class="fn">WriteLine</span>(<span class="str">$"[LOG] {msg}"</span>);

<span class="cm">// [JsonPropertyName] — per JSON:</span>
[System.Text.Json.Serialization.JsonPropertyName(<span class="str">"nome_prodotto"</span>)]
<span class="kw">public</span> <span class="ty">string</span> Nome { <span class="kw">get</span>; <span class="kw">set</span>; }</pre>
    </div>
  </div>
</div>

</div><!-- /main -->

<div class="main">
<div class="section" id="section-mod6">
  <div class="section-title">Modulo VI — Pro &amp; Avanzato <span class="tag tag-m6">MOD VI</span></div>

  <!-- 1. IDisposable & using -->
  <div class="topic-card" onclick="toggle(this)">
    <div class="topic-header"><h3>1. IDisposable &amp; using</h3><span class="topic-sub">Gestione risorse non gestite, pattern Dispose</span></div>
    <div class="topic-body">
      <div class="info">Implementa <b>IDisposable</b> per rilasciare risorse non gestite (file, connessioni DB, socket). Il blocco <code>using</code> chiama <code>Dispose()</code> automaticamente anche in caso di eccezione.</div>
      <pre><span class="cm">// Implementare IDisposable:</span>
<span class="kw">class</span> <span class="ty">RisorsaPersonalizzata</span> : IDisposable {
  <span class="kw">private bool</span> _disposed = <span class="kw">false</span>;
  <span class="kw">private</span> IntPtr _handle; <span class="cm">// risorsa non gestita</span>

  <span class="kw">public void</span> <span class="fn">Dispose</span>() {
    <span class="fn">Dispose</span>(<span class="kw">true</span>);
    GC.<span class="fn">SuppressFinalize</span>(<span class="kw">this</span>);
  }
  <span class="kw">protected virtual void</span> <span class="fn">Dispose</span>(<span class="kw">bool</span> disposing) {
    <span class="kw">if</span> (!_disposed) {
      <span class="kw">if</span> (disposing) { <span class="cm">/* libera risorse gestite */</span> }
      <span class="cm">// libera risorse non gestite qui</span>
      _disposed = <span class="kw">true</span>;
    }
  }
  ~<span class="ty">RisorsaPersonalizzata</span>() { <span class="fn">Dispose</span>(<span class="kw">false</span>); }
}

<span class="cm">// using — Dispose() chiamato automaticamente:</span>
<span class="kw">using</span> (<span class="kw">var</span> r = <span class="kw">new</span> <span class="ty">RisorsaPersonalizzata</span>()) {
  <span class="cm">// usa r</span>
} <span class="cm">// r.Dispose() chiamato qui, anche se c'è eccezione</span>

<span class="cm">// Sintassi moderna (C# 8+):</span>
<span class="kw">using var</span> r = <span class="kw">new</span> <span class="ty">RisorsaPersonalizzata</span>();
<span class="cm">// Dispose() chiamato alla fine dello scope</span>

<span class="cm">// Più risorse:</span>
<span class="kw">using var</span> sr = <span class="kw">new</span> <span class="ty">StreamReader</span>(<span class="str">"file.txt"</span>);
<span class="kw">using var</span> sw = <span class="kw">new</span> <span class="ty">StreamWriter</span>(<span class="str">"out.txt"</span>);</pre>
      <div class="warn">Regola: se una classe gestisce FileStream, SqlConnection, HttpClient o qualsiasi risorsa non gestita, implementa sempre IDisposable!</div>
    </div>
  </div>

  <!-- 2. IEnumerable & yield -->
  <div class="topic-card" onclick="toggle(this)">
    <div class="topic-header"><h3>2. IEnumerable&lt;T&gt; &amp; yield</h3><span class="topic-sub">Iteratori personalizzati, lazy evaluation, yield return</span></div>
    <div class="topic-body">
      <div class="info"><code>IEnumerable&lt;T&gt;</code> è l'interfaccia alla base di foreach e LINQ. <code>yield return</code> permette di creare sequenze pigre senza costruire un'intera lista in memoria.</div>
      <pre><span class="cm">// IEnumerable&lt;T&gt; — base di foreach e LINQ:</span>
<span class="kw">IEnumerable</span>&lt;<span class="ty">int</span>&gt; numeri = <span class="kw">new</span> <span class="ty">List</span>&lt;<span class="ty">int</span>&gt; { <span class="num">1</span>, <span class="num">2</span>, <span class="num">3</span> };
<span class="kw">foreach</span> (<span class="kw">int</span> n <span class="kw">in</span> numeri) Console.<span class="fn">WriteLine</span>(n);

<span class="cm">// Iteratore con yield return (lazy — genera 1 per volta):</span>
<span class="kw">static</span> <span class="ty">IEnumerable</span>&lt;<span class="ty">int</span>&gt; <span class="fn">Pari</span>(<span class="kw">int</span> max) {
  <span class="kw">for</span> (<span class="kw">int</span> i = <span class="num">0</span>; i &lt;= max; i += <span class="num">2</span>)
    <span class="kw">yield return</span> i; <span class="cm">// produce un valore e si ferma</span>
}
<span class="kw">foreach</span> (<span class="kw">int</span> p <span class="kw">in</span> <span class="fn">Pari</span>(<span class="num">10</span>)) Console.<span class="fn">Write</span>(p + <span class="str">" "</span>); <span class="cm">// 0 2 4 6 8 10</span>

<span class="cm">// yield break — ferma l'iteratore:</span>
<span class="kw">static</span> <span class="ty">IEnumerable</span>&lt;<span class="ty">int</span>&gt; <span class="fn">Finoa</span>(<span class="kw">int</span>[] arr, <span class="kw">int</span> stop) {
  <span class="kw">foreach</span> (<span class="kw">var</span> n <span class="kw">in</span> arr) {
    <span class="kw">if</span> (n == stop) <span class="kw">yield break</span>;
    <span class="kw">yield return</span> n;
  }
}

<span class="cm">// Classe iterabile personalizzata:</span>
<span class="kw">class</span> <span class="ty">Intervallo</span> : IEnumerable&lt;<span class="ty">int</span>&gt; {
  <span class="kw">int</span> _da, _a;
  <span class="kw">public</span> <span class="ty">Intervallo</span>(<span class="kw">int</span> da, <span class="kw">int</span> a) { _da = da; _a = a; }
  <span class="kw">public</span> <span class="ty">IEnumerator</span>&lt;<span class="ty">int</span>&gt; <span class="fn">GetEnumerator</span>() {
    <span class="kw">for</span> (<span class="kw">int</span> i = _da; i &lt;= _a; i++) <span class="kw">yield return</span> i;
  }
  System.Collections.<span class="ty">IEnumerator</span> System.Collections.IEnumerable.<span class="fn">GetEnumerator</span>() =&gt; <span class="fn">GetEnumerator</span>();
}
<span class="kw">foreach</span> (<span class="kw">var</span> n <span class="kw">in</span> <span class="kw">new</span> <span class="ty">Intervallo</span>(<span class="num">1</span>, <span class="num">5</span>)) Console.<span class="fn">Write</span>(n + <span class="str">" "</span>); <span class="cm">// 1 2 3 4 5</span></pre>
    </div>
  </div>

  <!-- 3. Extension Methods -->
  <div class="topic-card" onclick="toggle(this)">
    <div class="topic-header"><h3>3. Extension Methods</h3><span class="topic-sub">Aggiungere metodi a classi esistenti senza modificarle</span></div>
    <div class="topic-body">
      <div class="info">I metodi estensione permettono di aggiungere metodi a qualsiasi tipo — anche sealed o di libreria — senza ereditarietà. Devono stare in una classe <code>static</code> e il primo parametro usa <code>this</code>.</div>
      <pre><span class="cm">// Classe statica con metodi estensione:</span>
<span class="kw">static class</span> <span class="ty">StringExtensions</span> {
  <span class="cm">// 'this string s' = si applica a string</span>
  <span class="kw">public static string</span> <span class="fn">Capitalizza</span>(<span class="kw">this string</span> s) {
    <span class="kw">if</span> (<span class="ty">string</span>.<span class="fn">IsNullOrEmpty</span>(s)) <span class="kw">return</span> s;
    <span class="kw">return</span> <span class="ty">char</span>.<span class="fn">ToUpper</span>(s[<span class="num">0</span>]) + s[<span class="num">1</span>..].ToLower();
  }
  <span class="kw">public static bool</span> <span class="fn">EEmail</span>(<span class="kw">this string</span> s) =&gt;
    s.<span class="fn">Contains</span>(<span class="str">"@"</span>) &amp;&amp; s.<span class="fn">Contains</span>(<span class="str">"."</span>);
  <span class="kw">public static</span> <span class="ty">string</span> <span class="fn">Ripeti</span>(<span class="kw">this string</span> s, <span class="kw">int</span> n) =&gt;
    <span class="ty">string</span>.<span class="fn">Concat</span>(Enumerable.<span class="fn">Repeat</span>(s, n));
}

<span class="cm">// Uso — come se fossero metodi nativi:</span>
<span class="kw">string</span> nome = <span class="str">"mario"</span>;
Console.<span class="fn">WriteLine</span>(nome.<span class="fn">Capitalizza</span>());  <span class="cm">// "Mario"</span>
Console.<span class="fn">WriteLine</span>(<span class="str">"test@mail.it"</span>.<span class="fn">EEmail</span>()); <span class="cm">// true</span>
Console.<span class="fn">WriteLine</span>(<span class="str">"ab"</span>.<span class="fn">Ripeti</span>(<span class="num">3</span>));          <span class="cm">// "ababab"</span>

<span class="cm">// Estensione su List&lt;T&gt;:</span>
<span class="kw">static class</span> <span class="ty">ListExtensions</span> {
  <span class="kw">public static void</span> <span class="fn">StampaTutti</span>&lt;T&gt;(<span class="kw">this</span> <span class="ty">List</span>&lt;T&gt; lista) {
    lista.<span class="fn">ForEach</span>(item =&gt; Console.<span class="fn">WriteLine</span>(item));
  }
  <span class="kw">public static</span> T <span class="fn">CasualeItem</span>&lt;T&gt;(<span class="kw">this</span> <span class="ty">List</span>&lt;T&gt; lista) =&gt;
    lista[<span class="kw">new</span> <span class="ty">Random</span>().<span class="fn">Next</span>(lista.<span class="fn">Count</span>)];
}
<span class="kw">var</span> nomi = <span class="kw">new</span> <span class="ty">List</span>&lt;<span class="ty">string</span>&gt; { <span class="str">"Marco"</span>, <span class="str">"Giulia"</span>, <span class="str">"Luca"</span> };
nomi.<span class="fn">StampaTutti</span>();
Console.<span class="fn">WriteLine</span>(nomi.<span class="fn">CasualeItem</span>());

<span class="cm">// LINQ è interamente costruito su extension methods!</span></pre>
    </div>
  </div>

  <!-- 4. Thread & Task -->
  <div class="topic-card" onclick="toggle(this)">
    <div class="topic-header"><h3>4. Thread, Task &amp; Parallelismo</h3><span class="topic-sub">Thread, lock, CancellationToken, Parallel, Task.Run</span></div>
    <div class="topic-body">
      <div class="info">Per operazioni CPU-intensive usa <code>Task.Run</code>. Per evitare race conditions su dati condivisi usa <code>lock</code>. <code>CancellationToken</code> permette di annullare operazioni in modo cooperativo.</div>
      <pre><span class="cm">// Task.Run — esegui su thread pool:</span>
<span class="ty">Task</span> t = <span class="ty">Task</span>.<span class="fn">Run</span>(() =&gt; Console.<span class="fn">WriteLine</span>(<span class="str">"Su altro thread!"</span>));
t.<span class="fn">Wait</span>(); <span class="cm">// aspetta il completamento</span>

<span class="kw">int</span> risultato = <span class="kw">await</span> <span class="ty">Task</span>.<span class="fn">Run</span>(() =&gt; {
  <span class="kw">int</span> s = <span class="num">0</span>;
  <span class="kw">for</span> (<span class="kw">int</span> i = <span class="num">0</span>; i &lt; <span class="num">1000000</span>; i++) s += i;
  <span class="kw">return</span> s;
});

<span class="cm">// lock — evita race conditions:</span>
<span class="kw">private readonly object</span> _lock = <span class="kw">new</span> <span class="kw">object</span>();
<span class="kw">private int</span> _contatore = <span class="num">0</span>;
<span class="kw">void</span> <span class="fn">Incrementa</span>() {
  <span class="kw">lock</span> (_lock) { _contatore++; } <span class="cm">// solo 1 thread alla volta</span>
}

<span class="cm">// CancellationToken — annullamento cooperativo:</span>
<span class="kw">var</span> cts = <span class="kw">new</span> <span class="ty">CancellationTokenSource</span>();
cts.<span class="fn">CancelAfter</span>(<span class="num">3000</span>); <span class="cm">// annulla dopo 3 secondi</span>
<span class="kw">try</span> {
  <span class="kw">await</span> <span class="ty">Task</span>.<span class="fn">Run</span>(<span class="kw">async</span> () =&gt; {
    <span class="kw">while</span> (<span class="kw">true</span>) {
      cts.Token.<span class="fn">ThrowIfCancellationRequested</span>();
      <span class="kw">await</span> <span class="ty">Task</span>.<span class="fn">Delay</span>(<span class="num">500</span>, cts.Token);
      Console.<span class="fn">WriteLine</span>(<span class="str">"Lavoro..."</span>);
    }
  }, cts.Token);
}
<span class="kw">catch</span> (<span class="ty">OperationCanceledException</span>) { Console.<span class="fn">WriteLine</span>(<span class="str">"Annullato!"</span>); }

<span class="cm">// Parallel.For — CPU-bound parallelismo:</span>
<span class="ty">Parallel</span>.<span class="fn">For</span>(<span class="num">0</span>, <span class="num">10</span>, i =&gt; Console.<span class="fn">WriteLine</span>($<span class="str">"Item {i}"</span>));
<span class="ty">Parallel</span>.<span class="fn">ForEach</span>(nomi, nome =&gt; Console.<span class="fn">WriteLine</span>(nome));

<span class="cm">// Thread diretto (raramente necessario):</span>
<span class="kw">var</span> thread = <span class="kw">new</span> <span class="ty">Thread</span>(() =&gt; Console.<span class="fn">WriteLine</span>(<span class="str">"Thread!"</span>));
thread.IsBackground = <span class="kw">true</span>;
thread.<span class="fn">Start</span>();
thread.<span class="fn">Join</span>(); <span class="cm">// aspetta</span></pre>
      <div class="warn">Preferisci sempre async/await e Task.Run al threading diretto. Usa lock solo quando necessario — preferisci ConcurrentDictionary e Interlocked per dati condivisi semplici.</div>
    </div>
  </div>

  <!-- 5. Collezioni Avanzate -->
  <div class="topic-card" onclick="toggle(this)">
    <div class="topic-header"><h3>5. Collezioni Avanzate</h3><span class="topic-sub">SortedDictionary, ConcurrentDictionary, LinkedList, SortedSet</span></div>
    <div class="topic-body">
      <pre><span class="cm">// SortedDictionary — chiavi sempre ordinate:</span>
<span class="kw">var</span> sd = <span class="kw">new</span> <span class="ty">SortedDictionary</span>&lt;<span class="ty">string</span>, <span class="ty">int</span>&gt;();
sd[<span class="str">"banana"</span>] = <span class="num">2</span>; sd[<span class="str">"arancia"</span>] = <span class="num">5</span>; sd[<span class="str">"ciliegia"</span>] = <span class="num">1</span>;
<span class="kw">foreach</span> (<span class="kw">var</span> kv <span class="kw">in</span> sd) Console.<span class="fn">WriteLine</span>(kv.Key); <span class="cm">// arancia, banana, ciliegia</span>

<span class="cm">// SortedSet — elementi unici e ordinati:</span>
<span class="kw">var</span> ss = <span class="kw">new</span> <span class="ty">SortedSet</span>&lt;<span class="ty">int</span>&gt; { <span class="num">5</span>, <span class="num">1</span>, <span class="num">3</span>, <span class="num">1</span>, <span class="num">2</span> };
<span class="cm">// ss = { 1, 2, 3, 5 } — no duplicati, sempre ordinato</span>
ss.<span class="fn">Min</span>; ss.<span class="fn">Max</span>; <span class="cm">// 1, 5</span>

<span class="cm">// ConcurrentDictionary — thread-safe:</span>
<span class="kw">var</span> cd = <span class="kw">new</span> <span class="ty">ConcurrentDictionary</span>&lt;<span class="ty">string</span>, <span class="ty">int</span>&gt;();
cd.<span class="fn">TryAdd</span>(<span class="str">"Marco"</span>, <span class="num">25</span>);
cd.<span class="fn">AddOrUpdate</span>(<span class="str">"Marco"</span>, <span class="num">1</span>, (key, old) =&gt; old + <span class="num">1</span>); <span class="cm">// incrementa</span>
cd.<span class="fn">GetOrAdd</span>(<span class="str">"Giulia"</span>, <span class="num">30</span>); <span class="cm">// aggiunge solo se manca</span>
cd.<span class="fn">TryRemove</span>(<span class="str">"Marco"</span>, <span class="kw">out int</span> val);

<span class="cm">// LinkedList — inserimento O(1) ovunque:</span>
<span class="kw">var</span> ll = <span class="kw">new</span> <span class="ty">LinkedList</span>&lt;<span class="ty">string</span>&gt;();
ll.<span class="fn">AddLast</span>(<span class="str">"B"</span>); ll.<span class="fn">AddFirst</span>(<span class="str">"A"</span>); ll.<span class="fn">AddLast</span>(<span class="str">"C"</span>);
<span class="ty">LinkedListNode</span>&lt;<span class="ty">string</span>&gt; nodo = ll.<span class="fn">Find</span>(<span class="str">"B"</span>);
ll.<span class="fn">AddAfter</span>(nodo, <span class="str">"B2"</span>);
ll.<span class="fn">Remove</span>(nodo);

<span class="cm">// Interlocked — operazioni atomiche senza lock:</span>
<span class="kw">private int</span> _count = <span class="num">0</span>;
<span class="ty">Interlocked</span>.<span class="fn">Increment</span>(<span class="kw">ref</span> _count);  <span class="cm">// thread-safe ++</span>
<span class="ty">Interlocked</span>.<span class="fn">Decrement</span>(<span class="kw">ref</span> _count);  <span class="cm">// thread-safe --</span>
<span class="ty">Interlocked</span>.<span class="fn">Add</span>(<span class="kw">ref</span> _count, <span class="num">5</span>);      <span class="cm">// thread-safe += 5</span></pre>
      <div class="table-wrap"><table><tr><th>Collezione</th><th>Ordinata</th><th>Thread-safe</th><th>Uso principale</th></tr>
      <tr><td>Dictionary</td><td>No</td><td>No</td><td>Ricerca veloce</td></tr>
      <tr><td>SortedDictionary</td><td>Sì (chiave)</td><td>No</td><td>Dati ordinati</td></tr>
      <tr><td>ConcurrentDictionary</td><td>No</td><td>Sì</td><td>Multi-threading</td></tr>
      <tr><td>LinkedList</td><td>No</td><td>No</td><td>Inserimenti frequenti</td></tr>
      <tr><td>SortedSet</td><td>Sì</td><td>No</td><td>Elementi unici ordinati</td></tr></table></div>
    </div>
  </div>

  <!-- 6. Interfacce Fondamentali -->
  <div class="topic-card" onclick="toggle(this)">
    <div class="topic-header"><h3>6. Interfacce Fondamentali</h3><span class="topic-sub">IComparable&lt;T&gt;, IEquatable&lt;T&gt;, IComparer&lt;T&gt;, ICloneable</span></div>
    <div class="topic-body">
      <pre><span class="cm">// IComparable&lt;T&gt; — permette ordinamento naturale:</span>
<span class="kw">class</span> <span class="ty">Studente</span> : IComparable&lt;<span class="ty">Studente</span>&gt; {
  <span class="kw">public string</span> Nome { <span class="kw">get</span>; <span class="kw">set</span>; }
  <span class="kw">public int</span> Voto { <span class="kw">get</span>; <span class="kw">set</span>; }
  <span class="kw">public int</span> <span class="fn">CompareTo</span>(<span class="ty">Studente</span>? other) {
    <span class="kw">if</span> (other == <span class="kw">null</span>) <span class="kw">return</span> <span class="num">1</span>;
    <span class="kw">return</span> Voto.<span class="fn">CompareTo</span>(other.Voto); <span class="cm">// ordine per voto</span>
  }
}
<span class="kw">var</span> studenti = <span class="kw">new</span> <span class="ty">List</span>&lt;<span class="ty">Studente</span>&gt; { ... };
studenti.<span class="fn">Sort</span>(); <span class="cm">// usa CompareTo automaticamente</span>

<span class="cm">// IEquatable&lt;T&gt; — uguaglianza personalizzata:</span>
<span class="kw">class</span> <span class="ty">Punto</span> : IEquatable&lt;<span class="ty">Punto</span>&gt; {
  <span class="kw">public int</span> X, Y;
  <span class="kw">public bool</span> <span class="fn">Equals</span>(<span class="ty">Punto</span>? other) =&gt;
    other != <span class="kw">null</span> &amp;&amp; X == other.X &amp;&amp; Y == other.Y;
  <span class="kw">public override bool</span> <span class="fn">Equals</span>(<span class="kw">object</span>? obj) =&gt;
    obj <span class="kw">is</span> <span class="ty">Punto</span> p &amp;&amp; <span class="fn">Equals</span>(p);
  <span class="kw">public override int</span> <span class="fn">GetHashCode</span>() =&gt; HashCode.<span class="fn">Combine</span>(X, Y);
}
<span class="kw">var</span> p1 = <span class="kw">new</span> <span class="ty">Punto</span> { X=<span class="num">1</span>, Y=<span class="num">2</span> };
<span class="kw">var</span> p2 = <span class="kw">new</span> <span class="ty">Punto</span> { X=<span class="num">1</span>, Y=<span class="num">2</span> };
Console.<span class="fn">WriteLine</span>(p1.<span class="fn">Equals</span>(p2)); <span class="cm">// true!</span>

<span class="cm">// IComparer&lt;T&gt; — ordinamento alternativo:</span>
<span class="kw">class</span> <span class="ty">OrdinaNome</span> : IComparer&lt;<span class="ty">Studente</span>&gt; {
  <span class="kw">public int</span> <span class="fn">Compare</span>(<span class="ty">Studente</span>? a, <span class="ty">Studente</span>? b) =&gt;
    <span class="ty">string</span>.<span class="fn">Compare</span>(a?.Nome, b?.Nome, <span class="ty">StringComparison</span>.OrdinalIgnoreCase);
}
studenti.<span class="fn">Sort</span>(<span class="kw">new</span> <span class="ty">OrdinaNome</span>()); <span class="cm">// ordina per nome</span>

<span class="cm">// Confronto con lambda (più pratico):</span>
studenti.<span class="fn">Sort</span>((a, b) =&gt; a.Nome.<span class="fn">CompareTo</span>(b.Nome));
<span class="kw">var</span> ordinati = studenti.<span class="fn">OrderBy</span>(s =&gt; s.Voto).<span class="fn">ThenBy</span>(s =&gt; s.Nome);</pre>
    </div>
  </div>

  <!-- 7. Operator Overloading -->
  <div class="topic-card" onclick="toggle(this)">
    <div class="topic-header"><h3>7. Operator Overloading</h3><span class="topic-sub">Sovraccaricare +, -, ==, !=, >, &lt;, conversioni implicite/esplicite</span></div>
    <div class="topic-body">
      <div class="info">In C# puoi ridefinire il comportamento degli operatori per le tue classi/struct. Gli operatori di uguaglianza (==, !=) vanno sempre in coppia, così come (&lt;, &gt;) e (&lt;=, &gt;=).</div>
      <pre><span class="kw">struct</span> <span class="ty">Vettore2D</span> {
  <span class="kw">public double</span> X, Y;
  <span class="kw">public</span> <span class="ty">Vettore2D</span>(<span class="kw">double</span> x, <span class="kw">double</span> y) { X = x; Y = y; }

  <span class="cm">// Operatori aritmetici:</span>
  <span class="kw">public static</span> <span class="ty">Vettore2D</span> <span class="kw">operator</span> +(<span class="ty">Vettore2D</span> a, <span class="ty">Vettore2D</span> b) =&gt;
    <span class="kw">new</span>(a.X + b.X, a.Y + b.Y);
  <span class="kw">public static</span> <span class="ty">Vettore2D</span> <span class="kw">operator</span> -(<span class="ty">Vettore2D</span> a, <span class="ty">Vettore2D</span> b) =&gt;
    <span class="kw">new</span>(a.X - b.X, a.Y - b.Y);
  <span class="kw">public static</span> <span class="ty">Vettore2D</span> <span class="kw">operator</span> *(<span class="ty">Vettore2D</span> v, <span class="kw">double</span> s) =&gt;
    <span class="kw">new</span>(v.X * s, v.Y * s);

  <span class="cm">// Uguaglianza (sempre in coppia!):</span>
  <span class="kw">public static bool</span> <span class="kw">operator</span> ==(<span class="ty">Vettore2D</span> a, <span class="ty">Vettore2D</span> b) =&gt;
    a.X == b.X &amp;&amp; a.Y == b.Y;
  <span class="kw">public static bool</span> <span class="kw">operator</span> !=(<span class="ty">Vettore2D</span> a, <span class="ty">Vettore2D</span> b) =&gt; !(a == b);

  <span class="cm">// Confronto (sempre in coppia!):</span>
  <span class="kw">public static bool</span> <span class="kw">operator</span> &gt;(<span class="ty">Vettore2D</span> a, <span class="ty">Vettore2D</span> b) =&gt;
    a.<span class="fn">Lunghezza</span>() &gt; b.<span class="fn">Lunghezza</span>();
  <span class="kw">public static bool</span> <span class="kw">operator</span> &lt;(<span class="ty">Vettore2D</span> a, <span class="ty">Vettore2D</span> b) =&gt; b &gt; a;

  <span class="kw">public double</span> <span class="fn">Lunghezza</span>() =&gt; Math.<span class="fn">Sqrt</span>(X*X + Y*Y);
  <span class="kw">public override string</span> <span class="fn">ToString</span>() =&gt; $<span class="str">"({X}, {Y})"</span>;

  <span class="cm">// Conversioni implicite/esplicite:</span>
  <span class="kw">public static implicit operator</span> <span class="ty">Vettore2D</span>((<span class="kw">double</span>,<span class="kw">double</span>) t) =&gt;
    <span class="kw">new</span>(t.Item1, t.Item2);
  <span class="kw">public static explicit operator</span> <span class="ty">string</span>(<span class="ty">Vettore2D</span> v) =&gt; v.<span class="fn">ToString</span>();
}

<span class="ty">Vettore2D</span> v1 = <span class="kw">new</span>(<span class="num">3</span>, <span class="num">4</span>);
<span class="ty">Vettore2D</span> v2 = <span class="kw">new</span>(<span class="num">1</span>, <span class="num">2</span>);
<span class="ty">Vettore2D</span> v3 = v1 + v2;          <span class="cm">// (4, 6)</span>
<span class="kw">bool</span> uguale = v1 == v2;           <span class="cm">// false</span>
<span class="ty">Vettore2D</span> v4 = (<span class="num">5.0</span>, <span class="num">6.0</span>);      <span class="cm">// conversione implicita da tuple</span>
Console.<span class="fn">WriteLine</span>(v3);            <span class="cm">// (4, 6)</span></pre>
    </div>
  </div>

  <!-- 8. Indexers & Advanced Properties -->
  <div class="topic-card" onclick="toggle(this)">
    <div class="topic-header"><h3>8. Indexers &amp; Proprietà Avanzate</h3><span class="topic-sub">Indicizzatori, init-only, required, computed, backing field</span></div>
    <div class="topic-body">
      <pre><span class="cm">// Indexer — accesso con [] sulla tua classe:</span>
<span class="kw">class</span> <span class="ty">Rubrica</span> {
  <span class="kw">private</span> <span class="ty">Dictionary</span>&lt;<span class="ty">string</span>, <span class="ty">string</span>&gt; _dati = <span class="kw">new</span>();

  <span class="cm">// Indexer con chiave string:</span>
  <span class="kw">public string this</span>[<span class="ty">string</span> nome] {
    <span class="kw">get</span> =&gt; _dati.<span class="fn">GetValueOrDefault</span>(nome, <span class="str">"N/A"</span>);
    <span class="kw">set</span> =&gt; _dati[nome] = value;
  }
  <span class="cm">// Indexer con indice int:</span>
  <span class="kw">public string this</span>[<span class="kw">int</span> i] =&gt; _dati.<span class="fn">ElementAt</span>(i).Value;
}
<span class="ty">Rubrica</span> r = <span class="kw">new</span>();
r[<span class="str">"Marco"</span>] = <span class="str">"123-456"</span>; <span class="cm">// set</span>
Console.<span class="fn">WriteLine</span>(r[<span class="str">"Marco"</span>]); <span class="cm">// get → "123-456"</span>

<span class="cm">// init-only property (C# 9+) — si imposta solo in inizializzazione:</span>
<span class="kw">class</span> <span class="ty">Persona</span> {
  <span class="kw">public string</span> Nome { <span class="kw">get</span>; <span class="kw">init</span>; } <span class="cm">// solo con new + {}</span>
  <span class="kw">public int</span> Eta { <span class="kw">get</span>; <span class="kw">init</span>; }
}
<span class="ty">Persona</span> p = <span class="kw">new</span>() { Nome = <span class="str">"Marco"</span>, Eta = <span class="num">25</span> };
<span class="cm">// p.Nome = "Giulia"; // ERRORE — non modificabile dopo init</span>

<span class="cm">// required property (C# 11+) — obbligatoria in inizializzazione:</span>
<span class="kw">class</span> <span class="ty">Prodotto</span> {
  <span class="kw">public required string</span> Nome { <span class="kw">get</span>; <span class="kw">set</span>; }
  <span class="kw">public required double</span> Prezzo { <span class="kw">get</span>; <span class="kw">set</span>; }
}
<span class="cm">// new Prodotto() — ERRORE: Nome e Prezzo sono required</span>
<span class="ty">Prodotto</span> prod = <span class="kw">new</span>() { Nome = <span class="str">"Pizza"</span>, Prezzo = <span class="num">8.50</span> }; <span class="cm">// OK</span>

<span class="cm">// Proprietà calcolate e backing field avanzate:</span>
<span class="kw">class</span> <span class="ty">Cerchio</span> {
  <span class="kw">private double</span> _raggio;
  <span class="kw">public double</span> Raggio {
    <span class="kw">get</span> =&gt; _raggio;
    <span class="kw">set</span> =&gt; _raggio = value &lt; <span class="num">0</span> ? <span class="kw">throw new</span> <span class="ty">ArgumentException</span>(<span class="str">"Negativo!"</span>) : value;
  }
  <span class="kw">public double</span> Area =&gt; Math.PI * _raggio * _raggio;           <span class="cm">// calcolata</span>
  <span class="kw">public double</span> Circonferenza =&gt; <span class="num">2</span> * Math.PI * _raggio;       <span class="cm">// calcolata</span>
  <span class="kw">public double</span> Diametro { <span class="kw">get</span> =&gt; _raggio * <span class="num">2</span>; <span class="kw">set</span> =&gt; _raggio = value / <span class="num">2</span>; }
}</pre>
    </div>
  </div>

  <!-- 9. Namespaces -->
  <div class="topic-card" onclick="toggle(this)">
    <div class="topic-header"><h3>9. Namespaces &amp; using Direttive</h3><span class="topic-sub">namespace, using, global using, alias, namespace file-scoped</span></div>
    <div class="topic-body">
      <pre><span class="cm">// Definire un namespace:</span>
<span class="kw">namespace</span> MiaApp.Modelli {
  <span class="kw">class</span> <span class="ty">Utente</span> { <span class="kw">public string</span> Nome { <span class="kw">get</span>; <span class="kw">set</span>; } }
}
<span class="kw">namespace</span> MiaApp.Servizi {
  <span class="kw">class</span> <span class="ty">UtenteService</span> {
    <span class="cm">// Accesso con nome completo:</span>
    MiaApp.Modelli.<span class="ty">Utente</span> u = <span class="kw">new</span>();
  }
}

<span class="cm">// using — importa namespace:</span>
<span class="kw">using</span> System.Collections.Generic;
<span class="kw">using</span> System.Linq;
<span class="kw">using</span> MiaApp.Modelli;

<span class="cm">// Alias — rinomina per conflitti:</span>
<span class="kw">using</span> Win = System.Windows;
<span class="kw">using</span> Web = System.Web;
Win.<span class="ty">Point</span> p1 = <span class="kw">new</span>();
Web.<span class="ty">HttpContext</span> ctx = ...;

<span class="cm">// using static — importa membri statici direttamente:</span>
<span class="kw">using static</span> System.Math;
<span class="kw">using static</span> System.Console;
<span class="fn">WriteLine</span>(<span class="fn">Sqrt</span>(<span class="num">16</span>)); <span class="cm">// senza Math. e Console.</span>

<span class="cm">// global using (C# 10+) — vale per tutto il progetto:</span>
<span class="cm">// In GlobalUsings.cs:</span>
<span class="kw">global using</span> System;
<span class="kw">global using</span> System.Collections.Generic;
<span class="kw">global using</span> System.Linq;
<span class="cm">// Ora disponibili in tutti i file senza dichiarare!</span>

<span class="cm">// File-scoped namespace (C# 10+) — meno indentazione:</span>
<span class="kw">namespace</span> MiaApp.Modelli; <span class="cm">// nessuna { }</span>
<span class="kw">class</span> <span class="ty">Prodotto</span> { } <span class="cm">// automaticamente in MiaApp.Modelli</span>
<span class="kw">class</span> <span class="ty">Ordine</span> { }   <span class="cm">// stesso namespace</span>

<span class="cm">// namespace annidati — equivalenti:</span>
<span class="kw">namespace</span> A { <span class="kw">namespace</span> B { <span class="kw">class</span> <span class="ty">C</span> {} } }
<span class="kw">namespace</span> A.B { <span class="kw">class</span> <span class="ty">C</span> {} } <span class="cm">// identico</span></pre>
      <div class="warn">Best practice: usa file-scoped namespace (C# 10+) e global using per ridurre il boilerplate. Ogni file dovrebbe avere un solo namespace e una sola classe principale.</div>
    </div>
  </div>

</div>
</div><!-- /main extra -->
<script>
function show(id, btn) {
  document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
  document.getElementById('section-' + id).classList.add('active');
  if (btn) {
    document.querySelectorAll('.nav-btn').forEach(b => b.classList.remove('active'));
    btn.classList.add('active');
  }
}
function toggle(card) { card.classList.toggle('open'); }
function showTopic(moduleId, idx) {
  document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
  document.getElementById('section-' + moduleId).classList.add('active');
  document.querySelectorAll('.nav-btn').forEach(b => b.classList.remove('active'));
  const order = ['overview','mod1','mod2','mod3','mod4','mod5','mod6'];
  document.querySelectorAll('.nav-btn')[order.indexOf(moduleId)].classList.add('active');
  const cards = document.querySelectorAll('#section-' + moduleId + ' .topic-card');
  cards.forEach(c => c.classList.remove('open'));
  if (cards[idx]) {
    cards[idx].classList.add('open');
    setTimeout(() => cards[idx].scrollIntoView({ behavior: 'smooth', block: 'start' }), 50);
  }
}

// SEARCH
const MODULE_LABELS = {
  mod1: 'Mod I — Basi', mod2: 'Mod II — OOP',
  mod3: 'Mod III — File', mod4: 'Mod IV — Avanzato', mod5: 'Mod V — Extra', mod6: 'Mod VI — Pro'
};
function buildIndex() {
  const index = [];
  ['mod1','mod2','mod3','mod4','mod5','mod6'].forEach(modId => {
    const cards = document.querySelectorAll('#section-' + modId + ' .topic-card');
    cards.forEach((card, idx) => {
      const title = card.querySelector('h3')?.innerText || '';
      const sub   = card.querySelector('.topic-sub')?.innerText || '';
      const body  = card.querySelector('.topic-body')?.innerText || '';
      index.push({ modId, idx, title, sub, text: (title+' '+sub+' '+body).toLowerCase(), displayText: body.trim() });
    });
  });
  return index;
}
let _index = null;
function getIndex() { return _index || (_index = buildIndex()); }
function highlight(str, query) {
  const re = new RegExp('(' + query.replace(/[.*+?^${}()|[\]\\]/g, '\\$&') + ')', 'gi');
  return str.replace(re, '<span class="sr-highlight">$1</span>');
}
function getSnippet(bodyText, query) {
  const lower = bodyText.toLowerCase();
  const pos = lower.indexOf(query.toLowerCase());
  if (pos === -1) return bodyText.slice(0, 60) + '…';
  const start = Math.max(0, pos - 20);
  const end   = Math.min(bodyText.length, pos + query.length + 40);
  return (start > 0 ? '…' : '') + bodyText.slice(start, end) + (end < bodyText.length ? '…' : '');
}
function onSearch() {
  const query = document.getElementById('searchInput').value.trim();
  const clearBtn = document.getElementById('searchClear');
  clearBtn.style.display = query ? 'block' : 'none';
  if (!query) { closeResults(); return; }
  openResults();
  const results = getIndex().filter(item => item.text.includes(query.toLowerCase()));
  const box = document.getElementById('searchResults');
  if (results.length === 0) {
    box.innerHTML = '<div class="sr-empty">Nessun risultato per "<b>' + query + '</b>"</div>';
    return;
  }
  box.innerHTML = results.map(r => {
    const snippet = getSnippet(r.displayText, query);
    return `<div class="sr-item" onclick="goToResult('${r.modId}', ${r.idx})">
      <div class="sr-mod">${MODULE_LABELS[r.modId]}</div>
      <div class="sr-title">${highlight(r.title, query)}</div>
      <div class="sr-snippet">${highlight(snippet, query)}</div>
    </div>`;
  }).join('');
}
function goToResult(modId, idx) { clearSearch(); showTopic(modId, idx); }
function openResults() {
  const q = document.getElementById('searchInput').value.trim();
  if (q) document.getElementById('searchResults').classList.add('open');
}
function closeResults() { document.getElementById('searchResults').classList.remove('open'); }
function clearSearch() {
  document.getElementById('searchInput').value = '';
  document.getElementById('searchClear').style.display = 'none';
  closeResults();
}
document.addEventListener('click', e => {
  if (!document.getElementById('searchWrap').contains(e.target)) closeResults();
});
</script>
</body>
</html>
